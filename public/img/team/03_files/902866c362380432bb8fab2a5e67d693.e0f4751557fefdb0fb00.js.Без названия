(window.webpackJsonp=window.webpackJsonp||[]).push([["902866c362380432bb8fab2a5e67d693"],{"/cSr":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var i=s("q1tI"),a=(s("17x9"),s("ZxpX"));function n(e){return i.createElement("div",{className:Object(a.a)("ChatSettingsRoundedIcon","ChatSettingsRoundedIcon--"+e.type,"ChatSettingsRoundedIcon--"+e.backgroundColor)})}},ZoqV:function(e,t,s){"use strict";s.d(t,"a",(function(){return Se}));var i=s("ofcU"),a=s("q1tI"),n=s("i8i4"),r=(s("HEwt"),s("a1Th"),s("rGqo"),s("rE2o"),s("ioFf"),s("OEbY"),s("VRzm"),s("Btvt"),s("P13b")),o=s("vT4u"),l=s("rDjD"),c=s("6krn"),h=s("aong"),d=s("amDN"),m=s("BiHW"),p=(s("pIFo"),s("ZxpX")),g=s("s0Wt"),u=s("SSU4"),_=s("b8Q7"),b=s("sp2a"),v=s("ERyv"),S=c.a.getLang;class f extends a.PureComponent{constructor(e){super(e),this.onSaveTitle=e=>{var t=this.props.store,s=t.get(),i=e.value.trim().replace("\n","");i&&i!==unclean(this.props.title)&&(this.setState({titleChanged:!1}),t.set(o.jd.bind(null,s.peer,i)))},this.onChangeTitle=e=>{if(this.state.title!==e.target.value){var t=e.target.value.replace("\n","");this.setState({title:t,titleChanged:unclean(this.props.title)!==t})}},this.onValidateTitle=e=>!!e.trim().replace("\n",""),this.onCancelTitle=()=>{this.setState({title:unclean(this.props.title),titleChanged:!1})},this.onSaveDescription=e=>{},this.onPhotoUpload=()=>{var e=this.props.store,t=e.get().peer;Object(b.v)(e)&&(cur.recieveCropResult=void 0,Page.ownerPhoto(t,{gid:e.get().gid}))},this.onPhotoRemove=()=>{var e=this.props.store,t=e.get().peer;Object(b.v)(e)&&e.set(o.Tb.bind(null,t)).then(()=>e.set(o.N.bind(null,t))).catch(e=>Object(v.a)("onPhotoRemove",e))},this.state={title:unclean(e.title),titleChanged:!1}}getCasperInfo(){var e=S("mail_casper_chat_info");return a.createElement(a.Fragment,null,S("mail_casper_chat_label"),a.createElement(g.default,{text:e,position:"t",appearance:"light",maxWidth:280,marginTop:-6},a.createElement(_.default,{"aria-label":e,className:"ChatSettingsInfo__casperHint"})))}render(){var e=this.props,t=e.store,s=e.photo,i=e.title,n=e.description,r=e.grid,o=e.meta,l=e.isDefaultPhotoOwner,c=void 0!==l&&l,h=e.isCasper,d=void 0!==h&&h,m=unclean(i),_=Object(b.v)(t),v=Object(p.a)("ChatSettingsInfo",{"ChatSettingsInfo--editable":_}),f=Object(p.a)("ChatSettingsInfo__title",{"ChatSettingsInfo__title-service":64&this.props.flags});return a.createElement("div",{className:v},a.createElement("header",{className:"ChatSettingsInfo__header"},a.createElement("div",{className:"ChatSettingsInfo__photo"},a.createElement("div",{className:"ChatSettingsInfo__attach nim-peer nim-peer_larger","data-tip":S("mail_settings_photo"),onClick:this.onPhotoUpload},s?a.createElement("img",{src:s,width:"80",height:"80",alt:m,className:"ChatSettingsInfo__photoSelf"}):a.createElement("div",{className:"nim-peer--photo-w"},a.createElement("div",{className:"ChatSettingsInfo__photoGrid nim-peer--photo",dangerouslySetInnerHTML:{__html:r}}))),s&&_&&!c&&a.createElement(g.default,{text:S("mail_settings_remove_photo"),position:"t",align:"left"},a.createElement("button",{onClick:this.onPhotoRemove,className:"ChatSettingsInfo__photoRemove"}))),a.createElement("h3",{className:f},_?a.createElement(u.default,{value:this.state.title,changed:this.state.titleChanged,useEnter:!0,onSave:this.onSaveTitle,onChange:this.onChangeTitle,onCancel:this.onCancelTitle,validate:this.onValidateTitle}):m),a.createElement("div",{className:"ChatSettingsInfo__meta"},a.createElement("span",{className:"ChatSettingsInfo__metaItem"},o),d&&a.createElement("span",{className:"ChatSettingsInfo__metaItem"},this.getCasperInfo()))),n&&a.createElement("div",{className:"ChatSettingsInfo__description"},_?a.createElement(u.default,{value:n,onSave:this.onSaveDescription}):n))}}s("KKXr");var C=s("h7Kf"),k=s("zgoX"),E=s("n3cE"),y=s("ngxX"),w=c.a.getLang;class I extends a.Component{constructor(e){super(e),this.onCopy=()=>{this.input&&(elfocus(this.input,0,this.input.value.length),document.execCommand("copy"),this.setState({copied:!0}))},this.onBlinkTextHide=()=>{this.setState({copied:!1})},this.getInputRef=e=>{e&&e.element&&(this.input=e.element)},this.state={copied:!1}}componentDidMount(){this.input&&elfocus(this.input,0,this.input.value.length)}render(){var e=this.props,t=e.onReset,s=e.invitationLinks,i=e.store,n=w("mail_invite_link_reset_explainer").split("{reset_link}"),o=!Object(r.Tb)(i,i.get().peer),l=s.linkWithHistory,c=s.linkWithoutHistory,h=this.props.isInvitationLinkWithHistory?l:c;return a.createElement("div",{className:"ChatSettingsInvitationLink"},this.props.reseted&&a.createElement("div",{className:"ChatSettingsInvitationLink__reseted"},w("mail_invite_link_reseted_explainer")),a.createElement("p",null,w("mail_invite_link_explainer")),a.createElement("div",{className:"ChatSettingsInvitationLink__switch"},a.createElement(y.a,{children:w("mail_im_chat_add_members_show_history"),checked:this.props.isInvitationLinkWithHistory,onChange:this.props.onLinkHistoryOptionToggle})),a.createElement("div",{className:"ChatSettingsInvitationLink__main"},a.createElement(C.default,{ref:this.getInputRef,readOnly:"readonly",className:"ChatSettingsInvitationLink__input",value:h}),a.createElement(m.a,{onClick:this.onCopy},w("mail_get_invite_link_copy")),a.createElement(k.default,{className:"ChatSettingsInvitationLink__copied",shown:this.state.copied,callback:this.onBlinkTextHide},w("mail_invite_link_copied"))),o&&a.createElement("p",null,n[0],a.createElement(E.a,{className:"ChatSettingsInvitationLink__reset",onClick:t},w("mail_invite_reset_link")),n[1]))}}var O=s("WfnU"),M=s("0MTP"),j=c.a.getLang;class N extends a.Component{constructor(e){super(e),this.onConfirm=()=>{this.state.loading||(this.setState({loading:!0}),this.props.onConfirm().then(()=>{this.setState({loading:!1}),this.props.onCancel()}).catch(()=>this.setState({loading:!1})))},this.state={}}render(){return a.createElement("div",{className:"ChatSettingsResetInvitationLink"},a.createElement("div",{className:"ChatSettingsResetInvitationLink__text",dangerouslySetInnerHTML:{__html:j("mail_chat_reset_link_warning")}}),a.createElement(M.a,{alignment:"right"},a.createElement(m.a,{appearance:"tertiary",onClick:this.props.onCancel},j("global_cancel")),a.createElement(O.default,{onClick:this.onConfirm,loading:this.state.loading},j("mail_chat_reset_link_confirm"))))}}s("91GP");var L=s("p9ed"),P=s("5R8M"),x=s("Hri0"),U=s("hN/p"),T=s("+tmx"),A=s("/cSr"),R=s("rHUl"),H=c.a.getLang,W=()=>[{label:H("mail_settings_time_one_hour"),value:T.c},{label:H("mail_settings_time_eight_hours"),value:8*T.c},{label:H("mail_settings_time_day"),value:T.a},{label:H("mail_settings_time_week"),value:T.g},{label:H("mail_settings_time_forever"),value:-1}];class D extends a.Component{constructor(e){super(e),this.onCopyInviteLink=e=>{this.input&&(this.input.focus(),this.input.select(),document.execCommand("copy"),this.setState({copied:!0})),e.preventDefault(),e.stopPropagation()},this.onBlinkTextHide=()=>{this.setState({copied:!1})},this.getHiddenInput=e=>{this.input=e},this.onDisabledSettingsChange=e=>{var t=e.selected.value,s=t>0?Math.floor((Date.now()+t)/1e3):t,i=0!==s;this.setState({push_disabled_until:s,push_disabled:i,disabledPlaceholder:this.getDisabledPlaceholder(s)},()=>{this.props.onUpdateNotificationSettings(i,Math.floor(t/1e3)).then(()=>{this.props.afterDisableUntilUpdated()})})},this.onMentionSettingsChange=e=>{var t=e.selected.value;this.setState({mentions_push_disabled:t},()=>{this.props.onUpdateMentionNotificationSettings(t).then(()=>{this.props.afterNotificationSettingsUpdated()})})},this.onShowInviteLink=()=>{Object(b.u)(this.props.store)&&this.props.showInvitationLink()};var t=this.getPushSettingsFromProps(e),s=t.push_disabled_until,i=s>0?+new Date(s):s;this.state=Object.assign({pushDisabled:s,disabledPlaceholder:this.getDisabledPlaceholder(i),copied:!1},t)}getPushSettingsFromProps(e){var t=e.store.get();return t.tabs[t.peer].notifications}getPushDisabledFromProps(e){var t=e.store.get();return t.tabs[t.peer].notifications.push_disabled}getDisabledPlaceholder(e){if(!e||0===e)return H("mail_settings_configure");if(-1===e)return H("mail_settings_time_forever");var t=getShortDateWithTime(e,0,!1);return`${H("mail_settings_until")} ${t}`}getDisabledOptions(){return this.state.push_disabled_until?[].concat(W(),[{label:H("mail_settings_time_cancel"),value:0}]):W()}render(){var e=this.props,t=e.store,s=e.flagsUpdated,i=e.notificationSettingsUpdated,n=e.disableUntilUpdated,o=e.onHideStatus,l=e.invitationLinks,c=e.isInvitationLinkWithHistory,h=t.get(),d=h.tabs[h.peer],m=Object(r.Tb)(h,h.peer),g=Object(R.D)(h,h.peer),u=d.inviteLinks&&Object(b.C)(t)||Object(b.u)(t),_=l||d.inviteLinks,v=_&&(c?_.linkWithHistory:_.linkWithoutHistory),S=Object(b.D)(t,h.peer,h.id),f=Object(p.a)("ChatSettingsMenu",{"ChatSettingsMenu--copied":this.state.copied}),C=h.isMassMentionsMessageAllowed,y=H(c?"mail_get_invite_link_copy_with_history":"mail_get_invite_link_copy_without_history");return a.createElement("div",{className:"ChatSettings__pane"},g&&a.createElement(L.a,{className:f},a.createElement(P.default,{onClick:e=>nav.go(d.owner.link,e),chevron:!0,className:"ChatSettingsMenu__owner"},a.createElement(x.a,{size:"28",title:d.owner.title,photo:d.owner.photo,href:d.owner.link,description:d.owner.description}))),a.createElement(L.a,{className:f},a.createElement(P.default,{onClick:this.props.showAttachments,chevron:!0},a.createElement(A.a,{type:"attach",backgroundColor:"blue"}),H("mail_im_show_media_history"))),a.createElement(L.a,{className:f},C&&a.createElement(a.Fragment,null,a.createElement(P.default,{selectable:!1,chevron:!1,aside:a.createElement(a.Fragment,null,a.createElement(k.default,{shown:i,callback:o},H("global_changes_saved_short")),a.createElement(U.default,{className:"ChatSettingsMenu__select",onChange:this.onMentionSettingsChange,options:[{label:H("mail_settings_mentions_all"),value:0},{label:H("mail_settings_mentions_except"),value:1},{label:H("mail_settings_mentions_disable"),value:2}],value:this.state.mentions_push_disabled}))},a.createElement(A.a,{type:"mention",backgroundColor:"blue"}),H("mail_settings_mentions")),a.createElement(P.default,{selectable:!1,aside:a.createElement(a.Fragment,null,a.createElement(k.default,{shown:n,callback:o},H("global_changes_saved_short")),a.createElement(U.default,{className:"ChatSettingsMenu__select",onChange:this.onDisabledSettingsChange,options:this.getDisabledOptions(),placeholder:this.state.disabledPlaceholder}))},a.createElement(A.a,{type:"notice",backgroundColor:"red"}),H("mail_settings_notices"))),(u||S)&&a.createElement(a.Fragment,null,u&&a.createElement(P.default,{onClick:this.onShowInviteLink,chevron:Object(b.u)(t)},a.createElement(A.a,{type:"link",backgroundColor:"green"}),H(m?"mail_vkcomgroup_invite_link":"mail_chat_invite_link"),v&&a.createElement("span",{className:"ChatSettingsMenu__invite"},a.createElement("span",{className:"ChatSettingsMenu__hidden"},a.createElement("input",{type:"text",readOnly:!0,value:v,ref:this.getHiddenInput})),a.createElement(k.default,{className:"ChatSettingsMenu__copied",shown:this.state.copied,callback:this.onBlinkTextHide},H("mail_invite_link_copied")),a.createElement(E.a,{className:"ChatSettingsMenu__copy",onClick:this.onCopyInviteLink},y))),S&&a.createElement(P.default,{onClick:this.props.showSettings,chevron:!0,aside:a.createElement(k.default,{shown:s,callback:o},H("global_changes_saved"))},a.createElement(A.a,{type:"gear",backgroundColor:"gray"}),H("mail_settings_options")))))}}s("OG14"),s("Vd3H");var F=s("rudk"),B=s("RlRI"),q=s("yuXj"),Q=s("zjLC"),X=s("kxld");var z=c.a.getLang;class G extends a.Component{constructor(){super(...arguments),this.toggleAdmin=()=>{var e=this.props,t=e.store,s=e.mid,i=e.adminMap,a=t.get().peer,n=!i[s];t.set(o.Uc.bind(null,a,s,n)),t.set(o.Tc.bind(null,a,s,n))},this.kick=()=>{var e=this.props.store,t=e.get().peer,s=this.props.mid;e.set(e=>function(e,t,s){var i=Object(X.e)(e,t);return!i||Object(F.c)(t)?Promise.reject("No chat info"):(i.memberIds=i.memberIds.filter((function(e){return e!==s})),i.adminIds=i.adminIds.filter((function(e){return e!==s})),i.membersCount=i.memberIds.length,Promise.resolve(e))}(e,t,s)),e.set(e=>Object(Q.d)(e,t,s)).catch(e=>{Object(v.a)("ChatSettingsMemberEdit.kick",e)})},this.cancelMessageRequest=()=>{var e=this.props.store,t=e.get().peer,s=this.props.mid;e.set(e=>Object(Q.b)(e,t,s)).catch(e=>{Object(v.a)("ChatSettingsMemberEdit.cancel",e)})},this.changeAccess=e=>{var t=this.props.store,s=t.get().peer,i=this.props.mid;t.set(o.p.bind(null,s,i,!e)).catch(e=>{Object(v.a)("ChatSettingsMemberEdit.changeAccess",e)})}}getMemberRole(e,t){var s=this.props.storeData,i=s.peer;return t===s.tabs[i].ownerId?z("mail_settings_owner"):e[t]?z("mail_settings_admin"):null}getActions(e){var t=this.props,s=t.store,i=t.mid,a=Object(h.s)(s),n=a.id,r=a.peer,o=n===i,l=[],c=Object(R.D)(s,r);if(o)return c&&Object(R.E)(s)?[]:[{text:z("mail_leave_chat"),onClick:this.props.onLeave}];if(Object(b.t)(s,i)&&l.push({text:e[i]?z("mail_chat_remove_admin"):z("mail_settings_appoint_admin"),onClick:this.toggleAdmin}),Object(b.y)(s,i)&&l.push({text:z("mail_settings_kick"),onClick:this.kick}),Object(R.F)(i)&&!e[i]){var d=Object(b.B)(s,s.get().peer,i),m=d?"mail_settings_community_mentions_only":"mail_settings_community_full_access";l.push({text:z(m),onClick:this.changeAccess.bind(this,d)})}return l}render(){var e=this.props,t=e.adminMap,s=e.storeData,i=e.mid,n=e.isMR,r=s.id,o=!!t[r],l=this.getMemberRole(t,i),c=r===i,h=o&&this.getActions(t);return n?a.createElement(g.default,{text:z("mail_cancel_invitation"),position:"t",align:"right"},a.createElement("span",{onClick:this.cancelMessageRequest,className:"ChatSettingsMembersEdit__kick"})):a.createElement(a.Fragment,null,l&&a.createElement("span",{className:"ChatSettingsMembersEdit__role"},l),h&&h.length>0&&a.createElement(q.a,{position:"b",align:"right",trigger:"hover",marginTop:-8,marginLeft:1,data:this.getActions(t)},a.createElement("span",{className:"ChatSettingsMembersEdit__actions"})),!o&&!c&&Object(b.y)(s,i)&&a.createElement(g.default,{text:z("mail_settings_kick"),position:"t",align:"right"},a.createElement("span",{onClick:this.kick,className:"ChatSettingsMembersEdit__kick"})),!o&&c&&a.createElement(g.default,{text:z("mail_leave_chat"),position:"t",align:"right"},a.createElement("span",{onClick:this.props.onLeave,className:"ChatSettingsMembersEdit__kick"})))}}var K=s("Aegd"),V={appendParentCls:"ChatSettingsWrapper"},Z=c.a.getLang,$={all:"allShowMore",admins:"adminsShowMore",invitedByMRShowMore:"invitedByMRShowMore"};class J extends a.Component{constructor(e){super(e),this.onToggleSearch=()=>{this.state.showSearch?this.setState({showSearch:!1,searchQuery:""}):(this.setState({showSearch:!0}),requestAnimationFrame(()=>{this.searchInput.focus()}))},this.onSearchChange=e=>{e.target.value!==this.state.searchQuery&&this.setState({searchQuery:e.target.value})},this.onShowMore=()=>{var e=$[this.state.current];this.state[e]&&this.setState({[e]:!1})},this.onTabClick=(e,t)=>{e.preventDefault(),this.state.current!==t&&this.setState({current:t})},this.handleDocumentClick=e=>{!this.state.showSearch||this.state.searchQuery||e.target.closest(".ChatSettingsMembersWidget__search")||e.target.closest(".ChatSettingsMembersWidget__searchIcon")||this.setState({showSearch:!1})},this.onKeydown=e=>{this.state.showSearch&&27===e.keyCode&&(this.searchInput.blur(),this.setState({showSearch:!1,searchQuery:""}),e.preventDefault(),e.stopPropagation())},this.getInviter=e=>{if(this.invitersCache[e])return this.invitersCache[e];var t=this.props.store.get(),s=t.peer,i=t.tabs[s],a=i.inviters;if(!a[e])return"";var n=Object(r.nb)(t,[a[e][0]])[0],o=getSmDate(a[e][2],t.timeshift,!0);if(Object(b.G)(i,e))return this.invitersCache[e]=Z("mail_settings_owner"),Z("mail_settings_owner");if(!n)return this.invitersCache[e]=o,o;var l=langSex(a[e][1],Z("mail_chat_member_invited_by_X","raw")).replace(/{inviter}/,replaceEntities(n.name))+" "+o;return this.invitersCache[e]=l,l},this.isAddMemberWidgetShown=()=>{var e=this.props.store,t=Object(h.s)(e),s=t.id,i=t.peer,a=this.state,n=a.current,r=a.showSearch,o=a.searchQuery;return"all"===n&&!(r&&""!==o)&&Object(b.x)(e,i,s)},this.getCommunityDescriptionText=e=>Z(e?"mail_settings_community":"mail_settings_bot"),this.getMemberDescriptionText=(e,t,s)=>{var i=t.tabs[t.peer];if(Object(r.Ob)(e.id))return this.getCommunityDescriptionText(e.id===i.ownerId);if(s)return Object(r.ub)(e.date,t.timeshift);var a=i.membersLastSeen;return a&&a[e.id]?Object(r.sb)(t,e.id,a[e.id],V):void 0},this.searchInputRef=e=>{this.searchInput=e};var t=e.store.get(),s=this.getMembers(t),i=this.getAdmins(t),a=this.getInvitedByMessageRequests(t);this.state={showSearch:!1,searchQuery:"",current:"all",all:s,allShowMore:s.length>50,admins:i,adminsShowMore:i.length>50,invitedByMR:a,invitedByMRShowMore:a.length>50},this.membersMap=s.reduce((e,t)=>(e[t]=!0,e),{}),this.searchIndexPromise=this.getSearchIndex(s).then(e=>{this.searchIndex=e}),this.invitersCache={}}componentWillReceiveProps(e){var t=e.store.get(),s=this.getMembers(t),i=this.getAdmins(t),a=this.getInvitedByMessageRequests(t),n={removes:[],additions:[]},r=s.reduce((e,t)=>(e[t]=!0,e),{});s.forEach(e=>{this.membersMap[e]||n.additions.push(e)}),Object.keys(this.membersMap).forEach(e=>{r[e]||n.removes.push(e)}),(n.removes.length||n.additions.length)&&(this.updateSearchIndex(t,n),this.membersMap=r);var o={all:s,allShowMore:this.state.allShowMore&&s.length>50,admins:i,adminsShowMore:this.state.adminsShowMore&&i.length>50,invitedByMR:a,invitedByMRShowMore:this.state.invitedByMRShowMore&&a.length>50};o.current=o[this.state.current].length>0?this.state.current:"all",this.setState(o)}getMembers(e){var t=e.peer,s=e.tabs[t],i=-1!==(s.memberIds||[]).indexOf(s.ownerId),a=(s.adminIds||[]).reduce((e,t)=>(e[t]=!0,e),{});return(i?[s.ownerId]:[]).concat((s.adminIds||[]).filter(e=>e!==s.ownerId),(s.memberIds||[]).filter(e=>e!==s.ownerId&&!a[e]))}getAdmins(e){var t=e.peer,s=e.tabs[t];return(-1!==(s.memberIds||[]).indexOf(s.ownerId)?[s.ownerId]:[]).concat((s.adminIds||[]).filter(e=>e!==s.ownerId))}getInvitedByMessageRequests(e){var t=e.peer;return e.tabs[t].invitedByMessageRequest.sort((function(e,t){return e.date-t.date}))}getCurrentList(){var e=this.props.store,t=this.state,s=t.current,i=t.showSearch,a=t.searchQuery,n=t.invitedByMR;if(i&&a&&this.searchIndex){var o=n.filter(e=>!!e.name.toLowerCase().trim().split(/\s+/).find(e=>0===e.indexOf(a.toLowerCase())));return this.searchIndex.search(a).concat(o)}var l=this.state[s],c="invitedByMR"===s?l:Object(r.nb)(e.get(),l);return this.state[s+"ShowMore"]?c.slice(0,50):c}getSearchIndex(e){var t=window.vkIndexer,s=Object(r.nb)(this.props.store.get(),e);return this.membersMap=s.reduce((e,t)=>(e[t.id]=!0,e),{}),new Promise((e,i)=>{var a=new t(s,e=>e.name,()=>{e(a)})})}updateSearchIndex(e,t){var s=Object(r.nb)(e,t.removes),i=Object(r.nb)(e,t.additions);(this.searchIndex?Promise.resolve(this.searchIndex):this.searchIndexPromise).then(e=>{s.forEach(t=>{e.remove(t)}),i.forEach(t=>{e.add(t)})})}componentDidMount(){this.searchInput.addEventListener("keydown",this.onKeydown)}componentWillUnmount(){this.searchInput.removeEventListener("keydown",this.onKeydown)}render(){var e=this.props,t=e.store,s=e.membersCount,i=e.membersAdded,n=e.onHideStatus,o=this.state,l=o.current,c=o.showSearch,h=o.searchQuery,d=o.admins,m=o.invitedByMR,g=t.get(),u=g.peer,_=g.tabs[u],b=this.getCurrentList(),v=this.isAddMemberWidgetShown()?["add"].concat(b):b,S=this.state[$[l]],f={"ChatSettingsMembersWidget--search":!!c},C=_.adminIds.reduce((e,t)=>(e[t]=!0,e),{});return a.createElement("div",{className:Object(p.a)("ChatSettingsMembersWidget",f)},a.createElement("header",{className:"ChatSettingsMembersWidget__header"},a.createElement("input",{placeholder:Z("mail_members_search"),className:"ChatSettingsMembersWidget__search",onChange:this.onSearchChange,onInput:this.onSearchChange,onPaste:this.onSearchChange,value:this.state.searchQuery,ref:this.searchInputRef}),a.createElement("button",{className:"ChatSettingsMembersWidget__searchIcon",onClick:this.onToggleSearch}),a.createElement(B.default,{className:"ChatSettingsMembersWidget__tabs",onTabClick:this.onTabClick},a.createElement("span",{key:"all"},Z("mail_settings_everyone")+" ",a.createElement("span",{className:"Tabs__desc"},Object(r.ib)(_))),d.length>0&&a.createElement("span",{key:"admins"},Z("mail_settings_admins")+" ",a.createElement("span",{className:"Tabs__desc"},d.length)),m.length>0&&a.createElement("span",{key:"invitedByMR"},Z("mail_invited_members")+" ",a.createElement("span",{className:"Tabs__desc"},m.length)))),a.createElement("div",{className:"ChatSettingsMembersWidget__list"},a.createElement(L.a,{border:!1},v.length>0&&v.map(e=>{if("add"===e)return a.createElement(P.default,{selectable:!1,border:!1,key:"add",onClick:this.props.showMembersSettings,aside:a.createElement(k.default,{className:"ChatSettingsMembersWidget__blink",shown:i,callback:n},langNumeric(s||0,Z("mail_settings_members_added","raw")))},a.createElement("span",{className:"ChatSettingsMembersWidget__add"},a.createElement("span",null,Z("mail_settings_add_members"))));var o=this.getInviter(e.id),c="invitedByMR"===l,h=e.image_status?e.name+`<span class="ChatSettingsMembersWidget__imageStatus">${e.image_status}</span>`:e.name,d=this.getMemberDescriptionText(e,g,c);return a.createElement(P.default,{selectable:!1,border:!1,aside:a.createElement(G,{adminMap:C,store:t,storeData:g,mid:e.id,onLeave:this.props.onLeave,isMR:c}),key:e.id},a.createElement(x.a,{photo:Object(F.e)(e.id)?a.createElement(K.a,{id:u,text:Object(r.Ab)(e.name),size:"xxxs",specificType:7}):e.photo,title:h,description:a.createElement("span",{title:o,dangerouslySetInnerHTML:{__html:d}}),href:e.link}))}),!v.length&&c&&h&&a.createElement("div",{className:"ChatSettingsMembersWidget__empty"},Z("mail_settings_not_found")),!(c&&h)&&S&&a.createElement("div",{className:"ChatSettingsMembersWidget__more",onClick:this.onShowMore},Z("mail_settings_show_all_members")))))}}var Y=s("F0+T"),ee=s("wQFj"),te=s("EasH"),se=s("DM26"),ie=c.a.getLang,ae=()=>{};class ne extends a.Component{constructor(e){super(e),this.onChange=e=>{var t=this.props.store.get(),s=e.target.value;Object(o.sc)(s,t).then(e=>(this.setSearchResults({},!1,s,e),s?(this.isSearching=!0,this.serverSearch(s,e.map(e=>e.peerId))):Promise.resolve([]))).then(this.appendSearchResults).catch(()=>{})},this.serverSearch=Object(se.b)((e,t)=>{var s=this.props.store;return Object(o.pc)(e,t,"friends",s.get())},300),this.onRemoveToken=e=>new Promise(t=>{var s=this.state.selected.filter(t=>t!==e);this.selected=s.reduce((e,t)=>(e[t]=!0,e),{}),this.setState({selected:s},t)}),this.onSelect=e=>new Promise(t=>{var s=this.selected[e]?this.state.selected.filter(t=>t!==e):[].concat(this.state.selected,e).filter((e,t,s)=>s.indexOf(e)===t);this.selected=s.reduce((e,t)=>(e[t]=!0,e),{}),this.resetSearch({selected:s,value:""},t)}),this.onShowHistoryToggle=()=>{this.setState({isShowHistoryChecked:!this.state.isShowHistoryChecked})},this.onAddPeople=()=>{var e=this.props.store,t=e.get().peer,s=this.state.selected.map(e=>parseInt(e)),i=this.state.isShowHistoryChecked;this.setState({loading:!0}),e.set(o.k.bind(null,t,s,i)).then(()=>e.set(o.N.bind(null,t)).then(()=>{this.selected={},this.resetSearch({selected:[],loading:!1},()=>{this.props.afterSave(s.length)})})).catch(e=>{this.selected={},this.resetSearch({selected:[],loading:!1}),Object(te.d)(ie("global_error"),e)})},this.setSearchResults=(e,t,s,i)=>{var a=this.props.store.get(),n=Object(R.s)(a,a.peer),r=[];i.forEach(e=>{this.data[e.peerId]||(this.data[e.peerId]=e),-1===n.memberIds.indexOf(e.peerId)&&r.push(e.peerId)}),this.setState(Object.assign({},e,{found:r,value:s}),t||ae)},this.appendSearchResults=e=>{var t=this.props.store.get(),s=Object(R.s)(t,t.peer),i=this.state.found;e.forEach(e=>{this.data[e.peerId]||(this.data[e.peerId]=e),-1===s.memberIds.indexOf(e.peerId)&&-1===i.indexOf(e.peerId)&&i.push(e.peerId)}),this.isSearching=!1,this.setState({found:i})},this.state={selected:[],value:"",loading:!1,found:[],isShowHistoryChecked:!0},this.data={},this.selected={}}resetSearch(e,t){return Object(o.sc)("",this.props.store.get()).then(this.setSearchResults.bind(this,e,t,""))}componentDidMount(){this.resetSearch()}render(){var e=Object.keys(this.state.selected).length;return a.createElement("div",{className:"ChatSettingsMembers"},a.createElement(Y.a,{className:"ChatSettingsMembers__multiSelect",tokens:this.state.selected.map(e=>({text:unclean(this.data[e].name),id:e})),removeTokenPlaceholder:ie("mail_create_chat_remove_user"),onRemoveToken:this.onRemoveToken,placeholder:ie("mail_search_creation"),value:this.state.value,onChange:this.onChange,onSelect:this.onSelect,useInfiniteScroll:!1,hasMore:!1,virtualized:!1,loadMore:()=>{},notFoundText:ie("mail_not_found"),autoFocus:!0,isSearching:this.isSearching},this.state.found.map(e=>a.createElement("div",{className:Object(p.a)("ChatSettingsMembers__entity",{"ChatSettingsMembers__entity--selected":this.selected[e]}),key:e,"data-id":e},a.createElement(x.a,{size:"34",title:this.data[e].name,photo:this.data[e].photo})))),a.createElement(M.a,{alignment:"right",className:"ChatSettingsMembers__submitArea"},a.createElement(ee.default,{checked:this.state.isShowHistoryChecked,onChange:this.onShowHistoryToggle,className:"ChatSettingsMembers__showHistory"},ie("mail_im_chat_add_members_show_history")),a.createElement(O.default,{disabled:0===e,onClick:this.onAddPeople,loading:this.state.loading,className:"ChatSettingsMembers__confirm"},ie(e<2?"mail_append_chat":"mail_im_create_chat_with"))))}}var re=s("iukX"),oe=s("ftTi");function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var s=[],i=!0,a=!1,n=void 0;try{for(var r,o=e[Symbol.iterator]();!(i=(r=o.next()).done)&&(s.push(r.value),!t||s.length!==t);i=!0);}catch(e){a=!0,n=e}finally{try{i||null==o.return||o.return()}finally{if(a)throw n}}return s}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ce(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(s);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}var he,de=c.a.getLang;class me extends a.Component{constructor(e){super(e),this.showInvitationLink=()=>{var e=this.props.store,t=Object(h.s)(e),s=t.peer;return this.setState({invitationLoading:!0}),Object(o.P)(s-2e9,t).then(e=>{var t=le(e,1)[0];this.setState({section:2,invitationLoading:!1,invitationLinks:t})})},this.onUpdateNotificationSettings=(e,t)=>{var s=this.props,i=s.store,a=s.parentMutations,n=i.get().peer;return i.set(o.bd.bind(null,n,e,t)).then(a().updateState.bind(null,n))},this.onUpdateMentionNotificationSettings=e=>{var t=this.props,s=t.store,i=t.parentMutations,a=s.get().peer;return s.set(o.ad.bind(null,a,e)).then(i().updateState.bind(null,a))},this.onUpdateFlags=e=>{var t=this.props.store.get(),s=t.peer,i=t.hasOwnProperty("onUpdateFlags")?t.onUpdateFlags.bind(null,s,e):e=>Promise.resolve(e);return Object(o.md)(s,e,t).then(i)},this.afterFlagsUpdated=()=>{this.go(0,()=>this.setBlinkStatus({flagsUpdated:!0}))},this.afterMembersAdded=e=>{this.go(0,()=>this.setBlinkStatus({membersAdded:!0,membersCount:e}))},this.afterNotificationSettingsUpdated=()=>{this.setBlinkStatus({notificationSettingsUpdated:!0})},this.afterDisableUntilUpdated=()=>{this.setBlinkStatus({disableUntilUpdated:!0})},this.setBlinkStatus=e=>{this.timers.push(setTimeout(()=>this.setState(e),300))},this.onHideStatus=()=>{this.setState({membersAdded:!1,flagsUpdated:!1,notificationSettingsUpdated:!1,disableUntilUpdated:!1})},this.onLeave=()=>{var e=this.props,t=e.store,s=e.closePopup,i=t.get().peer,a=Object(r.Tb)(t,i),n=Object(te.d)({title:de(a?"mail_leave_channel":"mail_chat_leave_title"),dark:1},de(a?"mail_vkcomgroup_leave_confirm":"mail_chat_leave_confirm"),de(a?"mail_leave_channel":"mail_leave_chat"),(function(){t.set(o.ed.bind(null,i)),t.set(o.eb.bind(null,i)),n.hide(),s(),t.get().longpoll.push([Object(l.g)()])}),de("global_cancel"),(function(){n.hide()}))},this.onChatClose=()=>{var e=this.props,t=e.store,s=e.closePopup,i=t.get().peer,a=Object(R.s)(t,i).data.flags,n=a&b.b?a&~b.b:a|b.b,o=Object(te.d)({title:de("global_warning"),dark:1},de("mail_chat_close_confirm"),de("mail_close_chat"),()=>{this.onUpdateFlags(n).then(()=>{o.hide(),s(),Object(r.Nb)(t)||t.get().longpoll.push([Object(l.g)()])})},de("global_cancel"),(function(){o.hide()}))},this.onChatRestore=()=>{var e=this.props,t=e.store,s=e.closePopup,i=t.get().peer,a=Object(R.s)(t,i).data.flags,n=a&b.b?a&~b.b:a|b.b;this.onUpdateFlags(n).then(s)},this.onResetLink=()=>{var e=this.props.store,t=Object(h.s)(e),s=t.peer;return Object(o.ec)(s,t).then(e=>{var t=le(e,1)[0];this.setState({invitationLinksReseted:!0,invitationLinks:t})})},this.onShowAttachments=()=>{var e=Object(oe.e)(this.props.store);this.props.closePopup(),window.showWiki({w:"history"+Object(r.ab)(e)+"_photo"},null,{})},this.onLinkHistoryOptionToggle=()=>{var e=Object(oe.e)(this.props.store);this.setState(e=>({isInvitationLinkWithHistory:!e.isInvitationLinkWithHistory}),()=>{this.props.updateHistoryLinkState(e,this.state.isInvitationLinkWithHistory)})},this.state={section:0,invitationLinks:null,invitationLinksReseted:!1,isInvitationLinkWithHistory:this.props.isLinkWithHistorySelected,membersAdded:!1,flagsUpdated:!1,notificationSettingsUpdated:!1,disableUntilUpdated:!1},this.timers=[]}go(e,t){this.setState({section:e},()=>{this.props.updatePopup(),t&&t()})}getPopupTitle(){switch(this.state.section){case 1:return de("mail_settings_add_members");case 2:case 3:return de("mail_chat_invite_link");case 6:return de("mail_settings_options");default:return de("mail_settings_title")}}componentWillReceiveProps(e){var t=e.store.get(),s=t.peer,i=t.tabs[s];i.photoLarge||i.photoGrid||this.resync||(this.resync=!0,e.store.set(o.N.bind(null,s)).then(()=>{this.resync=!0}))}componentDidMount(){this.props.updatePopup()}componentWillUnmount(){this.timers.forEach(clearTimeout)}render(){var e=this.props,t=e.store,s=e.closePopup,i=t.get(),n=i.peer,o=i.tabs[n],l=Object(r.Tb)(t,n),c=Object(R.x)(t,n),h=Object(R.D)(t,n),p=!l&&!h||!t.get().gid,g=Object(b.w)(t,n,i.id),u=Object(X.l)(o),_=i.isChatTypeEditAllowed,v=de(l?"mail_im_n_vkcomgroup_members":"mail_im_n_chat_members",Object(r.ib)(o));return a.createElement("section",{className:"ChatSettings"},a.createElement(d.a,{title:this.getPopupTitle(),back:0!==this.state.section?de("global_back"):void 0,onCloseClick:s,onBackClick:()=>this.go(0)}),0===this.state.section&&a.createElement("div",{className:"ChatSettings__content"},a.createElement(f,{store:t,photo:o.photoLarge,grid:o.photoGrid,title:o.name,flags:o.data.flags,isDefaultPhotoOwner:o.isDefaultPhotoOwner,isCasper:c,meta:v,description:""}),a.createElement(D,{store:t,showMembersSettings:()=>this.go(1),showAttachments:this.onShowAttachments,showInvitationLink:this.showInvitationLink,isInvitationLinkWithHistory:this.state.isInvitationLinkWithHistory,invitationLinks:this.state.invitationLinks,showSettings:()=>this.go(6),notificationSettingsUpdated:this.state.notificationSettingsUpdated,disableUntilUpdated:this.state.disableUntilUpdated,flagsUpdated:this.state.flagsUpdated,onHideStatus:this.onHideStatus,onUpdateNotificationSettings:this.onUpdateNotificationSettings,onUpdateMentionNotificationSettings:this.onUpdateMentionNotificationSettings,afterNotificationSettingsUpdated:this.afterNotificationSettingsUpdated,afterDisableUntilUpdated:this.afterDisableUntilUpdated}),l?null:a.createElement("div",{className:"ChatSettings__pane"},a.createElement(J,{store:t,onLeave:this.onLeave,showMembersSettings:()=>this.go(1),membersAdded:this.state.membersAdded,onHideStatus:this.onHideStatus,membersCount:this.state.membersCount})),p&&a.createElement("div",{className:"ChatSettings__pane"},a.createElement(m.a,{appearance:["link","mobile"],className:"ChatSettings__criticalAction ChatSettings__leave",onClick:this.onLeave},de(l?"mail_leave_channel":"mail_settings_leave"))),g&&!u&&a.createElement("div",{className:"ChatSettings__pane"},a.createElement(m.a,{appearance:["link","mobile"],className:"ChatSettings__criticalAction ChatSettings__close",onClick:this.onChatClose},de("mail_settings_close"))),g&&u&&a.createElement("div",{className:"ChatSettings__pane"},a.createElement(m.a,{appearance:["link","mobile"],className:"ChatSettings__criticalAction ChatSettings__restore",onClick:this.onChatRestore},de("mail_settings_restore")))),1===this.state.section&&a.createElement(ne,{store:t,afterSave:this.afterMembersAdded}),6===this.state.section&&a.createElement(re.a,{isChatTypeEditAllowed:_,flags:o.data.flags,isCasperChatTab:c,isCommunityChat:h,allowedUpdateFlags:o.allowedUpdateFlags,back:()=>this.go(0),onSave:this.onUpdateFlags,afterSave:this.afterFlagsUpdated}),2===this.state.section&&a.createElement(I,{store:t,onReset:()=>this.go(3),onLinkHistoryOptionToggle:this.onLinkHistoryOptionToggle,reseted:this.state.invitationLinksReseted,isInvitationLinkWithHistory:this.state.isInvitationLinkWithHistory,invitationLinks:this.state.invitationLinks}),3===this.state.section&&a.createElement(N,{onConfirm:this.onResetLink,onCancel:()=>this.go(2)}))}}function pe(e,t){var s=ls.get("im_chats_no_invite_link_history")||[],i=e-2e9,a=t?s.filter(e=>e!==i):s.concat(i);ls.set("im_chats_no_invite_link_history",a)}function ge(e,t){var s=be(),i=function(e){var t=Object(oe.e)(e)-2e9;return!(ls.get("im_chats_no_invite_link_history")||[]).includes(t)}(e);s&&n.render(a.createElement(me,{store:e,closePopup:ue.bind(null,e),updatePopup:_e,isLinkWithHistorySelected:i,updateHistoryLinkState:pe,parentMutations:t}),s)}function ue(e){he&&he.hide();var t=e.get();t.hasOwnProperty("onClose")&&t.onClose()}function _e(){he&&he.updateBoxCoords()}function be(){return document.querySelector("#ChatSettings")}function ve(e){var t=document.querySelector("#box_layer_wrap"),s=document.querySelector("#box_loader"),a=isVisible(t);return{unmount(){var t=be();t&&n.unmountComponentAtNode(t),Object(i.c)(e)},showLoader(){boxRefreshCoords(s),show(s),a||show(t)},hideLoader(){hide(s),a||hide(t)}}}function Se(e,t,s){var a=Object(i.b)(ve).bindMutations,n=t.get(),r=Object(i.a)({handlers:(e,t)=>{}}),l=n.peer,c=a(r);var d=function(e,t){t.get().peer===l?function(e,t){var s=Object(R.s)(e,e.get().peer);s&&s.data&&Object(R.A)(s)?ge(e,t):ue(e)}(t,s):e.unmount()}.bind(null,c),m={hideButtons:!0,bodyStyle:"padding: 0; background: none;",width:560,onShow(){ge(t,s),t.subscribe(d),requestAnimationFrame(()=>he.updateBoxCoords())},onHideAttempt:()=>(t.unsubscribe(d),c.unmount(),!0)};return c.showLoader(),t.set(o.N.bind(null,l)).then(e=>{c.hideLoader();var t=Object(h.s)(e).peer;t&&t===l?he=new MessageBox(m).content('<div id="ChatSettings" class="ChatSettingsWrapper"></div>').show():c.unmount()}),c}},iukX:function(e,t,s){"use strict";s.d(t,"a",(function(){return v}));s("OEbY");var i=s("q1tI"),a=s("6krn"),n=s("p9ed"),r=s("5R8M"),o=s("hN/p"),l=s("BiHW"),c=s("WfnU"),h=s("0MTP"),d=s("/cSr"),m=(s("17x9"),s("ZxpX")),p=149946368,g=0;class u extends i.Component{constructor(e){super(e),this.selectPreset=(e,t)=>{var s=3===this.state.selectedPresetId&&null!==this.state.customFlags;this.setState(e=>({selectedPresetId:t,customFlags:s?this.props.flags:e.customFlags})),this.props.onSelectPreset(e)};var t=this.props.flags===p?2:this.props.flags===g?1:3;this.state={customFlags:3===t?this.props.flags:null,selectedPresetId:t}}componentWillReceiveProps(e){![g,p].includes(e.flags)&&this.setState({customFlags:e.flags,selectedPresetId:3})}render(){var e=this.state.customFlags?this.state.customFlags:this.props.flags,t=this.state.selectedPresetId,s=[{id:1,title:Object(a.b)("mail_chat_creation_preset_regular"),icon:"regular",flags:g},{id:2,title:Object(a.b)("mail_chat_creation_preset_closed"),icon:"closed",flags:p},{id:3,title:Object(a.b)("mail_chat_creation_preset_custom"),icon:"custom",flags:e}];return i.createElement("div",{className:"ChatSettingsPresetPanel"},s.map((e,s)=>i.createElement("div",{className:Object(m.a)("ChatSettingsPresetPanel__preset",{"ChatSettingsPresetPanel__preset--selected":e.id===t}),onClick:this.selectPreset.bind(null,e.flags,e.id),key:s},i.createElement("div",{className:Object(m.a)("ChatSettingsPresetPanel__presetIcon","ChatSettingsPresetPanel__presetIcon--"+e.icon)}),i.createElement("div",{className:"ChatSettingsPresetPanel__presetTitle"},e.title))))}}var _=s("sp2a"),b=a.a.getLang;class v extends i.Component{constructor(e){super(e),this.onChange=e=>{var t=e.name,s=e.selected.value;this.setState(e=>({flags:s?e.flags&~t^s:e.flags&~t}))},this.onCancel=()=>{this.setState({flags:this.props.flags}),this.props.back()},this.onSave=()=>{this.state.loading||(this.setState({loading:!0}),this.props.onSave(this.state.flags).then(()=>{this.setState({loading:!1},this.props.afterSave)}).catch(e=>{this.setState({loading:!1,flags:this.props.flags})}))},this.setFlags=e=>{this.setState({flags:e})},this.isAllowed=e=>{var t=this.props.allowedUpdateFlags;return!t||t.includes(e)},this.state={flags:e.flags,loading:!1}}render(){var e=this.state.flags,t=this.props,s=t.isChatTypeEditAllowed,a=t.isCasperChatTab,m=t.isCommunityChat,p=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return[!m&&{value:e,label:b("mail_settings_only_owner")},{value:t,label:b(m?"mail_settings_only_admins":"mail_settings_owner_and_admins")},{value:s,label:b("mail_settings_all_members")}].filter(Boolean)};return i.createElement("div",{className:"ChatSettingsOptions"},this.props.isChatCreation&&i.createElement(u,{flags:e,onSelectPreset:this.setFlags}),i.createElement(n.a,null,(this.isAllowed(_.i)||this.isAllowed(_.o))&&i.createElement(r.default,{selectable:!1,aside:i.createElement(o.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:_.o+_.i,options:p(_.o,_.i),value:e&(_.o|_.i)})},i.createElement(d.a,{type:"plus",backgroundColor:"green"}),b("mail_settings_can_invite")),(this.isAllowed(_.h)||this.isAllowed(_.n))&&i.createElement(r.default,{selectable:!1,aside:i.createElement(o.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:_.n+_.h,options:p(_.n,_.h),value:e&(_.n|_.h)})},i.createElement(d.a,{type:"pencil",backgroundColor:"blue"}),b("mail_settings_can_edit_info")),(this.isAllowed(_.k)||this.isAllowed(_.k))&&!a&&i.createElement(r.default,{selectable:!1,aside:i.createElement(o.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:_.q+_.k,options:p(_.q,_.k),value:e&(_.q|_.k)})},i.createElement(d.a,{type:"pin",backgroundColor:"blue"}),b("mail_settings_can_pin")),(this.isAllowed(_.j)||this.isAllowed(_.p))&&i.createElement(r.default,{selectable:!1,aside:i.createElement(o.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:_.p+_.j,options:p(_.p,_.j),value:e&(_.p|_.j)})},i.createElement(d.a,{type:"mention",backgroundColor:"blue"}),b("mail_settings_can_use_mass_mention")),(this.isAllowed(_.l)||this.isAllowed(_.r))&&i.createElement(r.default,{selectable:!1,aside:i.createElement(o.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:_.r+_.l,options:p(0,_.l,_.r),value:e&(_.r|_.l)})},i.createElement(d.a,{type:"link",backgroundColor:"blue"}),b("mail_settings_can_see_invitation_link")),(this.isAllowed(_.g)||this.isAllowed(_.m))&&i.createElement(r.default,{selectable:!1,aside:i.createElement(o.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:_.m+_.g,options:p(_.m,_.g),value:e&(_.m|_.g)})},i.createElement(d.a,{type:"call",backgroundColor:"green"}),b("mail_settings_can_start_group_call")),this.isAllowed(_.a)&&i.createElement(r.default,{selectable:!1,aside:i.createElement(o.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:_.a,options:[{value:0,label:b("mail_settings_only_owner")},{value:_.a,label:b("mail_settings_owner_and_admins")}],value:e&_.a})},i.createElement(d.a,{type:"user",backgroundColor:"green"}),b("mail_settings_admins_can_add_admins")),this.isAllowed(_.s)&&s&&i.createElement(r.default,{selectable:!1,aside:i.createElement(o.default,{className:"ChatSettingsOptions__select",onChange:this.onChange,name:_.s,options:[{value:0,label:b("mail_settings_service_simple")},{value:_.s,label:b("mail_settings_service_service")}],value:e&_.s})},i.createElement(d.a,{type:"gear",backgroundColor:"gray"}),b("mail_settings_service"))),i.createElement(h.a,{alignment:"right",className:"ChatSettingsOptions__submitArena"},i.createElement(l.a,{appearance:"tertiary",onClick:this.onCancel},b("global_cancel")),i.createElement(c.default,{onClick:this.onSave,loading:this.state.loading},b("global_save"))))}}}}]);try{stManager.done("cmodules/bundles/902866c362380432bb8fab2a5e67d693.e0f4751557fefdb0fb00.js")}catch(e){}