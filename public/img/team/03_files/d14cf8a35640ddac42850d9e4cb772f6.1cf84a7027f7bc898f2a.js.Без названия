(window.webpackJsonp=window.webpackJsonp||[]).push([["d14cf8a35640ddac42850d9e4cb772f6"],{"2vnv":function(e,n,r){"use strict";r.d(n,"b",(function(){return w})),r.d(n,"i",(function(){return b})),r.d(n,"g",(function(){return E})),r.d(n,"e",(function(){return g})),r.d(n,"d",(function(){return R})),r.d(n,"c",(function(){return p})),r.d(n,"h",(function(){return h})),r.d(n,"f",(function(){return T})),r.d(n,"a",(function(){return S}));var o,t=r("zxIV"),i=r("Egk5"),c=r("EasH"),d=r("v+DW"),u=r("Xrg9"),a=r("t7n3"),s=r("D1OX"),f=r("3oLO"),_=r("4+be"),l=r("kcIO"),m=r("jE6c");!function(e){e[e.DELETED_USER=-5]="DELETED_USER",e[e.BLACKLISTED=-4]="BLACKLISTED",e[e.FRIENDS_COUNT_EXCEEDED=-3]="FRIENDS_COUNT_EXCEEDED",e[e.FLOOD_CONTROL=-2]="FLOOD_CONTROL",e[e.SERVER_ERROR=-1]="SERVER_ERROR",e[e.NOT_FRIENDS=0]="NOT_FRIENDS",e[e.REQUEST_FROM_USER=1]="REQUEST_FROM_USER",e[e.REQUEST_TO_USER=2]="REQUEST_TO_USER",e[e.ARE_FRIENDS=3]="ARE_FRIENDS"}(o||(o={}));var v=r("Ieup"),O=function(){var e;return"feed"===window.cur.module&&window.Feed?null===(e=window.Feed)||void 0===e?void 0:e.getModuleRef():window.cur.module};function w(e,n){if(void 0===n&&(n={}),e){var r=Object(t.v)(e,"from")||"user_rec",o=Object(t.v)(e,"code"),i={scrollY:!1,onViewItem:function(e,o){var t;(null===(t=null==n?void 0:n.checkViewItem)||void 0===t?void 0:t.call(n,e))||b(e,o,r)}};Object(t.v)(e,"next")&&(i.onLoadMore=function(){f.a.post("al_friends.php",{act:"a_recomm_friends_gallery",next:Object(t.v)(e,"next"),track_code:o,friend_id:n.friendId||0,ref:O()},{onDone:function(n,r){var o,i=[];n&&(i=Object(t.p)(Object(t.g)("div",{innerHTML:n}))),null===(o=Object(s.b)(e))||void 0===o||o.addMore(i,!r),Object(t.v)(e,"next",r||null)}})}),new s.a(e,i)}}function b(e,n,r){if(!e.viewed&&Object(t.ab)(e,"ui_gallery_item")){var o=+Object(t.v)(e,"uid"),i=O(),c=j(e);E(["show_user_rec",o,Date.now(),n,i,r,c]),e.viewed=!0}}function j(e){var n,r=Object(t.v)(e,"code");return r||(n=Object(t.Y)("ui_gallery",e),r=Object(t.v)(n,"code")),r||""}function E(e,n){void 0===n&&(n=!1);var r=g();r.push(e),u.a.set("friends_recomm",r),h(n)}function g(e,n,r){void 0===e&&(e=!1),void 0===r&&(r=!1);var o=u.a.get("friends_recomm"),t=Array.isArray(o)?o:[];return n&&(t=t.filter((function(e){return(r?e[1]!==n:e[1]===n)&&Object(a.o)(e[0],["show_user_rec","open_user"])}))),e&&(t=t.map((function(e){return e.join("|")}))),t}function R(e){if(e){var n=g(!1,e,!0);n.length?u.a.set("friends_recomm",n):u.a.remove("friends_recomm")}else u.a.remove("friends_recomm");!function(e){if(e){var n=u.a.get("friends_recomm_visited")||{};delete n[e],u.a.set("friends_recomm_visited",n)}else u.a.remove("friends_recomm_visited")}(e)}function p(e){return(u.a.get("friends_recomm_visited")||{})[e]}function h(e){var n,r;void 0===e&&(e=!1),!(null===(n=window.cur)||void 0===n?void 0:n.friendsRecommLogIdle)&&(null===(r=null===window||void 0===window?void 0:window.curNotifier)||void 0===r?void 0:r.idle_manager)&&(Array.isArray(window.cur.onIdle)||(window.cur.onIdle=[]),Array.isArray(window.cur.onUnidle)||(window.cur.onUnidle=[]),window.cur.friendsRecommLogIdle=function(){clearTimeout(window.cur.friendsRecommLog)},window.cur.onIdle.push(window.cur.friendsRecommLogIdle),window.cur.onUnidle.push(h)),clearTimeout(window.cur.friendsRecommLog),e?D():window.cur.friendsRecommLog=window.setTimeout(D,1e4)}function D(){if(!window.cur.friendsRecommProcess){var e=g(!0);e.length&&(window.cur.friendsRecommProcess=!0,R(),f.a.post("al_friends.php",{act:"a_recomm_logs",logs:e},{onDone:function(){delete window.cur.friendsRecommProcess},onFail:function(){return T(e),delete window.cur.friendsRecommProcess,!0}}))}}function T(e){var n=g();n=e.map((function(e){return e.split("|")})).concat(n),u.a.set("friends_recomm",n)}var S={toggleRecommFriend:function(e,n,r){var u=Object(t.Y)("friend_recomm_card",e),a=u&&+Object(t.v)(u,"uid");if(a){var s={act:"add",mid:a,hash:r,from:"user_rec",ref:O(),track_code:j(u),ts:Date.now()},w=g(!0,a);return w.length&&(R(a),s.logs=w),f.a.post("al_friends.php",s,{onDone:function(n,r){if(Object(t.Cb)(e,n),Object(t.c)(e,"secondary"),Object(d.f)(e,!0),Object(t.c)(u,"friend_recomm_card_accepted"),Object(t.kb)(Object(t.L)("wall_card_text_special",u)),function(e){if(Object(m.l)(e)){var n=e;return(null==n?void 0:n.result_code)===o.REQUEST_FROM_USER}return!1}(r)&&r.friend_request_add_sent_message_nudge){var c=n;Object(l.g)("",{},{tooltipHandler:(a=r.friend_request_entrypoint,function(e,n){var r=n.hide;Object(i.b)(e.querySelector('[data-section-ref="friend_request_notification_send_message"]'),"click",(function(e){var n;if(e.currentTarget instanceof HTMLElement){var o=parseInt(null!==(n=e.currentTarget.getAttribute("data-message-user-id"))&&void 0!==n?n:"");if(!o||Object(i.d)(e))return!0;r(),Object(v.h)(e,o,{params:{box_custom_entrypoint:a}})}}))}),text:r.friend_request_add_sent_message_nudge,title:c})}var a},onFail:function(e){if(w&&T(w),e)return Object(c.d)(Object(_.d)("global_error"),e),!0},showProgress:function(){return Object(d.o)(e)},hideProgress:function(){return Object(d.w)(e)}}),Object(i.c)(n),!1}},hideRecommFriend:function(e,n,r){var o=Object(t.Y)("friend_recomm_card",e),u=o&&+Object(t.v)(o,"uid");if(u){var a=Object(t.Y)("ui_gallery",e),l=O(),m=Object(t.v)(o,"code")||Object(t.v)(a,"code")||"";return f.a.post("al_friends.php",{act:"hide_possible",mid:u,ref:l,track_code:m,hash:r},{onDone:function(){var n=Object(s.b)(Object(t.Y)("ui_gallery",e));if(n){var r=Object(t.Y)("ui_gallery_item",e);n.removeItem(r)}},onFail:function(e){if(e)return Object(c.d)(Object(_.d)("global_error"),e),!0},showProgress:function(){return Object(d.o)(e)},hideProgress:function(){return Object(d.w)(e)}}),Object(i.c)(n),!1}},onClickRecommFriend:function(e){if(Object(t.ab)(e,"ui_gallery_item")||(e=Object(t.Y)("ui_gallery_item",e)),e){var n=+Object(t.v)(e,"uid"),r=O(),o=j(e);!function(e,n,r){var o=u.a.get("friends_recomm_visited")||{};o[e]={ref:n,trackCode:r},u.a.set("friends_recomm_visited",o)}(n,r,o),E(["open_user",n,Date.now(),r,o])}}}}}]);try{stManager.done("cmodules/bundles/d14cf8a35640ddac42850d9e4cb772f6.1cf84a7027f7bc898f2a.js")}catch(e){}