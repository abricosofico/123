!function(_){function e(e){for(var o,a,r=e[0],n=e[1],s=e[2],b=0,d=[];b<r.length;b++)a=r[b],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(_[o]=n[o]);for(c&&c(e);d.length;)d.shift()();return l.push.apply(l,s||[]),t()}function t(){for(var _,e=0;e<l.length;e++){for(var t=l[e],o=!0,r=1;r<t.length;r++){var n=t[r];0!==i[n]&&(o=!1)}o&&(l.splice(e--,1),_=a(a.s=t[0]))}return _}var o={},i={"web/page":0},l=[];function a(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return _[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.e=function(_){var e=[],t=i[_];if(0!==t)if(t)e.push(t[2]);else{var o=new Promise((function(e,o){t=i[_]=[e,o]}));e.push(t[2]=o);var l,r=document.createElement("script");r.charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.src=function(_){return a.p+"bundles/"+({youla_item_create:"youla_item_create"}[_]||_)+"."+{youla_item_create:"447456a6bbc85e11223c"}[_]+".js"}(_);var n=new Error;l=function(e){r.onerror=r.onload=null,clearTimeout(s);var t=i[_];if(0!==t){if(t){var o=e&&("load"===e.type?"missing":e.type),l=e&&e.target&&e.target.src;n.message="Loading chunk "+_+" failed.\n("+o+": "+l+")",n.name="ChunkLoadError",n.type=o,n.request=l,t[1](n)}i[_]=void 0}};var s=setTimeout((function(){l({type:"timeout",target:r})}),12e4);r.onerror=r.onload=l,document.head.appendChild(r)}return Promise.all(e)},a.m=_,a.c=o,a.d=function(_,e,t){a.o(_,e)||Object.defineProperty(_,e,{enumerable:!0,get:t})},a.r=function(_){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})},a.t=function(_,e){if(1&e&&(_=a(_)),8&e)return _;if(4&e&&"object"==typeof _&&_&&_.__esModule)return _;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:_}),2&e&&"string"!=typeof _)for(var o in _)a.d(t,o,function(e){return _[e]}.bind(null,o));return t},a.n=function(_){var e=_&&_.__esModule?function(){return _.default}:function(){return _};return a.d(e,"a",e),e},a.o=function(_,e){return Object.prototype.hasOwnProperty.call(_,e)},a.p="/js/cmodules/",a.oe=function(_){throw console.error(_),_};var r=window.webpackJsonp=window.webpackJsonp||[],n=r.push.bind(r);r.push=e,r=r.slice();for(var s=0;s<r.length;s++)e(r[s]);var c=n;l.push([281,"evbus","lottie","common","palette","e0b5e85860cc0e43692001a90ce0d3bc","e664f14fb87266cecd9413da563dcda4","88ece9fd553062188532d75b5446f241"]),t()}({"/bCM":function(_,e,t){"use strict";t.d(e,"a",(function(){return o})),t.d(e,"b",(function(){return i})),t.d(e,"c",(function(){return l})),t.d(e,"d",(function(){return a})),t.d(e,"e",(function(){return r}));var o=0,i=7,l=0,a=void 0,r=2},281:function(_,e,t){_.exports=t("FgzW")},"2vnv":function(_,e,t){"use strict";t.d(e,"b",(function(){return P})),t.d(e,"i",(function(){return w})),t.d(e,"g",(function(){return D})),t.d(e,"e",(function(){return m})),t.d(e,"d",(function(){return f})),t.d(e,"c",(function(){return C})),t.d(e,"h",(function(){return T})),t.d(e,"f",(function(){return v})),t.d(e,"a",(function(){return A}));var o,i=t("zxIV"),l=t("Egk5"),a=t("EasH"),r=t("v+DW"),n=t("Xrg9"),s=t("t7n3"),c=t("D1OX"),b=t("3oLO"),d=t("4+be"),E=t("kcIO"),O=t("jE6c");!function(_){_[_.DELETED_USER=-5]="DELETED_USER",_[_.BLACKLISTED=-4]="BLACKLISTED",_[_.FRIENDS_COUNT_EXCEEDED=-3]="FRIENDS_COUNT_EXCEEDED",_[_.FLOOD_CONTROL=-2]="FLOOD_CONTROL",_[_.SERVER_ERROR=-1]="SERVER_ERROR",_[_.NOT_FRIENDS=0]="NOT_FRIENDS",_[_.REQUEST_FROM_USER=1]="REQUEST_FROM_USER",_[_.REQUEST_TO_USER=2]="REQUEST_TO_USER",_[_.ARE_FRIENDS=3]="ARE_FRIENDS"}(o||(o={}));var u=t("Ieup"),p=function(){var _;return"feed"===window.cur.module&&window.Feed?null===(_=window.Feed)||void 0===_?void 0:_.getModuleRef():window.cur.module};function P(_,e){if(void 0===e&&(e={}),_){var t=Object(i.v)(_,"from")||"user_rec",o=Object(i.v)(_,"code"),l={scrollY:!1,onViewItem:function(_,o){var i;(null===(i=null==e?void 0:e.checkViewItem)||void 0===i?void 0:i.call(e,_))||w(_,o,t)}};Object(i.v)(_,"next")&&(l.onLoadMore=function(){b.a.post("al_friends.php",{act:"a_recomm_friends_gallery",next:Object(i.v)(_,"next"),track_code:o,friend_id:e.friendId||0,ref:p()},{onDone:function(e,t){var o,l=[];e&&(l=Object(i.p)(Object(i.g)("div",{innerHTML:e}))),null===(o=Object(c.b)(_))||void 0===o||o.addMore(l,!t),Object(i.v)(_,"next",t||null)}})}),new c.a(_,l)}}function w(_,e,t){if(!_.viewed&&Object(i.ab)(_,"ui_gallery_item")){var o=+Object(i.v)(_,"uid"),l=p(),a=M(_);D(["show_user_rec",o,Date.now(),e,l,t,a]),_.viewed=!0}}function M(_){var e,t=Object(i.v)(_,"code");return t||(e=Object(i.Y)("ui_gallery",_),t=Object(i.v)(e,"code")),t||""}function D(_,e){void 0===e&&(e=!1);var t=m();t.push(_),n.a.set("friends_recomm",t),T(e)}function m(_,e,t){void 0===_&&(_=!1),void 0===t&&(t=!1);var o=n.a.get("friends_recomm"),i=Array.isArray(o)?o:[];return e&&(i=i.filter((function(_){return(t?_[1]!==e:_[1]===e)&&Object(s.o)(_[0],["show_user_rec","open_user"])}))),_&&(i=i.map((function(_){return _.join("|")}))),i}function f(_){if(_){var e=m(!1,_,!0);e.length?n.a.set("friends_recomm",e):n.a.remove("friends_recomm")}else n.a.remove("friends_recomm");!function(_){if(_){var e=n.a.get("friends_recomm_visited")||{};delete e[_],n.a.set("friends_recomm_visited",e)}else n.a.remove("friends_recomm_visited")}(_)}function C(_){return(n.a.get("friends_recomm_visited")||{})[_]}function T(_){var e,t;void 0===_&&(_=!1),!(null===(e=window.cur)||void 0===e?void 0:e.friendsRecommLogIdle)&&(null===(t=null===window||void 0===window?void 0:window.curNotifier)||void 0===t?void 0:t.idle_manager)&&(Array.isArray(window.cur.onIdle)||(window.cur.onIdle=[]),Array.isArray(window.cur.onUnidle)||(window.cur.onUnidle=[]),window.cur.friendsRecommLogIdle=function(){clearTimeout(window.cur.friendsRecommLog)},window.cur.onIdle.push(window.cur.friendsRecommLogIdle),window.cur.onUnidle.push(T)),clearTimeout(window.cur.friendsRecommLog),_?h():window.cur.friendsRecommLog=window.setTimeout(h,1e4)}function h(){if(!window.cur.friendsRecommProcess){var _=m(!0);_.length&&(window.cur.friendsRecommProcess=!0,f(),b.a.post("al_friends.php",{act:"a_recomm_logs",logs:_},{onDone:function(){delete window.cur.friendsRecommProcess},onFail:function(){return v(_),delete window.cur.friendsRecommProcess,!0}}))}}function v(_){var e=m();e=_.map((function(_){return _.split("|")})).concat(e),n.a.set("friends_recomm",e)}var A={toggleRecommFriend:function(_,e,t){var n=Object(i.Y)("friend_recomm_card",_),s=n&&+Object(i.v)(n,"uid");if(s){var c={act:"add",mid:s,hash:t,from:"user_rec",ref:p(),track_code:M(n),ts:Date.now()},P=m(!0,s);return P.length&&(f(s),c.logs=P),b.a.post("al_friends.php",c,{onDone:function(e,t){if(Object(i.Cb)(_,e),Object(i.c)(_,"secondary"),Object(r.f)(_,!0),Object(i.c)(n,"friend_recomm_card_accepted"),Object(i.kb)(Object(i.L)("wall_card_text_special",n)),function(_){if(Object(O.l)(_)){var e=_;return(null==e?void 0:e.result_code)===o.REQUEST_FROM_USER}return!1}(t)&&t.friend_request_add_sent_message_nudge){var a=e;Object(E.g)("",{},{tooltipHandler:(s=t.friend_request_entrypoint,function(_,e){var t=e.hide;Object(l.b)(_.querySelector('[data-section-ref="friend_request_notification_send_message"]'),"click",(function(_){var e;if(_.currentTarget instanceof HTMLElement){var o=parseInt(null!==(e=_.currentTarget.getAttribute("data-message-user-id"))&&void 0!==e?e:"");if(!o||Object(l.d)(_))return!0;t(),Object(u.h)(_,o,{params:{box_custom_entrypoint:s}})}}))}),text:t.friend_request_add_sent_message_nudge,title:a})}var s},onFail:function(_){if(P&&v(P),_)return Object(a.d)(Object(d.d)("global_error"),_),!0},showProgress:function(){return Object(r.o)(_)},hideProgress:function(){return Object(r.w)(_)}}),Object(l.c)(e),!1}},hideRecommFriend:function(_,e,t){var o=Object(i.Y)("friend_recomm_card",_),n=o&&+Object(i.v)(o,"uid");if(n){var s=Object(i.Y)("ui_gallery",_),E=p(),O=Object(i.v)(o,"code")||Object(i.v)(s,"code")||"";return b.a.post("al_friends.php",{act:"hide_possible",mid:n,ref:E,track_code:O,hash:t},{onDone:function(){var e=Object(c.b)(Object(i.Y)("ui_gallery",_));if(e){var t=Object(i.Y)("ui_gallery_item",_);e.removeItem(t)}},onFail:function(_){if(_)return Object(a.d)(Object(d.d)("global_error"),_),!0},showProgress:function(){return Object(r.o)(_)},hideProgress:function(){return Object(r.w)(_)}}),Object(l.c)(e),!1}},onClickRecommFriend:function(_){if(Object(i.ab)(_,"ui_gallery_item")||(_=Object(i.Y)("ui_gallery_item",_)),_){var e=+Object(i.v)(_,"uid"),t=p(),o=M(_);!function(_,e,t){var o=n.a.get("friends_recomm_visited")||{};o[_]={ref:e,trackCode:t},n.a.set("friends_recomm_visited",o)}(e,t,o),D(["open_user",e,Date.now(),t,o])}}}},"34p4":function(_,e,t){"use strict";t.d(e,"a",(function(){return o}));var o=function(_){var e=_.match(/(-?\d+)(_?)(photo|video|note|topic|market|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/);if(e)return{type:e[3]||"wall",id:e[1]+"_"+e[4]}}},"3EzW":function(_,e,t){"use strict";t.d(e,"a",(function(){return o})),t.d(e,"b",(function(){return a}));var o,i=t("DM2o"),l=t("W9Tc");function a(_){var e={event_type:_,nav_screen:window.cur.module};Object(l.b)("best_friends_analytics_log")&&console.log(e),Object(i.a)("best_friends_product_analytic",e)}!function(_){_.addFriendsFromChat="add_friends_from_chat",_.clear="clear",_.moreChats="more_chats",_.selectFriendFromSearch="select_friend_from_search",_.selectChatFromSearch="select_chat_from_search",_.saveBestFriendsList="save_best_friends_list",_.updatePopupSave="update_popup_save",_.updatePopupCancel="update_popup_cancel",_.createPostFromPopupBest="create_post_from_popup_best",_.createPostFromPopupFriends="create_post_from_popup_friends",_.clickToLockFriends="click_to_lock_friends",_.clickToLockBestFriends="click_to_lock_best_friends",_.editBestFriendsFromPopup="edit_best_friends_from_popup",_.editBestFriends="edit_best_friends",_.selectBestFriends="select_best_friends",_.clickToBestFriendsEntrypoint="click_to_best_friends_entrypoint"}(o||(o={}))},"9at3":function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a1Th"),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("Btvt"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("pIFo"),_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("zxIV"),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("EasH"),_web_lib_ui__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("v+DW"),_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("ryw6"),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("t7n3"),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("cGUQ"),WallUpload={_videoUploadIndex:null,photoUploaded:function(_,e){var t=void 0!==_.ind?_.ind:_,o=(_.fileName?_.fileName:_).replace(/[&<>"']/g,""),i=_.fileName?t+"_"+_.fileName:_,l=ge("upload"+i+"_progress_wrap");l&&hide(geByClass1("progress_x",l)),ajax.post("al_photos.php",extend({act:"choose_uploaded"},e),{onDone:function(_,e){WallUpload.addMedia().chooseMedia("photo",_,extend(e,{upload_ind:t+"_"+o}))},onFail:WallUpload.uploadFailed.pbind(_)})},uploadFailed:function(_,e){var t=void 0!==_.ind?_.ind:_,o=Upload.options[t],i=(_.fileName?_.fileName:_).replace(/[&<>"']/g,"");if("fileApi"==Upload.types[t]&&!o.wiki_editor){var l,a=_.fileName?t+"_"+_.fileName:_;cur.imMedia?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.kb)("upload"+a+"_progress_wrap"),l=cur.imMedia.lnkId,cur.addMedia[l].unchooseMedia()):cur.addMedia&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.kb)("upload"+a+"_progress_wrap"),(l=(cur.attachMediaIndexes||{})[i])&&cur.addMedia[l].unchooseMedia()),1==o.filesTotalCount&&setTimeout(Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.d)({title:getLang("global_error")},getLang("wall_add_photo_error")).hide,2e3)}Object(_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_6__.c)("Upload failed",{dt:-1,type:102,url:(ge("file_uploader_form"+t)||{}).action}),Upload.embed(t)},show:function(){cur.uploadInited&&("feed"==cur.wallType?removeClass(cur.uploadWrap,"post_upload_min_wrap"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.xb)(cur.uploadWrap))},hide:function(_){function e(){return _.apply(this,arguments)}return e.toString=function(){return _.toString()},e}((function(){cur.uploadInited&&("feed"==cur.wallType?addClass(cur.uploadWrap,"post_upload_min_wrap"):hide(cur.uploadWrap),hide("post_upload_dropbox"))})),addMedia:function(){return cur.dropboxAddMedia||cur.wallAddMedia},attachEl:function(){return WallUpload.dropboxAttachEl||ge("submit_post_box")},attachToEl:function(_){_=ge(_);var e=ge("post_upload_dropbox");if(WallUpload.dropboxAttachEl=_,!_||!e)return!1;_.insertBefore(e,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.x)(_))},checkDragDrop:function(){var _=browser,e=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.k)(browser.version);return!!(_.msie&&e>=9||_.mozilla&&e>=3.5||_.chrome||_.safari)&&((window.XMLHttpRequest||window.XDomainRequest)&&(window.FormData||window.FileReader&&(window.XMLHttpRequest&&XMLHttpRequest.sendAsBinary||window.ArrayBuffer&&window.Uint8Array&&(window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder))))},initCallback:function(){cur.editingPost?WallUpload.init():Wall.showEditPost()},init:function(){cur.withUpload&&(cur.uploadAdded?WallUpload.show():(cur.uploadAdded=!0,window.Upload&&window.VideoInlineUpload?(WallUpload.initLoader(),Wall._videoUploadIndex=WallUpload.initVideoUploader()):stManager.add([jsc("web/upload.js"),"video_upload.js"],(function(){WallUpload.initLoader(),Wall._videoUploadIndex=WallUpload.initVideoUploader()}))))},initVideoUploader:function(){var _=cur.wallUploadVideoOpts;if(_){var e=ge("post_field_upload_video"),t=ge("post_upload_video_dropbox");_.options.from="post";var o=ge("send_post"),i={onUploadAllCompleteDone:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_5__.f)(o,!1)},onUploadStartDone:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_5__.f)(o,!0)}};return window.VideoInlineUpload.getUploadModule(e,t,_,WallUpload.addMedia(),i)}},initLoader:function initLoader(){removeEvent(bodyNode,"dragover dragenter");var data=cur.wallUploadOpts,field=ge("post_field");if(WallUpload.checkDragDrop()){cur.uploadWrap=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.g)("div",{className:"post_upload_wrap fl_r",innerHTML:'<div id="post_field_upload" class="post_upload"></div>'}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.z)(cur.uploadWrap,field),cur.uploadVideoWrap=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.g)("div",{className:"post_upload_video_wrap fl_r",innerHTML:'<div id="post_field_upload_video" class="post_upload_video"></div>'}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.z)(cur.uploadVideoWrap,field);var submitBox=WallUpload.attachEl();submitBox.insertBefore(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.g)("div",{id:"post_upload_dropbox",className:"post_upload_dropbox",innerHTML:'<div class="post_upload_dropbox_inner"><div class="post_upload_label drop_label">'+(data.opts.lang.wall_drop_media_here||"Drop files here")+'</div><div class="post_upload_label release_label">'+(data.opts.lang.wall_release_media_here||"Release button to attach files")+"</div></div>"}),submitBox.firstChild),cur.wallUploadInd=Upload.init("post_field_upload",data.url,data.params,{accept:"image/jpeg,image/png,image/gif",dragEl:bodyNode,dropbox:"post_upload_dropbox",file_input:null,file_name:"photo",file_size_limit:26214400,file_types_description:"Image files (*.jpg, *.jpeg, *.png, *.gif)",file_types:"*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG;*.gif;*.GIF",file_match:data.opts.ext_re,lang:data.opts.lang,noFlash:1,multiple:1,multi_progress:1,max_files:10,chooseBox:1,clear:1,type:"photo",max_attempts:3,server:data.opts.server,error:data.opts.default_error,error_hash:data.opts.error_hash,label:data.opts.label,wiki_editor:0,onUploadStart:function(_,e){var t=void 0!==_.ind?_.ind:_,o=Upload.options[t];"form"==Upload.types[t]&&(geByClass1("file",ge("choose_photo_upload")).disabled=!0),"fileApi"==Upload.types[t]&&(cur.notStarted&&(cur.preventBoxHide||boxQueue.hideLast(),delete cur.notStarted),o.multi_progress&&this.onUploadProgress(_,0,0))},onUploadComplete:function onUploadComplete(info,res){var params;try{params=eval("("+res+")")}catch(_){params=Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_8__.fromQueryString)(res)}params.photos?WallUpload.photoUploaded(info,params):Upload.onUploadError(info)},onUploadProgress:function(_,e,t){var o=void 0!==_.ind?_.ind:_;if("fileApi"==Upload.types[o]){var i=(cur.attachMediaIndexes||{})[o];if(void 0===i||i&&cur.addMedia[i].chosenMedia||cur.imMedia){var l={loaded:e,total:t};_.fileName&&(l.fileName=_.fileName.replace(/[&<>"']/g,"")),WallUpload.addMedia().showMediaProgress("photo",o,l)}}},onUploadError:WallUpload.uploadFailed,onCheckServerFailed:function(){delete cur.uploadInited,WallUpload.hide()},onUploadCompleteAll:function(_){"form"==Upload.types[_]&&Upload.embed(_)},onDragEnter:function(){cur.editingPost?(Wall.hidePosterFeatureTooltip(),WallUpload.init()):Wall.showEditPost()},onNoFilteredCallback:function(_){Wall._videoUploadIndex&&Upload.onFileApiSend(Wall._videoUploadIndex,_)}}),cur.uploadInited=!0,WallUpload.show(),cur.wallUploadFromDrag&&(1==cur.wallUploadFromDrag&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.xb)("post_upload_dropbox"),delete cur.wallUploadFromDrag)}}};__webpack_exports__.a=WallUpload},"9xR5":function(_,e,t){"use strict";t.d(e,"a",(function(){return i})),t.d(e,"b",(function(){return l})),t.d(e,"c",(function(){return a})),t.d(e,"d",(function(){return r})),t.d(e,"e",(function(){return n})),t.d(e,"f",(function(){return s}));var o=t("q1tI"),i=function(_,e){var t={};return Object.entries(_).forEach((function(_){var o,i,l,a=_[0],r=_[1],n=a,s=null!==(l=null===(i=null===(o=null==e?void 0:e.itemsById)||void 0===o?void 0:o[n])||void 0===i?void 0:i.score)&&void 0!==l?l:1;t[n]=s*(r||0)})),t},l=function(_){return Object.values(_).reduce((function(_,e){return _+(e||0)}),0)},a=function(_){return l(_)},r=function(){var _,e,t;return"function"==typeof(null===(_=window.cur)||void 0===_?void 0:_.viewAsBox)?(window.cur.viewAsBox(),!1):!(window.vk.widget&&!window.vk.id)||(null===(t=null===(e=window.Widgets)||void 0===e?void 0:e.oauth)||void 0===t||t.call(e),!1)},n=function(_){return new Promise((function(e,t){var o=new Image;o.src=_,o.onload=function(){return e()},o.onerror=function(){return t()}}))},s=function(_){var e=o.useRef(_);return o.useEffect((function(){e.current=_})),e.current}},DN6O:function(_,e,t){"use strict";t.d(e,"a",(function(){return n}));var o=t("Jph1"),i=t("xqyG"),l=t("qYuU"),a=Object(l.a)("reactions-animations-storage",(function(){return{animationItemsData:new Map}})),r=function(){return a().animationItemsData},n=Object(i.a)({animationItemGet:function(_){var e=_.animationId;return r().get(e)},animationItemSet:function(_){var e=_.animationId,t=_.loadedAnimationData;r().set(e,t)},loadAnimation:Object(i.b)(o.a)})},DfBR:function(_,e,t){"use strict";t.d(e,"a",(function(){return i})),t.d(e,"b",(function(){return l}));var o=t("zxIV"),i=function(_){var e=document.querySelector("#wall_tabs");return e?Array.from(e.querySelectorAll(".ui_tab")).filter((function(e){var t=e.parentNode;return null!==t&&t!==_&&!Object(o.ab)(t,"unshown")&&!Object(o.ib)(t,'[data-ui-tab="no_posts"]')})):[]},l=function(){var _=document.querySelector("#wall_tabs"),e=null==_?void 0:_.querySelector(".page_wall_no_posts");null==e||e.remove(),Object(o.mb)(document.querySelector("#wall_tabs"),"page_tabs_hidden")}},DzCs:function(_,e,t){"use strict";var o=t("2vnv");t.d(e,"a",(function(){return o.a}))},F5gA:function(_,e,t){"use strict";t.d(e,"a",(function(){return r}));var o=t("zxIV"),i=t("lXE5"),l=function(_){window.cur.wallLayer?window.wkLayerWrap&&(window.wkLayerWrap.scrollTop=_):Object(i.g)(_,0,!1,!0)},a=function(_){var e,t;l((window.cur.wallLayer?null!==(t=null===(e=window.wkLayerWrap)||void 0===e?void 0:e.scrollTop)&&void 0!==t?t:0:Object(i.e)())+_)},r=function(_,e){if(_ instanceof HTMLElement&&e instanceof HTMLElement){var t="fixed"===Object(o.T)(e,"position"),i=void 0!==window.cur.wallLayer;if(t){var r=_.getBoundingClientRect(),n=20-(e.getBoundingClientRect().top-r.bottom);n>0&&a(n)}else{if(i)return;var s=e.closest(".replies_wrap");s&&function(_){var e=Object(o.j)();if(_.getBoundingClientRect().bottom>e){var t=Object(o.V)(_)[1]+Object(o.Q)(_)-e;l(t)}}(s)}}}},FgzW:function(_,e,t){"use strict";t.r(e);var o=t("MJEz"),i=t("oBWH"),l=t("qwyz"),a=t("9at3"),r=t("aG8I"),n=t("aong");window.Page=i.a,window.page=i.a,window.Wall=l.a,window.wall=l.a,window.WallUpload=a.a,window.Composer=r.a,window._postsSendTimer||(window._postsSendTimer=setTimeout(i.a.postsSend,1e4));try{stManager.done("page.js"),Object(o.c)().setInteractiveHandler("Page/owner_new_photo",_=>{try{var e=_.payload.dataAttrs.options,t=JSON.parse(e),o=t.ownerId;t.useNewForm?i.a.ownerAvatarUpload(o):i.a.ownerPhoto(o)}catch(_){Object(n.m)(getLang("global_error"))}}),Object(o.c)().setInteractiveHandler("Page/owner_edit_photo",_=>{try{var e=_.payload.dataAttrs.options,t=JSON.parse(e),o=t.ownerId,l=t.hash;t.useNewForm?i.a.ownerAvatarEdit(o,l):i.a.ownerCrop(o,l)}catch(_){Object(n.m)(getLang("global_error"))}}),Object(o.c)().setInteractiveHandler("Page/owner_set_exist_photo",_=>{try{var e=_.payload.dataAttrs.options,t=JSON.parse(e),o=t.photo;t.useNewForm?i.a.ownerAvatarSelect(o):showBox("al_page.php",{act:"owner_photo_edit",photo:o},{stat:["owner_photo.css",jsc("web/owner_photo.js"),"tagger.css",jsc("web/tagger.js")]})}catch(_){Object(n.m)(getLang("global_error"))}})}catch(_){}},Kl2g:function(_,e,t){"use strict";t.d(e,"a",(function(){return a})),t.d(e,"c",(function(){return s})),t.d(e,"b",(function(){return c}));var o=t("uQjJ"),i=t("qYuU"),l=function(){return(l=Object.assign||function(_){for(var e,t=1,o=arguments.length;t<o;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(_[i]=e[i]);return _}).apply(this,arguments)},a={post_reactions_counts_update:"wall/post_reactions_counts_update",reply_reactions_counts_update:"wall/reply_reactions_counts_update"},r=Object(i.a)("wall-data",(function(){return{emitter:new o.a,keyedListeners:Object.create(null)}})),n=function(_,e,t){var o,i,a=r(),n=null===(i=null===(o=a.keyedListeners)||void 0===o?void 0:o[_])||void 0===i?void 0:i[e];return n&&a.emitter.removeListener(_,n),function(_,e,t){var o,i=r();i.emitter.addListener(_,t),i.keyedListeners[_]=l(l({},i.keyedListeners[_]),((o={})[e]=t,o));return function(){var o,l;i.emitter.removeListener(_,t),(null===(o=i.keyedListeners[_])||void 0===o?void 0:o[e])===t&&(null===(l=i.keyedListeners[_])||void 0===l||delete l[e])}}(_,e,t)},s=function(_,e,t){return n(e,_,t)},c=function(_,e){r().emitter.emit(_,e)}},QxcO:function(_,e,t){"use strict";t.d(e,"a",(function(){return c})),t.d(e,"b",(function(){return b})),t.d(e,"c",(function(){return O}));var o=t("W9Tc"),i=t("zxIV"),l=t("pruO"),a=t("crIy"),r=t("fBgk"),n=function(_,e){var t,l=null===(t=function(_){try{var e=JSON.parse(_);if(null!==e&&"object"!=typeof e)return;return e}catch(_){return}}(_))||void 0===t?void 0:t.set_id,n="string"==typeof l?l:void 0;if(Object(o.b)("reactions_enabled")&&e&&n){var s=Object(a.b)(n);if(s)return{likeClassName:"like_btn--hidden",template:Object(i.qb)(e,{reactions_button_title:Object(r.b)(s)||"",reactions_set_id:n})}}},s=function(_,e){return e.length>_},c=function(_,e){var t,o=null===(t=null==e?void 0:e.wallTpl)||void 0===t?void 0:t.post_likes_reactions,i=s(14,_)?_[14]:void 0;if("string"==typeof i)return n(i,o)},b=function(_,e){var t,i=null===(t=null==e?void 0:e.wallTpl)||void 0===t?void 0:t.reply_likes_reactions;if(Object(o.b)("reactions_enabled_post_replies")){var l=s(14,_)?_[14]:void 0;if("string"==typeof l)return n(l,i)}},d=function(_){var e=JSON.parse(_);if(null===e||"object"==typeof e||Array.isArray(e)){var t;if(Array.isArray(e))e=(t=e,Object.assign(Object.create(null),t));return e}},E=function(_){if(Object(o.b)("reactions_enabled")){var e=s(5,_)?_[5]:void 0;if("string"==typeof e){var t=function(_){var e=_.indexOf(";"),t=_.substr(0,e),o=_.substr(e+1);if("1"===t)return d(o)}(e);if(t)return{counts:t}}}},O=function(_){var e,t=E(_);return(e={})[l.a]=null==t?void 0:t.counts,e}},Rafy:function(_,e,t){"use strict";t.d(e,"a",(function(){return o})),t.d(e,"b",(function(){return i}));var o=!!t("Xrg9").a.get("reactions.debug_enabled"),i=!1},ToGb:function(_,e,t){"use strict";t.d(e,"a",(function(){return w}));var o=t("zxIV"),i=t("ha24"),l=t("Rafy"),a=t("p4k+"),r=t("WQ5g"),n=function(_,e){var t,o;return null!==(o=null!==(t=function(_){var e;if("string"==typeof _)return null!==(e=document.querySelector("#post"+_))&&void 0!==e?e:void 0}(_))&&void 0!==t?t:null==e?void 0:e.closest("._post, .wl_post"))&&void 0!==o?o:void 0},s=t("Kl2g"),c=t("ZD4m"),b=function(_){var e=!1;return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];if(!e)return e=!0,_.apply(this,t)}};function d(_,e){var t=(void 0===e?{}:e).scrollByImpl,o=void 0===t?window.scrollBy:t,i=_;return{start:b((function(_){_&&(i=_);var e=Object(c.a)(i);return b((function(_){if(_&&(i=_),i.isConnected){var t=Object(c.a)(i);o(0,t.top-e.top)}}))}))}}var E=function(_,e){var t,i,l=null===(i=null===(t=window.cur)||void 0===t?void 0:t.wallTpl)||void 0===i?void 0:i[_];if(l)return function(_){return _.replace(/%[-\w]+%/g,"")}(Object(o.qb)(l,e));console.warn("renderTemplate: missing template '"+_+"'")},O=function(_){for(var e=_.isUserAction,t=void 0!==e&&e,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];t?console.error.apply(console,o):l.a&&console.warn.apply(console,o)},u=function(_,e,t){var i=t.isActionStatusBarVisible,l=t.isReactionsPreviewVisible,a=t.positionTrackingEnd,s=function(_,e){var t=Object(r.c)(_);if(t){var i=n(e,t),l=null==i?void 0:i.querySelector('[data-section-ref="post-action-status-bar"]');if(l)return{actionStatusBar:l};var a=Object(o.rb)(E("post_action_status_bar",{class:"PostActionStatusBar--hidden"}));if(a)return Object(o.z)(a,t),{actionStatusBar:a}}}(_,e.postFullId);if(s){var c=s.actionStatusBar;if(c.classList.toggle("PostActionStatusBar--hidden",!i),i&&(Object(r.d)(_)||c.prepend(Object(o.rb)(E("post_reactions_preview",{class:l?"":"ReactionsPreview--empty",object_raw:_})))),a){var b=Object(r.b)(_);null==a||a(b)}}else O({},"Unable to init ActionStatusBar in post",e)},p=function(_){var e=Object(i.b)(_.postFullId),t=n(_.postFullId,Object(r.c)(e));t||O(_,"Missing post element for reactions preview update",{payload:_,likeWrap:Object(r.c)(e)});var o=Object(r.b)(e);if(!!_.isQueueUpdate&&o&&function(_){var e=Object(a.a)(_);if(!e)return!1;var t=e+1e4;return Date.now()<t}(o))l.a&&console.log("Ignoring reactions update from queue",_);else{var s;_.isPrimaryLikeButtonClick&&!_.isFromWkLayer&&o&&(s=d(o).start());var c=Object(a.d)(_.counts),b=c;null==t||t.classList.toggle("post--withActionStatusBar",b),u(e,_,{isActionStatusBarVisible:b,isReactionsPreviewVisible:c,positionTrackingEnd:s}),c&&Object(a.g)(e,{counts:_.counts}),Object(a.f)(e,{counts:_.counts})}},P=function(_){if(!l.b)return!1;var e=Object(i.c)(_.replyFullId);Object(a.g)(e,{counts:_.counts}),Object(a.f)(e,{counts:_.counts})},w=function(){var _=[Object(s.c)("wall-post-action-status-bar",s.a.post_reactions_counts_update,p),Object(s.c)("wall-reply-reactions-counts",s.a.reply_reactions_counts_update,P)];return{onDestroy:function(){_.forEach((function(_){_()})),_=[]}}}},WQ5g:function(_,e,t){"use strict";t.d(e,"b",(function(){return o})),t.d(e,"a",(function(){return i})),t.d(e,"c",(function(){return l})),t.d(e,"d",(function(){return a}));var o=function(_){var e;return null!==(e=document.querySelector('[data-section-ref="reactions-button"][data-reaction-target-object="'+_+'"]'))&&void 0!==e?e:void 0},i=function(_){var e;return null!==(e=_.closest('[data-section-ref="reactions-button"]'))&&void 0!==e?e:void 0},l=function(_){var e,t=o(_);if(t)return null!==(e=t.closest(".like_wrap"))&&void 0!==e?e:void 0},a=function(_){return document.querySelector('[data-section-ref="reactions-preview-items"][data-reaction-target-object="'+_+'"]')}},YIAi:function(_,e,t){"use strict";t.d(e,"a",(function(){return o}));var o={PUBLIC:0,ONLY_FRIENDS:1,ONLY_BEST_FRIENDS:2}},aG8I:function(_,e,t){"use strict";t("KKXr"),t("Oyvg"),t("pIFo"),t("SRfc");var o=t("zxIV"),i=t("t7n3"),l=t("Egk5"),a=t("/PiP"),r=t("7jxN"),n=t("lXE5"),s={init:function(_,e){if(!(_=ge(_)))return null;var t=Object(o.l)(_,"composer");if(t)return t;t={input:_,inited:!1,options:e},Object(o.l)(_,"composer",t),t.wddWrap=Object(o.g)("div",{className:"composer_wdd clear_fix "+(e.wddClass||""),id:_.id+"_composer_wdd",innerHTML:'<input type="hidden" id="'+_.id+'_composer_wdd_term"/>'},{width:e.width||Object(o.S)(_)[0]}),e.appendTo&&Object(i.v)(e.appendTo)?e.appendTo(t.wddWrap):Object(o.z)(t.wddWrap,_.nextSibling),t.wddInput=t.wddWrap.firstChild,t.wdd=WideDropdown.initSelect(t.wddWrap,extend({text:t.wddInput,input:_,noResult:e.lang.noResult||"",introText:e.lang.introText||"",toup:e.toup,wddOpts:e.wddOpts,searchKeys:e.searchKeys,width:"auto",onItemSelect:s.onItemSelect.bind(s).pbind(t)},e.wddOpts||{url:"hints.php",params:{act:"a_json_friends",from:"composer"}})),_.dd=t.wddWrap.id,s.initEvents(t),e.media&&(t.addMedia=new MediaSelector(e.media.lnk,e.media.preview,e.media.types,e.media.options,e.media.gearEl,e.media.actionsEl)),Object(o.vb)(t.wddWrap,"width",""),t.inited=!0,s.updateAutoComplete(t),t.edit=e.edit,t.isReply=e.isReply,s.updateArticleConvertSuggest(t);var l=cur.onMediaChanged;return cur.onMediaChanged=function(){s.updateArticleConvertSuggest(t),l&&l()},t},initEvents:function(_){addEvent(_.input,"keyup keydown keypress",s.onKeyEvent.pbind(_)),addEvent(_.input,"click mousedown mouseup focus blur paste",s.onMouseEvent.pbind(_))},destroy:function(_){WideDropdown.deinit(_.wddWrap),Object(o.i)(_.input,_.wddWrap),Object(o.kb)(_.wddWrap),_.inited=!1,_.addMedia&&_.addMedia.destroy(),Object(o.l)(_.input,"composer",null),Object(o.kb)(_.articleConvertEl),_.articleConvertEl=!1},onKeyEvent:function(_,e){var t=!e.shiftKey&&inArray(e.keyCode,[KEY.UP,KEY.DOWN,KEY.RETURN]),a=_.wdd&&t;if("keypress"==e.type||"keydown"==e.type){if(e.keyCode==KEY.RETURN||10==e.keyCode){if(_.select&&_.select.isVisible())return Object(l.k)(document,e.type,e),Object(l.c)(e);if(e.ctrlKey&&Object(i.v)(_.options.onSubmit))return!0}if(e.keyCode==KEY.TAB){var r=_.input,n=window.Emoji?Emoji.editableVal(r):"",c=s.getCursorPosition(r),b=(n.substr(0,c)+String.fromCodePoint(1)+n.substr(c)).match(/^[\s\S]*(@|\*)[\S]+\s*\([\s\S]*?\001[\s\S]*?\)\s*/);if(b){var d=b[0].length-1;return Object(o.H)(_.input,d,d),Object(l.c)(e)}}var E=0;for(var O in _.wdd.shown)E+=1;if(a&&Object(o.fb)(_.wdd.listWrap)&&E)return e.type==(browser.opera&&!browser.chrome?"keypress":"keydown")&&WideDropdown._textEvent(e),Object(l.c)(e)}if("keyup"==e.type&&!a){if(65==e.keyCode&&e.ctrlKey)return;_.wdd&&inArray(e.keyCode,[KEY.SPACE,KEY.HOME,190,191,78,55,49])&&s.hideSelectList(_)}"keyup"!=e.type||a&&e.keyCode!=KEY.RETURN||s.updateAutoComplete(_,e),s.updateArticleConvertSuggest(_)},isArticleConvertSuggestAvailable:function(_){if(_.edit||_.isReply)return!1;var e=!!cur.wallAddMedia&&cur.wallAddMedia.types,t=!1;if(e)for(var o=0;o<e.length;o++)if("article"==e[o][0]){t=!0;break}if(!t||!Object(a.o)())return!1;var i=!0;return each(cur.wallAddMedia.getMedias()||[],(function(_,e){if(!inArray(e[0],["photo","video","postpone","mark_as_ads"]))return i=!1,!1})),!!i&&!!(cur.options.articleConvertThreshold>0&&_.curValue.length>=cur.options.articleConvertThreshold)},updateArticleConvertSuggest:function(_){if(s.isArticleConvertSuggestAvailable(_)){if(!_.articleConvertEl){var e=gpeByClass("post_field_wrap",_.input),t=geByClass1("post_actions_btns",e);_.articleConvertEl=Object(o.rb)('<button class="article_post_convert round_button">'+getLang("profile_convert_to_article_short")+"</button>"),t?(e!==domPN(t)&&Wall.sendInsertBeforeError(),e.insertBefore(_.articleConvertEl,t)):e.appendChild(_.articleConvertEl),removeEvent(_.articleConvertEl),addEvent(_.articleConvertEl,"click",(function(){cur.postComposer=_;var e=[];each(cur.wallAddMedia.getMedias()||[],(function(_,t){inArray(t[0],["photo","video"])&&e.push(t[0]+"_"+t[1])})),Object(a.s)(cur.oid,0,{text:_.curValue,medias:e})}))}Object(o.xb)(_.articleConvertEl)}else Object(o.kb)(_.articleConvertEl),delete _.articleConvertEl},onMouseEvent:function(_,e){"blur"!=e.type?("focus"!=e.type&&"click"!=e.type||s.updateAutoComplete(_,e),"paste"==e.type&&setTimeout(s.updateAutoComplete.pbind(_,e),0)):s.hideSelectList(_)},updateAutoComplete:function(_,e){var t=_.input,o=(_.options&&_.options.getValue||window.Emoji&&Emoji.editableVal||val)(t),i=Math.max(o.lastIndexOf("@"),o.lastIndexOf("*")),l=!1;if(i>-1){var a=s.getCursorPosition(t),r=o.substr(0,a),n=r.match(/(^|[\s.,:\'\"«»;>\)\(]|\#[\w_\.\u0400-\u04FF]+)[@\*]([^,@\*\(\)\?\!\s\n\r \u00A0]*)$/);i=Math.max(r.lastIndexOf("@"),r.lastIndexOf("*")),n&&"."!==n[2].substr(-1)&&(l=n[2])}!1===l&&delete _.ignoredTerm,void 0!==_.ignoredTerm&&l==_.ignoredTerm&&(l=!1),_.curValue=o,_.curTerm=l,_.curPos=i,val(_.wddInput,l),s.toggleSelectList(_),!e||"keyup"!=e.type&&"paste"!=e.type||(_.options.onValueChange&&_.options.onValueChange(o,"keyup"!=e.type),_.addMedia&&_.addMedia.checkMessageURLs(o,"keyup"!=e.type),_.options.checkLen&&_.options.checkLen(o))},toggleSelectList:function(_){var e=_.curTerm;!1===e?s.hideSelectList(_):s.showSelectList(_,e)},hideSelectList:function(_){_.wddInput.focused=!1,WideDropdown._hideList(_.wdd);var e=_.options||{};e.onHide&&e.onHide()},showSelectList:function(_,e){function t(t){_.wddInput.focused=!0,WideDropdown.items(_.wdd.id,t||[]),WideDropdown._updateList(_.wdd,!1,e);var o=_.options||{};o.onShow&&o.onShow()}"function"==typeof cur.wallMentions&&(cur.wallMentions=cur.wallMentions()),cur.wallMentions&&"function"==typeof cur.wallMentions.then?cur.wallMentions.then((function(_){t(_)})):t(cur.wallMentions)},onItemSelect:function(_,e){if(!e)return!1;var t=e[2].replace("@",""),l=e[8]||e[1],a=_.curValue.substr(0,_.curPos),r=_.curValue.substr(_.curPos),n=!!a.match(/\#[\w_\.\u0400-\u04FF]+$/i);document.activeElement.classList.contains("_im_text")&&(/^(?:id|club)\d{1,}$/.test(t)||(n=!0));var c=_.options.poster,b=window.Emoji&&void 0!==_.input.emojiId||c;b||c?r=Object(i.c)(r):l=Object(i.F)(l),cur.selNum=(cur.selNum||0)+1;var d=new RegExp("^(@|\\*)"+Object(i.h)(_.curTerm)+"(?:\\s+\\((?:(.*?)\\))?\\s*)?","");return r=r.replace(d,(function(_,e,o){var i=e+t+" ";return n?i+=b||c?'<span id="tmp_sel_'+cur.selNum+'"></span>':"":(i+=(b||c?'<span id="tmp_sel_'+cur.selNum+'">':"")+"(",i+=l.replace(/[\(\)\]\[]/g,""),i+=")"+(b||c?"</span>":"")+" "),i})),n||!a||a.match(/[\.\(\)\?\!\s\n\r\'\"«» \u00A0]$/)||(r=" "+r),s.hideSelectList(_),b||c?(Emoji.val(_.input,Object(i.c)(a)+r),Emoji.focus(_.input),Emoji.editableFocus(_.input,ge("tmp_sel_"+cur.selNum),!0),c&&c.checkText()):(val(_.input,a+r),Object(o.H)(_.input)),Object(i.v)(_.options.onItemSelect)&&_.options.onItemSelect(e),!1},getCursorPosition:function(_){if(void 0!==_.selectionStart)return _.selectionStart;if(void 0!==window.getSelection){var e=window.getSelection();if(!e||!e.rangeCount)return 0;var t=e.getRangeAt(0),i=t.cloneRange(),l=Object(o.g)("div");return i.selectNodeContents(_),i.setEnd(t.startContainer,t.startOffset),l.appendChild(i.cloneContents()),(window.Emoji?Emoji.editableVal:val)(l).replace(/\n$/,"").length}return 0},getSendParams:function(_,e,t){var l=_.addMedia||{},a=l.chosenMedia||{},s=l&&l.getMedias?l.getMedias():[],c=l.shareData||{},b=_&&_.options.media&&_.options.media.options.limit||0,d=_.input,E=cur.posterWpe&&cur.posterWpeSendParams?cur.posterWpeSendParams.text:Object(i.I)(window.Emoji?Emoji.editableVal(d):val(d)),O={message:E},u=0,p=hasClass(gpeByClass("post",d),"suggest");isArray(a)&&a.length&&s.push(clone(a)),Object(o.vb)(bodyNode,{cursor:"default"});var P=ge("wpe_cont"),w=geByClass1("wpe_error",P);function M(_){w||(w=Object(o.rb)('<div class="wpe_error error"><div>'),P.insertBefore(w,Object(o.x)(P))),w.innerHTML=_.length>60?'<div class="msg_text">'+_+"</div>":_,Object(o.fb)(w)||(Object(r.l)(w,100),Object(n.g)(Object(o.V)(w)[1]-15),Object(r.b)(ge("box_layer_wrap"),{scrollTop:0}))}if(w&&hide(w),s.length&&each(s,(function(_,o){var a;if(isArray(o)&&o.length){var r=this[0],n=this[1];if(u>=b&&"postpone"!=r)return!1;switch(r){case"poll":var d=l.pollData(t);if(!d)return O.delayed=!0,!1;Object(i.r)(n)&&(O.poll_id=Object(i.r)(n)),n=d.question,delete d.question,O=extend(O,d);break;case"copyright":var P=l.copyrightData();if(P)return void(O=extend(O,P));break;case"share":if(c.failed||!c.title&&(!c.images||!c.images.length)&&!c.photo_url&&!c.video)return cur.shareLastParseSubmitted&&Date.now()-cur.shareLastParseSubmitted<2e3?(O.delayed=!0,!1):void 0;if((cur.options.share||{}).button_exclusive&&c.button_text&&c.button_action){var w;s.length>1&&(w=getLang("global_share_too_many_attachments")),O.message.split("\n").length-1>(cur.options.share||{}).button_exclusive_max_message_newlines&&(w=getLang("global_share_too_many_newlines")),O.message.length>(cur.options.share||{}).button_exclusive_max_message_len&&(w=getLang("global_share_too_long_message"));var D=Object(i.j)(" "+O.message+" "),m=Object(i.j)(" "+c.url+" ")[0];if(m&&D.length){"/"===m.query&&(m.query=""),"www."===m.domain.substr(0,4)&&(m.domain=m.domain.substr(4));for(var f=0;f<D.length;++f){var C=D[f];if("/"===C.query&&(C.query=""),"www."===C.domain.substr(0,4)&&(C.domain=C.domain.substr(4)),m.domain!=C.domain||m.query!=C.query){w=getLang("global_share_too_many_links");break}}}if(w)return M(w),O.delayed=!0,!1}if(!c.title)return M(getLang("global_share_title_required")),O.delayed=!0,!1;if(!c.url)return M(getLang("global_share_url_required")),O.delayed=!0,!1;if(c.url=new URL(c.url).href,c.video?(n=c.video_owner_id+"_"+c.video_id,O.snippet_video=1):n=c.prometheus?c.media:c.user_id&&c.photo_id&&!c.noPhoto?c.user_id+"_"+c.photo_id:"",c.share_upload_failed&&!n)return c.share_upload_failed=0,O.delayed=!0,!1;if(c.images&&c.images.length&&!isArray(c.images[cur.shareShowImg])&&!t&&!n&&!c.noPhoto&&!c.video)return l.uploadShare(e),O.delayed=!0,!1;if((cur.options.share||{}).require_image&&!n)return M(getLang("global_share_image_required")),O.delayed=!0,!1;c.initialPattern&&Object(i.I)(E)==c.initialPattern&&(O.message=""),c.is_vk_mini_app&&(O.is_vk_mini_app=!0,O.is_photo_edit=c.isPhotoEdit,O.image_offset=cur.shareShowImg),extend(O,{url:c.url,module:cur.module,mode:c.mode,title:Object(i.F)(c.title),description:Object(i.F)(c.description),button_text:Object(i.F)(c.button_text),button_action:c.button_action,extra:c.extra,extra_data:c.extraData,photo_url:c.video?"":Object(i.F)(c.photo_url),placeholder_inserted:c.placeholder_inserted,open_graph_data:(c.openGraph||{}).data,open_graph_hash:(c.openGraph||{}).hash});break;case"page":c.initialPattern&&Object(i.I)(E)==c.initialPattern&&(O.message="");break;case"postpone":return O.postpone=val("postpone_date"+l.lnkId),void(cur.postponedLastDate=O.postpone);case"donut_duration":return;case"mark_as_ads":return void(O.mark_as_ads=1);case"pretty_cards":if(!l.prettyCardGallery)return;if(l.prettyCardGallery.needSendData())return l.prettyCardGallery.saveCards(e,(function(_){M(_)})),O.delayed=!0,!1;n=l.prettyCardGallery.getSendData().attachVal;break;case"donut_link":O["attach"+(u+1)+"_owner_id"]=null===(a=this[5])||void 0===a?void 0:a.owner_id}this[3]&&Object(i.I)(E)==this[3]&&(O.message=""),p&&this[4]&&(n+="_"+this[4]),O["attach"+(u+1)+"_type"]=r,O["attach"+(u+1)]=n,u++}})),!l.multi&&(O.postpone||(l.postponeDate&&l.postponeIsTooltip||l.postponePreview)&&(O.postpone=val("postpone_date"+l.lnkId),cur.postponedLastDate=O.postpone),!O.copyright&&l.copyrightData)){var D=l.copyrightData();D&&(O=extend(O,D))}return l.multi||O.mark_as_ads||!l.markAsAds||(O.mark_as_ads=1),O},reset:function(_){var e=_.input,t=val(e),i=_.addMedia,l={value:t};return window.Emoji?Emoji.val(e,""):e.innerHTML="",i&&(l.urlsCancelled=clone(i.urlsCancelled),i.unchooseMedia(),i.urlsCancelled=[]),Object(o.kb)(_.articleConvertEl),l},restore:function(_,e){var t=_.input,o=s.reset(_);return val(t,e.value||""),o}};e.a=s},bWc2:function(_,e,t){"use strict";t.d(e,"a",(function(){return o}));var o=function(){var _,e;return window.cur.wallLayer?null!==(_=document.getElementById("wl_reply_form"))&&void 0!==_?_:void 0:"full"===window.cur.wallType&&null!==(e=document.querySelector("#reply_box_wrap"+window.cur.oid+"_"+window.cur.pid+" .reply_box_inner_wrap"))&&void 0!==e?e:void 0}},crIy:function(_,e,t){"use strict";t.d(e,"c",(function(){return d})),t.d(e,"b",(function(){return E})),t.d(e,"d",(function(){return O})),t.d(e,"a",(function(){return u}));var o=t("HLtZ"),i=t("fBgk"),l=t("Rafy"),a=t("qYuU"),r=t("pruO"),n=t("vkmG"),s=function(){return(s=Object.assign||function(_){for(var e,t=1,o=arguments.length;t<o;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(_[i]=e[i]);return _}).apply(this,arguments)},c=Object(a.a)("reactions-storage",(function(){return new Map})),b=Object(a.a)("reactions-config",(function(){return{config:void 0}})),d=function(_){l.a&&console.log(_),Object.entries(_).forEach((function(_){var e=_[0],t=_[1],l=Object(i.i)(t,e);if(l)Object(o.c)(l.error);else{var a=t.map((function(_){return s(s({},_),{title:Object(n.a)(_.title)})}));c().set(e,Object(i.h)(e,a,{imageMenuSize:r.b,imagePreviewSize:r.c}))}}))},E=function(_){var e=c().get(_);if(!e){var t=new Error("Reaction set not found: "+_);return Object(o.c)(t,{environment:"reactions"}),void console.error(t)}return e},O=function(_){l.a&&console.log(_);var e=Object(i.g)(_);e?b().config=e:console.warn("Reactions: invalid menu config passed",_)},u=function(){var _;return null===(_=b())||void 0===_?void 0:_.config}},fBgk:function(_,e,t){"use strict";t.d(e,"a",(function(){return i})),t.d(e,"b",(function(){return l})),t.d(e,"h",(function(){return r})),t.d(e,"c",(function(){return n})),t.d(e,"d",(function(){return s})),t.d(e,"e",(function(){return c})),t.d(e,"f",(function(){return b})),t.d(e,"i",(function(){return d})),t.d(e,"g",(function(){return E}));var o=t("/bCM"),i=function(_){return _.itemsById[o.a]},l=function(_){var e;return null===(e=i(_))||void 0===e?void 0:e.title},a=function(_,e){return 0===_.length?"":(t=_,o=function(_){return Math.pow(e.width-_.width,2)+Math.pow(e.height-_.height,2)},i=!1,void 0===i&&(i=!0),t.reduce((function(_,e){var t=o(e),l=o(_);return l===t?i?_:e:l<t?_:e}))).url;var t,o,i},r=function(_,e,t){var o=t.imageMenuSize,i=t.imagePreviewSize,l=e.map((function(_){var e=_.asset,t=_.id,l=_.score,r=_.title,n=_.title_color;return{animationURL:e.animation_url||void 0,id:t,imageMenuURL:a(e.images,o),imagePreviewURL:a(e.images,i),score:l,title:r,titleColor:n}})),r={};return l.forEach((function(_){r[_.id]=_})),{id:_,items:l,itemsById:r}},n=function(_){return _===o.d},s=function(_){return Number.isInteger(_)&&_>=o.c&&_<=o.b},c=function(_){var e=parseInt(_,10);return s(e)?{isValid:!0,value:e}:{isValid:!1}},b=function(_){var e=c(_);return e.isValid?e.value:o.d},d=function(_,e){if(_.length<o.e)return{error:new Error("Invalid reactions items count in set '"+e+"': "+_.length)}},E=function(_){var e;if(null!==(e=_)&&"object"==typeof e&&("number"==typeof _.menuShowDelay||void 0===_.menuShowDelay))return{menuShowDelay:_.menuShowDelay}}},ha24:function(_,e,t){"use strict";function o(_){var e=_.match(/^([a-z_]+)([0-9\-_]+)$/);return e?{objectType:e[1],objectId:e[2]}:null}t.d(e,"d",(function(){return o})),t.d(e,"b",(function(){return i})),t.d(e,"c",(function(){return l})),t.d(e,"a",(function(){return a}));var i=function(_){return"wall"+_},l=function(_){return"wall_reply"+_},a=function(_){var e;return null!==(e=_.querySelector(".like_button_count"))&&void 0!==e?e:void 0}},hzb7:function(_,e,t){"use strict";t.d(e,"a",(function(){return p})),t.d(e,"d",(function(){return w})),t.d(e,"e",(function(){return P})),t.d(e,"f",(function(){return u})),t.d(e,"b",(function(){return C})),t.d(e,"c",(function(){return T}));var o,i=t("k487"),l=t("zxIV"),a=t("Egk5"),r=t("t7n3");!function(_){_.topicId="topic_id"}(o||(o={}));var n=function(){return(n=Object.assign||function(_){for(var e,t=1,o=arguments.length;t<o;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(_[i]=e[i]);return _}).apply(this,arguments)},s=new Map,c=function(_,e){return function(_,e){return s.set(_,e)}(_,{actionParams:void 0,selector:e})},b=function(_,e){!function(_,e){var t=s.get(_);void 0!==t&&s.set(_,e(t))}(_,(function(_){return n(n({},_),{actionParams:e})}))},d=function(_,e){var t;b(_,((t={})[o.topicId]=e,t))},E=function(_){return"post_discover_category_btn"+_},O=function(_,e){var t,o,i=(t={link_id:String(e)},(o=Object(r.n)("postCategorySelect",t))?Object(l.rb)(o):null);if(_ instanceof HTMLElement&&i instanceof HTMLElement)return _.appendChild(i),i},u=function(_){var e,t;null===(t=null===(e=function(_){return s.get(_)}(_))||void 0===e?void 0:e.selector)||void 0===t||t.tooltipHide()},p=function(_){var e,t,i=null===(t=function(_){var e;return null===(e=s.get(_))||void 0===e?void 0:e.actionParams}(_))||void 0===t?void 0:t[o.topicId];return void 0!==i&&-1!==i?((e={})[o.topicId]=i,e):void 0},P=function(_){return!0===(null==_?void 0:_.wallPostTopicSettingEnabled)},w=function(_){return void 0!==_.topic_options},M=t("jE6c"),D=t("ZD4m"),m=function(){function _(_,e,t,o){var r=this;this.btnEl=_,this.containerEl=e,this.options=t,this.selectorContentEl=o,this.onOptionClickWrapper=function(){for(var _=[],e=0;e<arguments.length;e++)_[e]=arguments[e];r.tooltip.hide();var t=_[0].currentTarget;if(t instanceof HTMLElement){var o=Object(D.c)(t,"data-click-params");o&&r.selectTopicId(o.value)}},this.linkId=this.options.linkId,this.radioBtnId=E(this.options.linkId),window.radioBtns[this.radioBtnId]={val:!1,els:o.children},this.tooltip=new i.a(_,{appendTo:e,forceSide:"bottom",autoShow:!1,cls:"eltt_fancy eltt_fancy_actions",noOverflow:!1,centerShift:0,offset:[-12*(window.vk.rtl?-1:1),7],content:o,align:"left",onFirstTimeShow:function(){Object(l.xb)(o)}}),Object(l.E)('[data-onclick="togglePostTopic"]',e).forEach((function(_){Object(a.b)(_,"click",r.onOptionClickWrapper)}))}return _.create=function(e,t){var o=O(e,t.linkId);if(o){var i=this.getSelectorContentEl(o),a=Object(l.F)(".post_action_btn_layout",o);if(i&&a)return new _(a,o,t,i)}},_.getSelectorContentEl=function(_){return Object(l.F)(".post_action_tt_content",_)},_.prototype.destroy=function(){this.tooltip.destroy(),delete window.radioBtns[this.radioBtnId]},_.prototype.tooltipHide=function(){this.tooltip.hide()},_.prototype.selectTopicId=function(_){this.options.selectTopicId(this.linkId,_),this.updateViewForSelectedTopic({isTopicSelected:-1!==_,topicId:_})},_.prototype.clearSelection=function(){this.selectTopicId(-1)},_.prototype.updateViewForSelectedTopic=function(e){var t=e.isTopicSelected,o=e.topicId,i=_.getSelectOptionEl(this.containerEl,o),a=i&&Object(D.c)(i,"data-click-params"),r=Object(l.F)(".post_action_btn_text",this.containerEl);if(i&&a&&r){var n=a.label;window.radiobtn(i,void 0,E(this.options.linkId));var s=r.getAttribute("data-empty")||"",c=t?n:s;r.innerHTML=c,r.setAttribute("aria-label",Object(M.q)(c)),Object(l.zb)(this.containerEl,"on",t)}},_.getSelectOptionEl=function(_,e){return Object(l.F)('[data-value="'+e+'"]',_)},_}(),f=function(_,e,t){var i=m.create(e,{linkId:_,selectTopicId:d});if(i)return c(_,i),i.selectTopicId(t[o.topicId]),{clearSelection:function(){i.clearSelection()},onDestroy:function(){i.destroy()}}},C=function(_,e){var t;return f(_,e,((t={})[o.topicId]=-1,t))},T=function(_,e,t){var i,l;return f(_,e,((i={})[o.topicId]=null!==(l=t[o.topicId])&&void 0!==l?l:-1,i))}},oBWH:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("HEwt"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("a1Th"),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("Btvt"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("rGqo"),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("rE2o"),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ioFf"),core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("91GP"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("KKXr"),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("SRfc"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("pIFo"),_lib_dom__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("zxIV"),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("cGUQ"),_lib_feature_entries__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("/PiP"),_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("Egk5"),_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("FWc3"),_lib_message_box__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("EasH"),_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("v+DW"),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("Xrg9"),_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("t7n3"),_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("98sY"),_lib_box_utils__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("kcIO"),_lib_stats__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("XzvV"),_shared_lib_debounce__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("BJj/"),_lib_scroll__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("lXE5"),_lib_video__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("Ia1d"),_lib_fx__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("7jxN"),_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("4+be"),_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("821F");function _slicedToArray(_,e){return _arrayWithHoles(_)||_iterableToArrayLimit(_,e)||_unsupportedIterableToArray(_,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(_,e){if(_){if("string"==typeof _)return _arrayLikeToArray(_,e);var t=Object.prototype.toString.call(_).slice(8,-1);return"Object"===t&&_.constructor&&(t=_.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(_,e):void 0}}function _arrayLikeToArray(_,e){(null==e||e>_.length)&&(e=_.length);for(var t=0,o=new Array(e);t<e;t++)o[t]=_[t];return o}function _iterableToArrayLimit(_,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(_)){var t=[],o=!0,i=!1,l=void 0;try{for(var a,r=_[Symbol.iterator]();!(o=(a=r.next()).done)&&(t.push(a.value),!e||t.length!==e);o=!0);}catch(_){i=!0,l=_}finally{try{o||null==r.return||r.return()}finally{if(i)throw l}}return t}}function _arrayWithHoles(_){if(Array.isArray(_))return _}function _extends(){return(_extends=Object.assign||function(_){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(_[o]=t[o])}return _}).apply(this,arguments)}var Page={_adBlockSeenStorage:{},_postsClearTimeoutsCalls:0,initUploadForImagePaste:function initUploadForImagePaste(txtEl,addMedia,blob){stManager.add([jsc("web/upload.js")],(function(){addMedia.menu&&addMedia.menu.activate();var uploadEl=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.g)("div",{className:"post_upload_wrap fl_r",innerHTML:'<div id="page_field_upload" class="post_upload"></div>'});Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.z)(uploadEl,txtEl);var uploadData=window.wkcur?wkcur.wallUploadOpts:cur.wallUploadOpts;if(void 0!==addMedia.clipboardImageUploadIndex)Upload.onFileApiSend(addMedia.clipboardImageUploadIndex,[blob]);else{var composer=txtEl&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.l)(txtEl,"composer"),composerOpts=composer&&composer.options&&composer.options.media&&composer.options.media.options||{},limit=composerOpts&&composerOpts.limit||2;addMedia.clipboardImageUploadIndex=Upload.init(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.x)(uploadEl),uploadData.url,uploadData.params,{file_name:"photo",file_size_limit:26214400,file_types_description:"Image files (*.jpg, *.jpeg, *.png, *.gif)",file_types:"*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG;*.gif;*.GIF",file_input:null,accept:"image/jpeg,image/png",file_match:uploadData.opts.ext_re,lang:uploadData.opts.lang,wiki_editor:0,onUploadStart:function(_,e){var t=void 0!==_.ind?_.ind:_,o=Upload.options[t];"form"==Upload.types[t]&&(geByClass1("file",ge("choose_photo_upload")).disabled=!0),"fileApi"==Upload.types[t]&&(cur.notStarted&&(cur.preventBoxHide||boxQueue.hideLast(),delete cur.notStarted),o.multi_progress&&this.onUploadProgress(_,0,0))},onUploadComplete:function onUploadComplete(info,res){var params,i=void 0!==info.ind?info.ind:info,fileName=(info.fileName?info.fileName:info).replace(/[&<>"']/g,"");try{params=eval("("+res+")")}catch(_){params=Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_11__.fromQueryString)(res)}params.photos?ajax.post("al_photos.php",extend({act:"choose_uploaded"},params),{onDone:function(_,e){e.uploadNum=i,addMedia.chooseMedia("photo",_,extend(e,{upload_ind:i+"_"+fileName}))},onFail:function(){}}):Upload.onUploadError(info)},onUploadProgress:function(_,e,t){var o=void 0!==_.ind?_.ind:_;if("fileApi"==Upload.types[o]){var i=(cur.attachMediaIndexes||{})[o];if(void 0===i||i&&cur.addMedia[i].chosenMedia||cur.imMedia){var l={loaded:e,total:t};_.fileName&&(l.fileName=_.fileName.replace(/[&<>"']/g,"")),addMedia.showMediaProgress("photo",o,l)}}},onUploadError:WallUpload.uploadFailed,onCheckServerFailed:function(){delete cur.uploadInited,WallUpload.hide()},onUploadCompleteAll:function(_){"form"==Upload.types[_]&&Upload.embed(_)},onCheckComplete:function(_){Upload.types[_]="fileApi",Upload.onFileApiSend(_,[blob])},customShowProgress:function(){},noFlash:1,multiple:1,multi_progress:1,max_files:limit,chooseBox:1,clear:1,type:"photo",max_attempts:3,server:uploadData.opts.server,error:uploadData.opts.default_error,error_hash:uploadData.opts.error_hash})}}))},buildMediaLinkEl:function(_,e){return'<div class="page_media_link_url '+(e?"page_market_owner_link":"")+'">'+(e?"":'<div class="page_media_link_icon"></div>')+'<div class="page_media_link_text">'+_+"</div></div>"},showManyPhoto:function(_,e,t,o){var i=[];return each(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(_).childNodes,(function(_,e){var t=(e&&e.getAttribute&&e.getAttribute("onclick")).match(/'(-?\d+_\d+)'\s*,\s*'([a-f0-9]{18})'/i);t&&i.push(t[1]+"/"+t[2])})),o.additional={draft_photos:i.join(";")},Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_12__.D)(e,t,extend(o,{queue:1}))},inviteToGroup:function(_,e,t,o,i){var l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(_),a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(_)),r=function(_){var o=_?1:0,a=_?Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("friends_cancel_event_invite"):Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("friends_send_event_invite");l.innerHTML='<a onclick="return page.inviteToGroup(this, '+e+", "+t+", "+o+", '"+i+"')\">"+a+"</a>"};return o?(ajax.post("/al_page.php",{act:"a_cancel_invite",mid:t,gid:e,hash:i}),r(0)):(ajax.post("/al_page.php",{act:"a_invite",mid:t,gid:e,hash:i},{onDone:function(_,e){if(!_){r(0),hide(l);var t=geByClass1("error",a),o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.rb)('<div class="page_members_box_error msg"><div class="msg_text">'+e+"</div></div>");t?a.replaceChild(o,t):a.insertBefore(o,a.firstChild)}}}),r(1)),!1},moneyTransferBox:function(_,e){var t={to_id:cur.oid,from:e};"own_profile"!==e&&"own_profile_tt"!==e||(t.to_id=0,t.tab="link"),_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_27__.a.showMoneyTransferBox(t,{},_=>(setTimeout(Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.d)(Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("global_error"),_).hide,2e3),!0)),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(_)},showMoreActions:function(_){var e=geByClass1("page_actions_more",_.parentElement);e&&(hide(_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)(e))},onSubscriptionItemOnClick:function(_,e,t,o,i){var l=hasClass(_,"on");Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(_,"act",l?0:1),t&&Page.toggleSubscription(_,t,e,0,"page",(function(){var e=Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)(l?"groups_notifications_on":"groups_notifications_set_up");val(_,e),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.zb)(_,"on")})),o&&Page.toggleLiveSubscription(_,o,l?0:1,e,(function(){}),!0),i&&Page.togglePodcastsSubscription(this,i,l?0:1,e,(function(){}),!0)},toggleSubscription:function(_,e,t,o,i,l,a){var r=parseInt(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(_,"act"))?1:0,n={onDone:function(e){l?l(e,r?0:1,_):(val(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.O)("span",_),e),_.setAttribute("data-act",r?0:1))}};a||(n.showProgress=Page.actionsDropdownLock.pbind(_),n.hideProgress=Page.actionsDropdownUnlock.pbind(_)),ajax.post("al_wall.php",{act:"a_toggle_posts_subscription",subscribe:r?1:0,oid:o||cur.oid,hash:e,source:i},n),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(t)},toggleLiveSubscription:function(_,e,t,o,i,l){null!=cur.toggleLiveSubscriptionAct&&(t=cur.toggleLiveSubscriptionAct),ajax.post("al_video.php?act=a_subscribe_live",{subscribe:t?1:0,owner_id:cur.oid,hash:e},{onDone:function(e){cur.toggleLiveSubscriptionAct=!t,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.zb)(_,"PageActionItem--live-unsubscribe",t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.zb)(_,"PageActionItem--live-subscribe",!t),i?i(e):val(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.O)("span",_),e)},showProgress:Page.actionsDropdownLock.pbind(_),hideProgress:Page.actionsDropdownUnlock.pbind(_)}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(o)},togglePodcastsSubscription:function(_,e,t,o,i,l){null!=cur.togglePodcastsSubscriptionAct&&(t=cur.togglePodcastsSubscriptionAct),ajax.post("al_wall.php",{act:"a_toggle_podcasts_subscription",subscribe:t?1:0,owner_id:cur.oid,hash:e},{onDone:function(e){cur.togglePodcastsSubscriptionAct=!t,i?i(e):val(_,e)},showProgress:!l&&Page.actionsDropdownLock.pbind(_),hideProgress:!l&&Page.actionsDropdownUnlock.pbind(_)}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(o)},showMessagesFromCommunityTooltip:function(_,e,t,o){null==cur.toggleMessagesFromCommunityAct&&0==e&&(o?Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_14__.c)(_,{text:t,dir:"auto",shift:[4,-3]}):Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_14__.c)(_,{text:t,dir:"auto"}))},toggleMessagesFromCommunity:function(_,e,t,o){null!=cur.toggleMessagesFromCommunityAct&&(t=cur.toggleMessagesFromCommunityAct),ajax.post("al_groups.php",{act:"a_toggle_messages_from_community",allow:t?1:0,oid:cur.oid,hash:e},{onDone:function(e){val(_,e),cur.toggleMessagesFromCommunityAct=!t},showProgress:Page.actionsDropdownLock.pbind(_),hideProgress:Page.actionsDropdownUnlock.pbind(_)}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(o)},showPageMembers:function(_,e,t){return cur.viewAsBox?(cur.viewAsBox(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(_)):!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.f)("al_page.php",{act:"box",oid:e,tab:t},{cache:1},_)},showHiddenMembersBoxInfo:()=>Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.d)(Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("groups_hidden_members_message_box_title"),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("groups_hidden_members_message_box_content")),showPageVideos:function(_,e){return cur.viewAsBox?(cur.viewAsBox(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(_)):!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("al_video.php?act=a_choose_video_box",{review:1,to_id:e},{cache:1,grey:1})},showPageAudios:function(_,e){return cur.viewAsBox?(cur.viewAsBox(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(_)):!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("/al_audio.php?act=audios_box",{oid:e},{cache:1,params:{width:638}},_)},ownerPhotoFast:function(){var _=ge("owner_photo_bubble_input");_||(_=ge("owner_photo_wrap").appendChild(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.g)("input",{type:"file",id:"owner_photo_bubble_input",onchange:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.l)(this,"changed",!0),Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("al_page.php",{act:"owner_photo_box",oid:cur.oid}).inp=this}}))),_.click()},ownerPhoto:function(_,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e||(e={});var o=_extends({stat:["owner_photo.css",jsc("web/owner_photo.js")]},t);Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("al_page.php",{act:"owner_photo_box",oid:_||cur.oid,gid:e.gid},o)},openAvatarForm:function(_){window.show(boxLayerBG),window.show(boxLoader),window.show(boxLayerWrap),window.boxRefreshCoords(boxLoader),ajax.post("al_page.php",_,{onDone:function(_){window.initOwnerAvatarEditForm(_),window.hide(boxLayerBG),window.hide(boxLoader),window.hide(boxLayerWrap)},onFail:function(){window.hide(boxLayerBG),window.hide(boxLoader),window.hide(boxLayerWrap)}})},ownerAvatarUpload:function(_){Page.openAvatarForm({act:"owner_avatar_upload",oid:_})},ownerAvatarEdit:function(_,e){Page.openAvatarForm({act:"owner_avatar_edit",oid:_,hash:e})},ownerAvatarSelect:function(_){Page.openAvatarForm({act:"owner_avatar_select",photo:_})},ownerCrop:function(_,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=_extends({stat:["owner_photo.css",jsc("web/owner_photo.js")]},t);Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("al_page.php",{hash:e,act:"owner_photo_crop",oid:_||cur.oid},o)},ownerPhotoEffects:function(_,e){var t="album"+e+"_0/rev";!cur.pvData||cur.pvShown&&cur.pvListId==t||delete cur.pvData[t],Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_12__.D)(_,t,{additional:{open_pe:1,pe_no_copy:1},loader:1,onHide:function(){cur.pvEditorSaved&&nav.reload()}})},uploadOwnerCover:function(_){return!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("al_page.php",{act:"owner_photo_box",oid:_||cur.oid,cover:1},{stat:["owner_photo.css",jsc("web/owner_photo.js")]})},editOwnerCover:function(_){Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("al_page.php",{act:"owner_cover_crop",oid:_||cur.oid},{stat:["owner_photo.css",jsc("web/owner_photo.js")]})},deleteOwnerCover:function(_,e,t){t||(t=cur.shareSetOwnPhoto),Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.d)({title:Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("groups_delete_cover_title")},Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("groups_delete_cover_confirm"),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("global_delete"),(function(o){ajax.post("al_page.php",{act:"owner_cover_remove",oid:_,hash:e,from:cur.module},{showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.o.pbind(o),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.w.pbind(o),onDone:t})}),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("global_cancel"))},editPhoto:function(_){cur.hideOther(),Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("al_page.php",extend(_||{},{act:"a_edit_photo"}),{params:{bodyStyle:"padding: 16px 7px"},stat:[jsc("web/tagger.js"),"tagger.css"]})},deletePhoto:function(_,e){cur.hideOther();var t=Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.d)({title:Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("global_warning")},Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("sure_delete_photo"),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("global_delete"),(function(){ajax.post("al_page.php",{act:"a_delete_photo",hash:e,oid:_},{showProgress:t.showProgress,hideProgress:t.hideProgress})}),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("global_cancel"))},shareCurrent:function(){var _=geByClass1("current_audio",ge("page_current_info"));return _||nav.reload(),(_=_.getAttribute("data-audio"))||nav.reload(),((_=_.split("_")).length<3||"s"!=_[2].substr(0,1))&&nav.reload(),!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("like.php",{act:"publish_box",object:"audio"+_[0]+"_"+_[1],list:_[2]+(_[3]&&"h"==_[3].charAt(0)?"_"+_[3]:"")},{stat:["page.js","page.css","wide_dd.js","wide_dd.css",jsc("web/sharebox.js")]})},playCurrent:function(_,e){var t=_.parentNode;return Page.playLive(e,{showProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.u)(t)},hideProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.i)(t)}})},playLive:function(_,e){Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_12__.l)().playLive(_,e)},audioStatusUpdate:function(_){var e=Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.l)("currinfo_audio"),t=Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_12__.l)(),o=AudioUtils.asObject(t.getCurrentAudioLs());ajax.post("al_audio.php",{act:"toggle_status",hash:_,exp:e,id:o?o.fullId:"",oid:vk.id},{onDone:function(_,e){vk.id==cur.oid&&_&&(val("current_info",_),t.setStatusExportInfo(e,!0))},onFail:()=>!0})},audioListenersOver:function(_,e){Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_14__.c)(_,{url:"al_audio.php",params:{act:"listeners_tt",oid:e},slide:15,shift:[24,10,10],ajaxdt:100,showdt:400,hidedt:200,asrtl:1,dir:"auto",typeClass:"audio_tt",appendParentCls:"scroll_fix_wrap"})},showAudioListeners:function(_,e){function t(){var _=ge("listeners_more_link"),e=ge("listeners_more_link_trigger");Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.fb)(e)&&boxLayerWrap.scrollHeight-500<boxLayerWrap.scrollTop+boxLayerWrap.offsetHeight&&(hide(e),_.click())}return e.cancelBubble=!0,cur.audioListenersOnDone={onHide:function(){Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(window.boxLayerWrap,"scroll",t)},onDone:function(_,e){window.audioListenersOffset=0,e?Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(window.boxLayerWrap,"scroll",t):(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.kb)("listeners_more_link"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.kb)("listeners_more_link_trigger"))}},!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("/al_audio.php",{act:"listeners_box",oid:_},extend(cur.audioListenersOnDone,{cache:1}))},moreAudioListeners:function(_){window.audioListenersOffset+=50;var e=geByClass1("fans_rows"),t=ge("listeners_more_link");ajax.post("/al_audio.php",{act:"listeners_box",oid:_,offset:window.audioListenersOffset},{onDone:function(_,o){for(var i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.g)("div",{innerHTML:_}),l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.x)(i);l;l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.x)(i))e.appendChild(l);if(o){var a=ge("listeners_more_link_trigger");Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)(a)}else Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.kb)(t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.kb)("listeners_more_link_trigger")},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.o.pbind(t),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.w.pbind(t)})},postsUnseen:function(_){window._postsExtras||(window._postsExtras={});var e=Date.now(),t=!1;for(var o in _)for(var i in _[o])if("module"!=i&&"index"!=i&&"q"!=i&&"block"!=i&&"contain_ids"!=i){var l=window._postsExtras[i];l&&-1==l.diff&&(l.diff=e-l.start,t=!0)}t&&Page.postsClearTimeouts()},postsSeen:function(_){if(vk.id&&_.length&&!vk.pd){window._postsSeenModules||(window._postsSeenModules={}),window._postsExtras||(window._postsExtras={});var e,t=Date.now(),o=Page._adBlockSeenStorage;for(var i in _){var l=Page.getPostModuleCode(_[i].module?_[i].module:""),a=_[i].index,r=_[i].q,n=_[i].block,s=_[i].contain_ids;for(var c in _[i].hash&&!window._postsViewHash&&(window._postsViewHash=_[i].hash),_[i])if("module"!=c&&"index"!=c&&"q"!=c&&"hash"!=c&&"block"!=c&&"contain_ids"!=c){window._postsSeenModules[c]=l;var b=_[i][c],d=ge("post"+c);if(c in o||(o[c]=!(!d||!attr(d,"data-ad-view"))),!o[c]){var E=window._postsSeen[c],O=window._postsSaved[c];if(-1==O||-1==E||1==b&&(O||E))continue}var u=0;if(d){u=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.S)(d)[1];var p=geByClass1("replies",d);p&&(u-=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.S)(p)[1])}window._postsSeen[c]=b,e=b,window._postsExtras[c]={start:t,diff:-1,index:a,q:r,block:n,postHeight:u,viewportHeight:window.clientHeight(),session_id:cur.feed_session_id?cur.feed_session_id:"na",contain_ids:s||""},Wall.triggerAdStat(c,_[i].long?"impression_long":"impression")}}e&&Page.postsClearTimeouts()}},postsClearTimeouts:function(){clearTimeout(window._postsSaveTimer),clearTimeout(window._postsSendTimer),++Page._postsClearTimeoutsCalls<10?(window._postsSaveTimer=setTimeout(Page.postsSave,2500),window._postsSendTimer=setTimeout(Page.postsSend,5e3)):(Page._postsClearTimeoutsCalls=0,Page.postsSave(),Page.postsSend())},postsSave:function(){if(!_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.checkVersion()||Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.u)(window._postsSeen))return window._postsSeen;var _,e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_sent")||{},t=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_seen")||{},o=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_seen_modules")||{},i=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_extras")||{},l=Math.floor((vk.ts+Math.floor((Date.now()-vk.started)/1e3))/3600),a=Page._adBlockSeenStorage;for(var r in window._postsExtras||(window._postsExtras={}),window._postsSeen){var n=window._postsSeen[r];window._postsExtras[r]&&(i[r]={diff:window._postsExtras[r].diff,index:window._postsExtras[r].index,q:window._postsExtras[r].q,session_id:window._postsExtras[r].session_id?window._postsExtras[r].session_id:"na",postHeight:window._postsExtras[r].postHeight,viewportHeight:window._postsExtras[r].viewportHeight,block:window._postsExtras[r].block,contain_ids:window._postsExtras[r].contain_ids},delete window._postsExtras[r]);var s=r.split("_");"ad"!==s[0]&&"adsite"!==s[0]&&"posthashtag"!==s[0]&&"block"!==s[0]&&"contain_ids"!==s[0]&&(s[0]=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.r)(s[0]),s[1]&&"p"==s[1].substr(0,1)||(s[1]=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.r)(s[1])));var c=(e[s[0]]||{})[s[1]],b=s&&"block"===s[0]&&4===Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.r)(s[1]),d=s&&"block"===s[0]&&"market-items"===s[1];s[0]!=vk.id&&(b||d||a[r]||!c||-1==n&&c>0)&&(t[s[0]]||(t[s[0]]={},delete o[r]),(!t[s[0]][s[1]]||-1==n&&t[s[0]][s[1]]>0)&&(_=t[s[0]][s[1]]=l*n,o[r]=window._postsSeenModules[r])),window._postsSaved[r]=n}window._postsSeen={},window._postsSeenModules={},_&&(_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("posts_seen",t),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("posts_seen_modules",o),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("posts_extras",i))},getPostModuleCode:function(_){switch(_){case"feed":return"f";case"public":case"groups":return"c";case"profile":return"p";case"wall":return"w";case"wall_top":return"tw";case"feed_search":return"s";case"feed_news_recent":case"feed_news":return"rf";case"feed_news_top":return"tf";case"feed_recommended":case"feed_recommended_recent":return"d";case"feed_recommended_top":return"e";case"feed_other":return"o";case"feed_friends":case"feed_friends_recent":return"rr";case"feed_friends_top":return"tr";case"feed_podcasts":case"feed_podcasts_top":case"feed_podcasts_recent":return"h";case"feed_groups":case"feed_groups_recent":return"rg";case"feed_groups_top":return"tg";case"feed_videos":case"feed_videos_recent":return"rv";case"feed_videos_top":return"tv";case"feed_photos":case"feed_photos_recent":return"rp";case"feed_photos_top":return"tp";case"feed_list_recent":return"rl";case"feed_list_top":return"tl";case"groups_ads_promoted_post":return"ag";case"public_ads_promoted_post":return"ap";default:return"u"}},postsSend:function(){var _={},e={},t={};if(_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.checkVersion())_=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_seen"),e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_seen_modules")||{},t=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_extras")||{};else{var o=Page.postsSave();for(var i in o){var l=o[i],a=i.split("_");"ad"!==a[0]&&"posthashtag"!==a[0]&&(a[0]=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.r)(a[0]),"p"!=a[1].substr(0,1)&&(a[1]=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.r)(a[1]))),_[a[0]]||(_[a[0]]={}),(!_[a[0]][a[1]]||-1==l&&_[a[0]][a[1]]>0)&&(_[a[0]][a[1]]=l)}}var r=[],n=[];for(var s in _){var c=[];for(var b in _[s]){var d=s+"_"+b,E=e[d]||"",O=t[d],u="s"==E&&O&&O.q?O.q:"";u=u.replace(/[,;:]/g,"");var p=O&&O.session_id?O.session_id:"na",P="";O&&"ad"!==s&&"posthashtag"!==s&&(P=(P=":"+[O.diff,O.index,p,u||"",O.block||"",O.contain_ids||""].join(":")).replace(/:+$/,"")),O&&O.postHeight&&n.push([d,O.postHeight,O.viewportHeight].join(":")),c.push(E+(_[s][b]>0?b:-b)+P)}c.length&&r.push(s+"_"+c.join(","))}if(r.length){if(!vk.id)return Page.postsClear();var w={act:"seen",data:r.join(";"),meta:n.join(";")};window._postsViewHash&&(w.hash=window._postsViewHash),ajax.post("al_page.php",w,{onDone:function(){if(!_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.checkVersion())return extend(window._postsSaved,window._postsSeen);var e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_seen")||{},t=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_sent")||{},o=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_seen_modules");for(var i in _){var l=void 0;for(l in _[i])t[i]||(t[i]={}),-1!=t[i][l]&&(t[i][l]=_[i][l]),(e[i]||{})[l]&&(delete e[i][l],delete o[i+"_"+l]);e[i]&&Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.u)(e[i])&&(delete e[i],delete o[i+"_"+l])}_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("posts_seen",e),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("posts_sent",t),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("posts_seen_modules",o),clearTimeout(window._postsCleanTimer),window._postsCleanTimer=setTimeout(Page.postsClean,1e4)}})}},postsClean:function(){if(window.curNotifier&&curNotifier.idle_manager&&!curNotifier.idle_manager.is_idle)return Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__.b)("waiting ls clean.."),clearTimeout(window._postsCleanTimer),void(window._postsCleanTimer=setTimeout(Page.postsClean,1e4));Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__.b)("cleaning ls..");var _=Math.floor((vk.ts+Math.floor((Date.now()-vk.started)/1e3))/3600),e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_sent")||{};for(var t in e){for(var o in e[t]){var i=e[t][o];_-(i>0?i:-i)>24&&delete e[t][o]}Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.u)(e[t])&&delete e[t]}_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("posts_sent",e),Wall.cleanAdsEvents()},postsClear:function(){_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("posts_seen",{}),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("posts_extras",{}),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("posts_sent",{}),window._postsSaved={},window._postsSeen={},window._postsSeenModules={},window._postsExtras={},_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set(Wall.LS_ADS_EVENTS,Wall._lsAdsEvents={})},showContacts:function(_,e,t){Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("/al_page.php",{act:"a_get_contacts",oid:_,edit:e}).setOptions({onHideAttempt:function(){return cur.reloadAfterClose&&(t?t():(nav.reload({noscroll:!0}),cur.reloadAfterClose=!1)),!0}})},showContactTT:function(_,e){Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_14__.c)(_,{text:()=>e,slideX:15,className:"pedit_tt",hasover:1,shift:[-Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.S)(_)[0]-10,-15,-15],dir:"left",appendParentCls:"scroll_fix_wrap",onCreate:function(){_.tt&&setTimeout(_.tt.hide,3e3)}})},editContact:function editContact(oid,mid,hash,callback){var b=Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("al_page.php",{act:"a_edit_contact_box",mid,oid}).setButtons(Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("global_save"),(function(btn){function onSearch(){var params={act:"a_add_contact",mid,oid};params.hash=hash,hash||(params.hash=ge("group_contact_hash").value),params.title=val("group_contact_position"),params.phone=val("group_contact_phone"),params.email=val("group_contact_email"),mid||!ge("group_contact_memlink")||(params.page=val("group_contact_memlink"),params.page||params.phone||params.email)?ajax.post("al_page.php",params,{onDone:function onDone(res,script){b.hide();var box=Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_20__.b)();if(box){if(box.content(res),ge("public_contacts_list")&&ge("public_contacts_list").sorter&&ge("public_contacts_list").sorter.destroy(),script)try{eval(script)}catch(_){Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__.d)(_,script)}Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.yb)("group_add_contact",ge("public_contacts_list").childNodes.length<30)}else Page.showContacts(oid,1,callback)},onFail:function(_){if(ge("group_contact_error"))return ge("group_contact_error").innerHTML=_,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)("group_contact_error_wrap"),!0},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.o.pbind(btn),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.w.pbind(btn)}):b.hide()}cur.reloadAfterClose=!0,mid||cur.lastContact==val("group_contact_memlink")?onSearch():Page.searchContact(oid,val("group_contact_memlink"),onSearch)}),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("global_cancel"));return!1},searchContact:function(_,e,t){if(!Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.I)(e))return cur.lastContact="",void(t&&t());e!=cur.lastContact&&ajax.post("al_page.php",{act:"a_search_contact",oid:_,page:e},{onDone:function(_,o,i,l){cur.lastContact=e,ge("group_contact_name").innerHTML=i,ge("group_contact_image").innerHTML=o,ge("group_contact_hash").value=l,_?t?t():hide("group_contact_error_wrap"):(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.q)("group_contact_memlink","",!0),hide("group_contact_error_wrap"))}})},deleteContact:function deleteContact(oid,mid,hash){return cur.reloadAfterClose=!0,ajax.post("al_page.php",{act:"a_delete_contact",oid,mid,hash},{onDone:function onDone(res,script){var box=Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_20__.b)();if(box.content(res),ge("public_contacts_list")&&ge("public_contacts_list").sorter&&ge("public_contacts_list").sorter.destroy(),script)try{eval(script)}catch(_){Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__.d)(_,script)}Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.yb)("group_add_contact",ge("public_contacts_list").childNodes.length<30)}}),!1},reorderContacts:function(_,e,t,o,i){var l=t.id.replace("group_contact_cell",""),a=(o&&o.id||"").replace("group_contact_cell",""),r=(i&&i.id||"").replace("group_contact_cell","");cur.reloadAfterClose=!0,ajax.post("/al_page.php",{act:"a_reorder_contacts",oid:_,mid:l,before:a,after:r,hash:e})},initStatusEditable:function(_){if(_.emojiInited)return!1;_.emojiInited=!0,stManager.add([jsc("web/emoji.js"),"notifier.css"],(function(){Emoji.init(_,{ttDiff:-48,rPointer:!0,controlsCont:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(_),noStickers:!0,forceEnterSend:!0,ref:"status",onSend:Page.infoSave,checkEditable:function(){var e=Emoji.editableVal(_);e.length>140&&(Emoji.val(_,Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.c)(e.substr(0,140))),Emoji.editableFocus(_,!1,!0))}})}))},infoEdit:function(_){if(cur.viewAsBox)return cur.viewAsBox();var e=ge("current_info").tt;e&&e.hide&&e.hide({fasthide:!0}),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)("currinfo_editor","currinfo_fake"),hide("currinfo_wrap"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.fb)("currinfo_app")&&!cur.ciApp?(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)("currinfo_audio"),hide("currinfo_app")):cur.ciApp&&(hide("currinfo_audio"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)("currinfo_app"));var t=ge("current_info").firstChild,o=ge("currinfo_input"),i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.O)("a",t);if(Page.initStatusEditable(o,cur.infoOld),cur.infoEditing="my_current_info"==t.className,cur.infoEditing){var l=i?i.innerHTML:t.innerHTML;l=l.replace(/<img[^>]+alt="([^"]+)"[^>]*>/g,"$1"),cur.infoOld=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.I)(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.c)(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.H)(l)))}else cur.infoOld="";return window.Emoji?(Emoji.val(o,Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.N)(cur.infoOld)),Emoji.editableFocus(o,!1,!0,!0)):(val(o,Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.N)(cur.infoOld)),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.H)(o)),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(window,"keydown",Page.infoKeydown),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(document,"mousedown",Page.infoMousedown),ge("currinfo_save").onclick=Page.infoSave,!1},infoCancel:function(){hide("currinfo_editor","currinfo_fake"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)("currinfo_wrap"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.i)("currinfo_save","currinfo_cancel"),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(window,"keydown",Page.infoKeydown),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(document,"mousedown",Page.infoMousedown),cur.ciApp=!1},infoShowShare:function(){if(cur.viewAsBox)return cur.viewAsBox();var _=ge("current_info"),e=Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("share_current_info");Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_14__.c)(_,{content:'<div class="content"><div class="checkbox">'+e+"</div></div>",className:"share_tt",init:function(){Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(geByClass1("checkbox",_.tt.container),"click",(function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.c)(this),ajax.post("al_page.php",{act:"share_currinfo",hash:cur.options.info_hash,oid:cur.oid,checked:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.l)(this)},{onDone:Wall.receive})}))},toup:!1,showdt:0,slide:10,shift:[6,8,8],dir:"auto",hidedt:200,onClean:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.i)(geByClass1("checkbox",_.tt.container))}})},infoKeydown:function(_){_.keyCode==KEY.ESC&&Page.infoCancel()},infoMousedown:function(_){for(var e=_.target;e.parentNode;){if("currinfo_editor"==e.id)return;e=e.parentNode}Page.infoCancel()},infoSave:function(){if(cur.viewAsBox)return cur.viewAsBox();var _=ge("currinfo_input"),e=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.I)((window.Emoji?Emoji.editableVal:val)(_)).replace(/\n/g," ");if(e==cur.infoOld||e==Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.N)(cur.infoOld))return Page.infoCancel();e=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.I)(e).substr(0,140),ajax.post("al_page.php",{act:"current_info",oid:cur.oid,info:e,hash:cur.options.info_hash},{onDone:function(){var _=e?"my":"no",t=e?'<span class="current_text">'+Emoji.emojiToHTML(e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;"),!0)+"</span>":Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("change_current_info");ge("current_info").innerHTML=ge("currinfo_fake").innerHTML='<span class="'+_+'_current_info">'+t+"</span>",Page.infoCancel();var o=ge("current_info"),i=o.tt;i&&i.el&&(i.destroy(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(o,"mouseover")),e&&(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(o,"mouseover",Page.infoShowShare),Page.infoShowShare())},onFail:function(_){if(!_)return!0},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.o.pbind("currinfo_save"),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.w.pbind("currinfo_save"),stat:[jsc("web/tooltips.js"),"tooltips.css",jsc("web/emoji.js")]})},showGifBox:function(_,e,t,o,i,l){l&&(l.ctrlKey||l.metaKey||l.shiftKey)||(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(l),Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("docs.php",{act:"show_box",doc_id:_,doc_owner_id:e,post_id:t,post_owner_id:o,hash:i},{stat:[window.jsc("web/docs.js"),"docs.css"],params:{white:!0,hideButtons:!0},onDone:function(_,e){if(!vk.widget){if(Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_20__.b)().setOptions({width:e.width+50}),cur.gifAdded&&cur.gifAdded[e.doc]){var t=geByClass1("docs_gif_box_add_"+e.doc);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.pb)(t,"button_action_light_add","button_action_light_done"),val(t,Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("wall_doc_added_short"))}var o=geByClass1("page_doc_photo_href",Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_20__.b)().bodyNode);Page.showGif(o)}}}))},showGif:function(_,e,t){if(e&&(e.ctrlKey||e.metaKey))return!0;var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(_),i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(o),l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.x)(_);cur.gifAdded=cur.gifAdded||{},(cur.activeGif&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(cur.activeGif))===i||hasClass(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(cur.activeGif),"page_gif_large")&&!t)&&Page.hideGif(cur.activeGif,!1);var a,r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(_,"doc"),n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(_,"hash"),s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(_,"add-txt")||"",c=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(_,"add-hash"),b=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(_,"share-txt")||"",d=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(_,"post"),E=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(_,"reply"),O=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(_,"preview"),u=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(_,"width"),p=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(_,"height"),P=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(_,"thumb"),w=hasClass(o,"page_gif_large"),M=!e,D=!0;O||(D=!1);var m=_.href+"&wnd=1&module="+cur.module;D?(a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.g)("video",{autoplay:!0,muted:!0,loop:"loop",poster:P,src:m+"&mp4=1",className:"pages_gif_img page_gif_big"},{width:u?u+"px":void 0,height:p?p+"px":void 0,background:w?"transparent url("+P+") no-repeat 0 0":"",backgroundSize:"cover"}),attr(a,"webkit-playsinline",""),browser.ipad&&attr(a,"controls","")):a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.g)("img",{src:m,className:"pages_gif_img"},{visibility:"hidden"});var f=n?'<div class="page_gif_share" onmouseover="showTooltip(this, {text: \''+b+"', black: 1, shift: [7, 6, 6], toup: 0, needLeft: 1})\" onclick=\"return Page.shareGif(this, '"+r+"', '"+n+'\', event)"><div class="page_gif_share_icon"></div></div>':"",C=c?'<div class="page_gif_add" onmouseover="return Page.overGifAdd(this, \''+s+"', '"+r+"', event);\" onclick=\"return Page.addGif(this, '"+r+"', '"+n+"', '"+c+'\', event);"><div class="page_gif_add_icon"></div></div>':"",T=f||C?'<div class="page_gif_actions">'+f+C+"</div>":"",h='<div class="page_gif_progress_icon" style="display:none;">'+Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.qb)(vk.pr_tpl,{id:"",cls:""})+"</div>",v=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.g)("a",{href:_.href,className:"page_gif_preview"+(cur.gifAdded[r]?" page_gif_added":""),innerHTML:h+T,onclick:_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c},{backgroundImage:D?"":(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.T)(l,"backgroundImage")||"").replace(/"/g,"'"),backgroundSize:D?"":(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.T)(l,"backgroundSize")||"").replace(/"/g,"'"),width:u?u+"px":void 0,height:p?p+"px":void 0}),A=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.x)(v);v.appendChild(a),cur.activeGif=v,o!==Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(_)&&Wall.sendInsertBeforeError(),o.insertBefore(v,_),hide(_);var W,L=!1,g=function(){var _=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.S)(a);(_[0]||_[1])&&(clearInterval(W),delete a.onload,delete a.onloadeddata,L=!0,hide(A),v.style.background="",v.setAttribute("onclick","return Page.hideGif(this, event);"),addClass(a,"page_gif_big"),addClass(v,"page_gif_loaded"),u&&(a.style.width=u+"px"),p&&(a.style.height=p+"px"),a.style.visibility="",Object(_lib_stats__WEBPACK_IMPORTED_MODULE_21__.bb)("gif_play",0,D?"mp4":"gif",M?1:0))};e?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)(A):setTimeout((function(){L||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)(A)}),300),D?a.onloadeddata=g:(W=setInterval(g,10),a.onload=g),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(o,"playing",1);var R=M?"autoplay":"manual",j=cur.module||"other",I=d?"post":E?"reply":"";if(Object(_lib_stats__WEBPACK_IMPORTED_MODULE_21__.bb)("gif_show",R,j,I),d){var B=d.split("_"),U=B[0],K=B[1];Object(_lib_stats__WEBPACK_IMPORTED_MODULE_21__.bb)("show_post_gif",1,U,K)}return Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(e)},hideGif:function(_,e){if(e&&(e.ctrlKey||e.metaKey))return!0;var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(_),o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.B)(_);return t.removeAttribute("data-playing"),e&&removeClass(t,"page_gif_autoplay"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.kb)(_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)(o),delete cur.activeGif,!1},overGifAdd:function(_,e,t,o){return cur.gifAdded=cur.gifAdded||{},cur.gifAdded[t]&&!(e=cur.gifAdded[t].tooltip)||Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_14__.c)(_,{text:e,black:1,shift:[7,6,6],toup:0,needLeft:1}),!1},addGif:function(_,e,t,o,i){if(cur.viewAsBox)return Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.j)(i),cur.viewAsBox();cur.gifAdded=cur.gifAdded||{},isObject(_.tt)&&_.tt.hide();var l=hasClass(_,"button_action_light");return cur.gifAdded[e]?ajax.post("docs.php",{act:"a_delete",oid:vk.id,did:cur.gifAdded[e].did,hash:cur.gifAdded[e].hash},{onDone:function(){if(l)Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.pb)(_,"button_action_light_done","button_action_light_add"),val(_,Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("wall_doc_add_short"));else{var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.Y)("page_gif_large",_)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(_);removeClass(t,"page_gif_added"),_.tt&&_.tt.el&&_.tt.destroy()}delete cur.gifAdded[e]}}):(addClass(_,"page_gif_adding"),ajax.post("docs.php",{act:"a_add",doc:e,hash:t,add_hash:o},{onDone:function(t,o,i,a){if(Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_20__.f)(t),l)Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.pb)(_,"button_action_light_add","button_action_light_done"),val(_,Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("wall_doc_added_short"));else{var r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.Y)("page_gif_large",_)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(_);addClass(r,"page_gif_added"),_.tt&&_.tt.el&&_.tt.destroy()}cur.gifAdded[e]={tooltip:o,did:i[0],hash:a}}})),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(i)},shareGif:function(_,e,t,o){return cur.viewAsBox?(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.j)(o),cur.viewAsBox()):(isObject(_.tt)&&_.tt.hide(),window.showBox("like.php",{act:"publish_box",object:"doc"+e,list:t},{stat:["wide_dd.js","wide_dd.css",jsc("web/sharebox.js")]}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(o))},initGifAutoplay:function(){if(!(cur.gifAutoplayScrollHandler||browser.mobile||cur.viewAsBox)){var _=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.S)("page_header")[1],e=Object(_shared_lib_debounce__WEBPACK_IMPORTED_MODULE_22__.a)((function(){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.K)("page_gif_autoplay");if(!(!e.length||window.wkcur&&wkcur.shown)){var t,o,i,l=(window.innerHeight||document.documentElement.clientHeight)-_,a=_+l/2,r=Math.min(l,800),n=a-r/2,s=a+r/2,c=e.length-1,b=-1;if(cur.activeGif){var d=cur.activeGif.getBoundingClientRect();if(d.top>n&&d.bottom<s){if(d.top<a&&d.bottom>a)return;var E=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.p)(e,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(cur.activeGif)),O=Math.min(Math.abs(l/2-d.top),Math.abs(l/2-d.bottom));t={el:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(cur.activeGif),distanceToMiddle:O},E>-1&&(c=E,b=Math.abs(l/2-d.top)<Math.abs(l/2-d.bottom)?-1:1)}else inArray(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(cur.activeGif),e)&&Page.hideGif(cur.activeGif)}for(;o=e[c];){var u=o.getBoundingClientRect(),p=u.width&&u.height&&u.top>n&&u.bottom<s;if(p&&0==c&&Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)()<300){t={el:o,distanceToMiddle:i};break}if(p){if(i=Math.min(Math.abs(l/2-u.top),Math.abs(l/2-u.bottom)),t&&i>t.distanceToMiddle)break;t={el:o,distanceToMiddle:i}}c+=b}if(t&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.x)(t.el)!==cur.activeGif){Page.showGif(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.x)(t.el));for(var P,w=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.p)(e,t.el)+1;P=e[w++];){var M=P.getBoundingClientRect();if(M.width&&M.height){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.g)("video",{src:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.x)(P).href+"&wnd=1&mp4=1",preload:"auto"});break}}}}}),50);cur.gifAutoplayScrollHandler=e,Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(window,"scroll",e),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(window,"resize",e),e(),cur.destroy.push((function(){Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(window,"scroll",e),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(window,"resize",e),e=null,delete cur.gifAutoplayScrollHandler}))}},initVideoAutoplay:function initVideoAutoplay(){if(browser.mobile||cur.videoAutoplayScrollHandler)"feed"===cur.module&&Object(_lib_stats__WEBPACK_IMPORTED_MODULE_21__.bb)("feed_init_video_autoplay",cur.videoAutoplayScrollHandler?"already_init":"bad_browser");else{var isMessagePage="im"===cur.module,chatHeader,chatWrapperUiScroll,chatHeaderHeight,chatInputBox,lastScroll,directionUp,lastAutoPlayVideo,chatHeaderBottom,chatInputBoxTop;if("feed"===cur.module)Object(_lib_stats__WEBPACK_IMPORTED_MODULE_21__.bb)("feed_init_video_autoplay","good_browser");else if(isMessagePage){var chatWrapper=geByClass1("_im_chat_body_abs");chatHeader=geByClass1("im-page--chat-header"),chatWrapperUiScroll=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.l)(chatWrapper,"ui-scroll"),chatHeaderHeight=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.S)(chatHeader)[1],chatInputBox=geByClass1("im-chat-input"),lastScroll=0,directionUp=!0,lastAutoPlayVideo=null}var canPlayHls=window.MediaSource&&MediaSource.isTypeSupported&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),noHlsMaxDuration=300,fixedHeaderHeight=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.S)("page_header")[1],scrollHandler=Object(_shared_lib_debounce__WEBPACK_IMPORTED_MODULE_22__.a)((function(_,e){if(!(layers.visible||window.mvcur&&mvcur.mvShown||nav.objLoc.z||_getFullscreenElement()||window.Calls&&window.Calls.isInActiveCall)){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.K)("page_video_autoplayable"),o=t.length;if(o&&(!e||!cur.videoInlinePlayer||cur.videoInlinePlayer.isAutoplay())){var i,l,a,r=document.body.scrollHeight-fixedHeaderHeight,n=(window.innerHeight||document.documentElement.clientHeight)-fixedHeaderHeight,s=fixedHeaderHeight+n/2,c=Math.min(n,800);isMessagePage?(a=cur.imClassicInterface?r-(n+Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)()):chatWrapperUiScroll.api.data.scrollBottom,directionUp=a>=lastScroll,lastScroll=a,(e||a&&(cur.imClassicInterface&&directionUp||!cur.imClassicInterface&&directionUp))&&(t=t.reverse()),i=s-c/2,l=a<100?n:i+c,cur.imClassicInterface?(chatHeaderBottom=chatHeader.getBoundingClientRect().top+chatHeaderHeight,chatInputBoxTop=chatInputBox.getBoundingClientRect().top):(chatHeaderBottom=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.V)(chatHeader)[1]+chatHeaderHeight,chatInputBoxTop=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.V)(chatInputBox)[1]),i<chatHeaderBottom&&(i=chatHeaderBottom),l>chatInputBoxTop&&(l=chatInputBoxTop)):l=(i=(a=Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)())<300?fixedHeaderHeight:s-c/2)+c;var b=cur.videoInlinePlayer;if(b){var d=b.isAutoplay(),E=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.q)("post",b.el),"ad-view"),O=b.el.getBoundingClientRect(),u=O.top>i&&O.bottom<l;if(!E&&d||(u=O.bottom>i&&O.bottom<l||O.top>i&&O.top<l),u){if(d&&"paused"==b.getState()&&b.play(),"ended"!=b.getState())return}else d&&!b.isActiveLive()&&b.pause()}var p=o;for(e&&lastAutoPlayVideo&&(p=t.indexOf(lastAutoPlayVideo));p--;){var P=t[p],w=hasClass(P,"VideoRestriction");if(!(!canPlayHls&&Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(P,"duration"))>noHlsMaxDuration||w)){var M=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(P,"loading"),D=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(P,"playing"),m=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.q)("post",P),"ad-view"),f=(D?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.B)(P):P).getBoundingClientRect();if(f.width&&f.height){var C=f.top>i&&f.bottom<l;if(m&&!b&&(C=f.bottom>i&&f.bottom<l||f.top>i&&f.top<l),C){if(!D&&!M){var T=_getVideoParams(P),h=Date.now();lastAutoPlayVideo=P,Object(_lib_video__WEBPACK_IMPORTED_MODULE_24__.h)(T.video,T.list,{autoplay:1,no_progress:1,cache:1,addParams:T},!1,P),Object(_lib_stats__WEBPACK_IMPORTED_MODULE_21__.bb)("page_show_inline_video",Date.now()-h),_sendLoadEvent(T),cur.videoAutoplayStat={video:T.video,launched:Date.now(),preloaded:_isPreloaded(T.video)}}break}if(!isMessagePage&&f.top<=i)break}}}var v=p+1;if(isMessagePage){if(!a)return;v=p-1}do{var A=t[v];if(A&&(canPlayHls||Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(A,"duration"))<=noHlsMaxDuration)){var W=_getVideoParams(A);_isPreloaded(W.video)||Object(_lib_video__WEBPACK_IMPORTED_MODULE_24__.d)(W,_onVideoDataLoaded,!0);break}}while(++v<o&&!isMessagePage)}}}),50);cur.videoAutoplayScrollHandler=scrollHandler,Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(window,"scroll",scrollHandler),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(window,"resize",scrollHandler),isMessagePage&&!cur.imClassicInterface&&Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(window,"imScroll",scrollHandler),scrollHandler(),cur.destroy.push((function(){Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(window,"scroll",scrollHandler),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(window,"resize",scrollHandler),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(window,"imScroll",scrollHandler),scrollHandler=null,delete cur.videoAutoplayScrollHandler}))}function _getVideoParams(thumb){var _options$addParams,videoRawId,listId,options,showInlineParamsMatch=attr(thumb,"onclick").match(/showInlineVideo\((.+)\)/);if(showInlineParamsMatch){var paramsStr=showInlineParamsMatch[1];try{var _eval=eval("["+paramsStr+"]"),_eval2=_slicedToArray(_eval,3);videoRawId=_eval2[0],listId=_eval2[1],options=_eval2[2]}catch(_){}}return videoRawId||(videoRawId=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(thumb,"video"),listId=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(thumb,"list")),options=options||{},extend(options.addParams,{video:videoRawId,list:listId,ad_data:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(thumb,"ad-data"),ad_block_id:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(thumb,"ad-block-id"),post_id:(null===(_options$addParams=options.addParams)||void 0===_options$addParams?void 0:_options$addParams.post_id)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.q)("post",thumb),"post-id"),stretch_vertical:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(thumb,"stretch-vertical")),autoplay_sound:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(thumb,"autoplay-sound")),autoplay:1,from_autoplay:1,module:options.module||currentModule()})}function _isPreloaded(_){var e=!1;return each(window.ajaxCache,(function(t,o){if(0===t.indexOf("/al_video.php?act=show_inline")&&t.indexOf("&video="+_)>0)return e=!0,!1})),e}function _sendLoadEvent(_){ajax.post("al_video.php?act=autoplay_stat",{event:"load",video:_.video,post_id:_.post_id,module:cur.module||""},{})}function _onVideoDataLoaded(_,e){if(_){var t=e[3].player.params[0];VideoPlayer.preload(t)}}function _getFullscreenElement(){return document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}},actionsDropdown:function(_,e){_||!e?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)(_):e()},actionsDropdownHide:function(_,e,t){if(1===e)return t&&t(),hide(_);clearTimeout(cur.actDdHide),cur.actDdHide=setTimeout((function(){Object(_lib_fx__WEBPACK_IMPORTED_MODULE_25__.f)(_,200,hide.pbind("page_actions_sublist")),t&&t()}),150)},actionsDropdownUnhide:function(){clearTimeout(cur.actDdHide)},actionsDropdownLocked:function(_){if(_=ge(_))return hasClass(_,"page_actions_item_lock")},lockTimeout:null,resetLockTimeout:null,actionsDropdownLock:function(_){(_=ge(_))&&hasClass(_,"page_actions_item")&&!hasClass(_,"page_actions_item_lock")&&(Page.lockTimeout&&clearTimeout(Page.lockTimeout),Page.resetLockTimeout=!1,Page.lockTimeout=setTimeout((function(){if(!Page.resetLockTimeout){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.l)(_,"inner",_.innerHTML),addClass(_,"page_actions_item_lock");var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.g)("div",{className:"page_actions_item_lock_text"});val(e,_.innerHTML),_.appendChild(e),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.u)(_)}}),500))},actionsDropdownUnlock:function(_){Page.resetLockTimeout=!0,(_=ge(_))&&hasClass(_,"page_actions_item")&&hasClass(_,"page_actions_item_lock")&&(Page.lockTimeout&&clearTimeout(Page.lockTimeout),removeClass(_,"page_actions_item_lock"),_.innerHTML=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.l)(_,"inner"))},actionsPreloadFeedLists:function actionsPreloadFeedLists(el,sh){ajax.post("al_feed.php",{act:"a_get_lists_by_item",item_id:cur.oid},{onDone:function onDone(html,js){if(sh&&!ge("page_actions_wrap")){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(el).appendChild(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.rb)(html),el);try{eval(js)}catch(_){Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__.d)(_,js)}}},cache:1})},feedListsDDShow:function(){var _=ge("page_actions_item_lists");if(addClass(_,"page_actions_item_unfolded"),ge("page_actions_sublist"))return clearTimeout(cur.feedListsDDHide),void Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)("page_actions_sublist");var e=[];for(var t in cur.options.feedLists){var o=cur.options.feedLists[t];o.length>20&&(o=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.I)(o.substr(0,18))+"..."),e.push('<a id="page_feed_item'+t+'" class="page_actions_item page_actions_subitem'+(cur.options.feedListsSet&&cur.options.feedListsSet[t]?" checked":"")+'" onclick="Page.feedListsCheck(this, '+t+');">'+o+"</a>")}e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.rb)('<div id="page_actions_sublist" onmouseover="Page.feedListsDDShow();">'+e.join("")+"</div>"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(_).appendChild(e)},feedListsDDHide:function(){clearTimeout(cur.feedListsDDHide),cur.feedListsDDHide=setTimeout((function(){hide("page_actions_sublist"),removeClass("page_actions_item_lists","page_actions_item_unfolded")}),150)},feedListsCheck:function(_,e){var t=hasClass(_,"checked");t?(cur.options.feedListsSet[e]=0,cur.options.feedListsChanges[e]=-1):(cur.options.feedListsSet[e]=1,cur.options.feedListsChanges[e]=1),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.zb)(_,"checked",!t),cur.feedListsTO&&clearTimeout(cur.feedListsTO);var o=[];for(var i in cur.options.feedListsChanges)o.push(cur.options.feedListsChanges[i]*i);o.length&&(cur.feedListsTO=setTimeout((function(){ajax.post("al_feed.php",{act:"a_toggle_lists",item_id:cur.oid,lists_ids:o.join(","),hash:cur.options.feedListsHash},{onDone:function(){cur.options.feedListsChanges={}}})})))},addAudioPreview:function(_,e){return e[AudioUtils.AUDIO_ITEM_INDEX_CONTEXT]="attach_preview",AudioUtils.drawAudio(e,"inlined")},ownerButtonClick:function(_,e,t){if(!Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.d)(t)){switch(_.type){case"open_url":if(_.is_internal&&_.open_in_layer){var o=nav.fromStr(_.url),i=o[0].replace("/","");return delete o[0],Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_12__.H)({w:i},null,null,{ads_params:o})}return nav.go(e,t)}return!1}},postAttachesShowMore:function(_,e){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.D)(_);if(t&&hasClass(t,"post_cropped_attaches")){var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.D)(t),i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.x)(t);["wall_audio_rows","post_media","post_thumbed_media"].some((function(_){return hasClass(o,_)&&hasClass(i,_)}))&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.p)(i).forEach((function(_){o.appendChild(_)})),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.kb)(i));var l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.h)(t.innerHTML);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.z)(l,t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.kb)(t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.kb)(_);var a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.Y)("post",_),r=a?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(a,"post-id"):"";if(r){var n="feed"===cur.module&&feed?feed.getModuleRef():cur.module;Object(_lib_stats__WEBPACK_IMPORTED_MODULE_21__.bb)("post_activity","expand_attach",r,n)}}return e&&Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(e)},showLoginBox:()=>(Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("al_login.php",{act:"box"}),!1),showUnblurBox(_,e,t,o,i){var l=Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.d)({title:_},e,Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("photos_restriction_button_watch"),(function(_){Page.unblurPhoto(t,o,_,(function(){l.hide(),i&&i()}))}),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("global_cancel"))},unblurPhoto(_,e,t,o){ajax.post("al_photos.php",{act:"unblur",photo_raw:_,hash:e},{showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.o.pbind(t),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.w.pbind(t),onDone:function(e){var t=[];if(e){cur.unblurredOwners||(cur.unblurredOwners=[]);var i=_.split("_")[0];cur.unblurredOwners.push(i),t=document.querySelectorAll(`.PhotosRestriction--blur[data-photo-id^='${i}'], .PostPhotoRestriction--blur[data-photo-id^='${i}'], .PostPhotoRestriction--blurWithText[data-photo-id^='${i}']`)}else t=document.querySelectorAll(`.PhotosRestriction--blur[data-photo-id='${_}'], .PostPhotoRestriction--blur[data-photo-id='${_}'], .PostPhotoRestriction--blurWithText[data-photo-id='${_}']`);if(t.forEach((function(_){removeClass(_,"PhotosRestriction--blur"),removeClass(_,"PostPhotoRestriction--blur"),removeClass(_,"PostPhotoRestriction--blurWithText");var e=_.querySelector(".PostPhotoRestriction__blurTitle"),t=_.querySelector(".PostPhotoRestriction__blurButton");e&&e.parentNode.removeChild(e),t&&t.parentNode.removeChild(t)})),cur.unblurredPhotos||(cur.unblurredPhotos=[]),cur.unblurredPhotos.push(_),cur.pvPhoto&&cur.pvCurData&&cur.pvCurData.photoRaw===_){removeClass(cur.pvPhoto,"ZPhotosRestriction--blur");var l=cur.pvPhoto.querySelector(".ZPhotosRestriction__title"),a=cur.pvPhoto.querySelector(".ZPhotosRestriction__text"),r=cur.pvPhoto.querySelector(".ZPhotosRestriction__button");l&&l.parentNode.removeChild(l),a&&a.parentNode.removeChild(a),r&&r.parentNode.removeChild(r),cur.pvCurData.restrictionBlur=!1,window.Photoview&&window.Photoview.doShow()}o&&o()}})},playVkFestBanner(){window.onDomReady((function(){setTimeout((function(){!function(){var _=ge("vk_fest_2020_banner_video");if(_){var e={video:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(_,"video"),module:currentModule()};Object(_lib_video__WEBPACK_IMPORTED_MODULE_24__.h)(e.video,"",{autoplay:1,no_progress:1,cache:1,addParams:e},!1,_)}}()}))}))},showGroupCallsOnboardingTooltip(){var _=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("group_calls_tooltip_shown")||0;_<=2&&!cur.groupCallsTooltip&&"im"!==cur.module&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.fb)("side_bar")&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.fb)("side_bar_inner")&&!cur.introTooltipShow&&setTimeout((function(){_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("group_calls_tooltip_shown",_+1);var e=()=>{cur.groupCallsTooltip&&cur.groupCallsTooltip.destroy(),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("group_calls_tooltip_shown",999)};cur.groupCallsTooltip=new ElementTooltip("l_msg",{autoShow:!1,content:Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("mail_group_calls_sidebar_tt"),cls:"feature_intro_tt feature_intro_blue_tt",forceSide:"right",width:228,appendTo:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.O)("body"),offset:[7,0,0],onHide:function(){cur.groupCallsTooltip&&(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(cur.groupCallsTooltip._ttel,"click",e),cur.groupCallsTooltip.destroy())}}),cur.groupCallsTooltip.show(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(cur.groupCallsTooltip._ttel,"click",e),cur.destroy.push((function(){cur.groupCallsTooltip&&(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(cur.groupCallsTooltip._ttel,"click",e),cur.groupCallsTooltip.destroy())}))}),1e3)}};__webpack_exports__.a=Page},"p4k+":function(_,e,t){"use strict";t.d(e,"b",(function(){return w})),t.d(e,"c",(function(){return M})),t.d(e,"e",(function(){return C})),t.d(e,"a",(function(){return T})),t.d(e,"d",(function(){return h})),t.d(e,"g",(function(){return A})),t.d(e,"f",(function(){return W}));var o=t("jE6c"),i=t("smNX"),l=t("fBgk"),a=t("zxIV"),r=t("7jxN"),n=t("4+be"),s=t("DN6O"),c=t("crIy"),b=t("WQ5g"),d=t("9xR5"),E=t("ZxpX"),O=t("t7n3"),u=function(_,e,t,o,i){var r=function(_,e,t){void 0===t&&(t=!1);for(var o=[],i=0,a=Object.keys(_);i<a.length;i++){var r=a[i],n=Object(l.e)(r);n.isValid&&_[n.value]>0&&o.push(n.value)}return o=o.sort((function(e,t){return(_[t]||0)-(_[e]||0)})).slice(0,e),t&&o.reverse(),o}(e,3,i),n=_.querySelector(".ReactionsPreview__items"),s=Object(c.b)(t),b=0===Object(d.b)(e),u=Object(O.n)("reactions_preview_item");n&&s&&u?(n.innerHTML=r.map((function(_){var e=s.itemsById[_];if(!e)return"";var t=Object(E.a)({"ReactionsPreviewItem--lite ReactionsPreviewItem--stackOverlayLite":i,"ReactionsPreviewItem--post ReactionsPreviewItem--stackOverlayPost":!i});return Object(a.qb)(u,{image_url:e.imagePreviewURL,title:e.title,class:t})})).join(""),_.classList.toggle("ReactionsPreview--empty",b),_.classList.toggle("ReactionsPreview--active",void 0!==o)):console.warn("Unable to render reaction previews",{itemsContainer:n,previewItemTemplate:u,reactionSet:s})},p=t("xqyG"),P=function(_){var e=_.getAttribute("data-reaction-counts");if(null===e)return{};var t=e?Object(i.a)(e):void 0;return"object"==typeof t&&null!==t?t:void 0},w=function(_){var e=_.getAttribute("data-reaction-target-object"),t=_.getAttribute("data-reaction-hash"),o=_.getAttribute("data-reaction-set-id");if(null!==o){var i=_.getAttribute("data-reaction-user-reaction-id"),a=i?Object(l.f)(i):void 0,r=!!_.getAttribute("data-reaction-lite"),n=!!_.getAttribute("data-reaction-without-preview");return{counts:P(_),csrfHash:t,isLite:r,objectRaw:e,reactionSetId:o,userReactionId:a,withoutPreview:n}}},M=function(_,e){_.setAttribute("data-reaction-user-reaction-id",void 0===e?"":String(e))},D=function(_){var e,t=null===(e=_.__reactionIconAnimation)||void 0===e?void 0:e.animationItem;t&&(!t._cbs||t.destroy(),delete _.__reactionIconAnimation)},m=function(_,e,t,o){var i=_.querySelector('[data-section-ref="reactions-button-icon"]');if(i){if(e){var l=null==e?void 0:e.imageMenuURL;i.style.backgroundImage="url('"+l+"')",i.setAttribute("aria-label",null==e?void 0:e.title)}else i.style.backgroundImage="",(null==t?void 0:t.title)&&i.setAttribute("aria-label",null==t?void 0:t.title);i.classList.toggle("PostButtonReactions__icon--custom",!!e),function(_,e,t,o){var i;if(!(_!==(null===(i=t.__reactionIconAnimation)||void 0===i?void 0:i.animationURL))&&_||(D(t),e.innerHTML="",t.classList.remove("PostButtonReactions__icon--animationActive")),o&&_){var l=Object(s.a)(_,e,{loadAnimationParams:{autoplay:!0,loop:!1}});Object(p.c)(l,(function(){t.classList.add("PostButtonReactions__icon--animationActive")}));l.addEventListener("complete",(function(){t.classList.remove("PostButtonReactions__icon--animationActive"),D(t)})),t.__reactionIconAnimation={animationItem:l,animationURL:_}}}(null==e?void 0:e.animationURL,function(_){var e=_.querySelector(".PostButtonReactions__iconAnimation");return e||(e=Object(a.rb)('<div class="PostButtonReactions__iconAnimation" data-section-ref="reactions-button-icon-animation"></div>'),_.append(e),e)}(i),i,o)}},f=function(_,e,t){_.classList.toggle("PostButtonReactions--icon-active",e)},C=function(_,e,t,o){var i=!Object(l.c)(e),r=Object(l.a)(t),s=void 0;void 0===e||(s=t.itemsById[e])?(m(_,s,r,o),function(_,e,t){var o,i=_.querySelector('[data-section-ref="reactions-button-title"]');if(i){var l=null===(o=null==e?void 0:e.titleColor)||void 0===o?void 0:o.light,r=l?{color:"#"+l}:{color:null};if(e){i.innerText=e.title,Object(a.vb)(i,r);var s=Object(n.l)(Object(n.d)("reactions_button_unset_reaction_title"),{reaction_name:e.title});_.setAttribute("aria-label",s||"")}else(null==t?void 0:t.title)&&(i.innerText=t.title),Object(a.vb)(i,r),_.setAttribute("aria-label",Object(n.d)("reactions_button_title")||"")}}(_,s,r),f(_,i),o&&function(_,e){_.setAttribute("data-reaction-last-own-change-time",String(e))}(_,Date.now())):console.error(new Error("Missing reaction meta for "+e+" in set '"+t.id+"'"))},T=function(_){var e=_.getAttribute("data-reaction-last-own-change-time");if(e&&Object(o.k)(e))try{return new Date(Number.parseInt(e)).getTime()||void 0}catch(_){return void console.error(_)}};var h=function(_){return Object(d.b)(_)>0},v=function(_,e){var t=e.counts,o=e.countsPrevious,i=e.isLite,l=e.objectRaw,a=e.reactionId,s=e.reactionSetId,E=Object(c.b)(s),O=Object(d.a)(t,E),p=Object(d.c)(O),P=Object(d.b)(t),w=o?Object(d.b)(o):0,M=Object(b.d)(l);M&&(u(M,t,s,a,i),function(_,e,t,o){var i,l,a=Object(n.j)(t,Object(n.d)("reactions_n_reacted","raw")||"%s",!0);_.setAttribute("aria-label",a);var s=function(_){var e;return null!==(e=_.querySelector('[data-section-ref="like-button-count"]'))&&void 0!==e?e:void 0}(_);if(s){if(_.tt&&"object"==typeof _.tt)_.tt.shown||_.tt.showing||null===(l=null===(i=_.tt)||void 0===i?void 0:i.destroy)||void 0===l||l.call(i);var c=Object(n.j)(e,"%s",!0);Object(r.c)(s,c,{allowZero:0!==o,str:!0,noWrapWidth:!0,noSpaceIfEmpty:!0})}}(M,p,P,w))},A=function(_,e){var t=Object(b.b)(_),o=e.counts;t&&o?function(_,e){var t=w(_);t&&t.objectRaw&&v(0,{counts:e,countsPrevious:t.counts,isLite:t.isLite,objectRaw:t.objectRaw,reactionId:t.userReactionId,reactionSetId:t.reactionSetId})}(t,o):console.warn("Unable to update object reactions",{objectRaw:_,options:e})},W=function(_,e){var t=e.counts,o=Object(b.b)(_);o&&function(_,e){_.setAttribute("data-reaction-counts",JSON.stringify(e))}(o,t)}},pruO:function(_,e,t){"use strict";t.d(e,"d",(function(){return o})),t.d(e,"b",(function(){return i})),t.d(e,"c",(function(){return l})),t.d(e,"a",(function(){return a}));var o={wall:"wall",wall_reply:"wall_reply"},i={width:96,height:96},l={width:40,height:40},a="reactions_counts"},qwyz:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("HEwt"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("rGqo"),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("rE2o"),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ioFf"),core_js_modules_es6_regexp_search__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("OG14"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("a1Th"),core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("VRzm"),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("Btvt"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("Oyvg"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("KKXr"),core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("91GP"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("pIFo"),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("SRfc"),_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("zxIV"),_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("/PiP"),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("Egk5"),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("FWc3"),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("EasH"),_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("v+DW"),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("Xrg9"),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("t7n3"),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("kcIO"),_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("XzvV"),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("lXE5"),_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("7jxN"),_web_lib_video__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("Ia1d"),_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("4+be"),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("cGUQ"),_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("t/FQ"),_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("QGEU"),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("98sY"),_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("o7bv"),_web_lib_utils__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("aong"),_web_youla_preloadYoulaItemCreate__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("EIqf"),_web_donut__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("7GuL"),_web_page_friends_recommend__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("DzCs"),_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("YIAi"),_web_reactions_reactions_wall_reactions_wall__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__("QxcO"),_web_ui_media_selector_ui_media_selector__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__("te1c"),_web_discover_category_post_topic__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__("hzb7"),_shared_lib_common__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__("jE6c"),_web_page_wall_post_tooltip__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__("oK+H"),_web_wall_deep_replies_utils__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__("F5gA"),_web_wall_reply_utils__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__("bWc2"),_web_wall_wall_post_render__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__("zqir"),_web_wall_wall_utils__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__("34p4"),_internal_nospam_common__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__("FThC"),_wall_tabs_utils__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__("DfBR"),_web_lib_date__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__("1BRX"),_shared_donut_stats_donut_log__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__("g4nd"),_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__("6krn"),_web_BestFriends_analytics__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__("3EzW");function _extends(){return(_extends=Object.assign||function(_){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(_[o]=t[o])}return _}).apply(this,arguments)}function _slicedToArray(_,e){return _arrayWithHoles(_)||_iterableToArrayLimit(_,e)||_unsupportedIterableToArray(_,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(_,e){if(_){if("string"==typeof _)return _arrayLikeToArray(_,e);var t=Object.prototype.toString.call(_).slice(8,-1);return"Object"===t&&_.constructor&&(t=_.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(_,e):void 0}}function _arrayLikeToArray(_,e){(null==e||e>_.length)&&(e=_.length);for(var t=0,o=new Array(e);t<e;t++)o[t]=_[t];return o}function _iterableToArrayLimit(_,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(_)){var t=[],o=!0,i=!1,l=void 0;try{for(var a,r=_[Symbol.iterator]();!(o=(a=r.next()).done)&&(t.push(a.value),!e||t.length!==e);o=!0);}catch(_){i=!0,l=_}finally{try{o||null==r.return||r.return()}finally{if(i)throw l}}return t}}function _arrayWithHoles(_){if(Array.isArray(_))return _}var Wall={LS_ADS_EVENTS:"ads.events",deleteAll:function(_,e,t){ajax.post("al_wall.php",{act:"delete_all",post:e,hash:t},{onDone:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_));t.oldt=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(t,e)},showProgress:function(){hide(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_).appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{className:"progress"})))},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(_))}})},restoreAll:function(_,e,t){var o=Math.floor(1e5*Math.random());cur.wallRnd=o,ajax.post("al_wall.php",{act:"restore_all",post:e,hash:t,rnd:o},{onDone:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(t,t.oldt)},showProgress:function(){hide(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_).appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("span",{className:"progress_inline"})))},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(_))}})},deleteThread:function(_,e,t){ajax.post("al_wall.php",{act:"delete_thread",post:e,hash:t,from_deleted:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e),"reply_deleted")},{onDone:function(t){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("dld_inner",_);if(o)o.oldElements=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(o),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(o,t);else{var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e),l=geByClass1("reply_wrap",i);hide(l),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{id:"post_del"+e,className:"dld",innerHTML:'<span class="dld_inner">'+t+"</span>"}),i.appendChild(o)}hide("replies_wrap_deep"+e)},showProgress:function(){hide(_);var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post_actions",_);if(e)addClass(e,"post_actions_progress");else{var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(_);t||(t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{className:"progress"}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_).appendChild(t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(t))}},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(_);var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post_actions",_);e?removeClass(e,"post_actions_progress"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(_))}})},restoreThread:function(_,e,t){ajax.post("al_wall.php",{act:"restore_thread",post:e,hash:t},{onDone:function(){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("replies_wrap_deep"+e),t.oldElements)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(t,t.oldElements);else{var o=geByClass1("reply_wrap","post"+e);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(o),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)("post_del"+e)}},showProgress:function(){hide(_);var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(_);e||(e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{className:"progress"}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_).appendChild(e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(e))},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(_))}})},block:function(_,e,t,o,i){ajax.post("al_wall.php",{act:"block",post:e,hash:t,bl:o,from:i},{onDone:function(e){o?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_).insertBefore(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("span",{innerHTML:e}),_),hide(_)):(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_))),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_)))},showProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.u)(_,"post_inline_progress","post_inline_progress",!0)},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)("post_inline_progress")}})},blockEx:function(_,e){Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.b)("groupsedit.php",{act:"bl_edit",name:"id"+e,gid:_,auto:1},{stat:["page.css","ui_controls.js","ui_controls.css"],dark:1})},withMentions:!(browser.mozilla&&browser.version.match(/^2\./)||browser.mobile),editPost:function(_,e,t,o,i){if(cur.editingPost&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wpe_text")){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wall_posts",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wpe_text"));if(!l||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(l))return o&&o(),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.q)("wpe_text");Wall.cancelEdit()}cur.editingPost=[e],Wall.withMentions?stManager.add(["ui_controls.css","ui_controls.js","mentions.js",jsc("web/wall_edit.js")]):stManager.add([jsc("web/wall_edit.js")]),ajax.post("al_wall.php",extend({act:"edit",post:e,mention:Wall.withMentions?1:""},t),{onDone:function(){var _=Array.prototype.slice.call(arguments);if(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_40__.h)(_[4])&&cur.options&&Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_40__.h)(cur.options.filter_media_types)){var o=[];each(_[4],(function(_,e){each(cur.options.filter_media_types,(function(_,t){if(e[0]===t[0])return o.push(t),!1}))})),_[4]=o}_.unshift(e),t&&t.fromAds&&_.push(t.fromAds),WallEdit.editPost.apply(window,_),i&&i()},onFail:function(){cur.editingPost=!1,o&&o()},showProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.n)(_):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"flat_button")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(_):addClass(geByClass1("post_actions","post"+e),"post_actions_progress")},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.v)(_):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"flat_button")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(_):removeClass(geByClass1("post_actions","post"+e),"post_actions_progress")},noSort:!0})},fixPost:function fixPost(link,post,hash,value){return ajax.post("al_wall.php",{act:"a_fix_post",post,hash,value},{onDone:function onDone(js){if(js)try{eval(js)}catch(_){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__.d)(_,js)}var postEl=cur.wallLayer==post?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_post"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+post);each(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post_fixed"),(function(){removeClass(this,"post_fixed")})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(postEl,"post_fixed",value),link&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(link,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)(value?"wall_unfix_post":"wall_fix_post")),link.onclick=function(){return Wall.fixPost(link,post,hash,value?0:1)}),cur.onWKFix&&(cur.onWKFix(value),delete cur.onWKFix)},showProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(link,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.n)(link):_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o.pbind("wpe_fix"+post)},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(link,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.v)(link):_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w.pbind("wpe_fix"+post)}}),!1},cancelEdit:function(_){if(cur.editingPost){if(!0===_&&cur.editingPost[0].match(/^-?\d+_/))return;window.WallEdit?WallEdit.cancelEditPost():cur.editingPost=!1}},searchWall:function(){},switchTabContent:function(_){switch(hide("page_wall_posts","page_postponed_posts","page_suggested_posts","page_search_posts","page_top_posts","page_archive_posts","page_donut_posts"),_){case"own":case"all":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("page_wall_posts");break;case"postponed":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("page_postponed_posts"),hide("wall_more_link");break;case"suggested":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("page_suggested_posts");break;case"search":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("page_search_posts");break;case"top":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("page_top_posts");break;case"archive":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("page_archive_posts");break;case"donut":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("page_donut_posts")}},switchWall:function(_,e,t){var o;if(e&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.d)(e))return!0;if(t||(t="own"==cur.wallType?"all":"own"),e&&"click"==e.type&&e.clientX&&e.offsetX&&cur.wallTab==t&&cur.wallType==t&&"top"!==t)return nav.go(_,e);if("postponed"==cur.wallTab&&wall.checkPostponedCount(),"archive"!==cur.wallTab&&"archive"!==t||((cur.wallLayer?wkcur:cur).wallMyDeleted={}),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.v)(cur.wallArchiveFeatureTooltipHide)&&cur.wallArchiveFeatureTooltipHide(),!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(t,["top","archive","donut"])){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_posts");removeClass(i,"own"),removeClass(i,"all"),addClass(i,t)}cur.wallType=t,cur.wallTab=t,uiTabs.switchTab(_),uiTabs.hideProgress(_),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(t,["top","archive","donut"])?(cur.baseWallModule=cur.module,cur.module="wall_"+t,cur.topWallFeatureTT&&cur.topWallFeatureTT.hide()):cur.baseWallModule&&(cur.module=cur.baseWallModule,delete cur.baseWallModule);var l="donut"===t&&Wall.cantAccessDonutPosts();return Wall.hasPosts()||l?(Wall.update(),Wall.showWall()):(cur.wallNextFrom=0,cur.wallTopNextFrom=0,cur.wallArchiveNextFrom=0,cur.wallArchiveRestored=0,cur.wallArchiveArchived=0,cur.wallArchiveRolledback=0,cur.wallDonutNextFrom=0,"top"===t?delete cur.wallTopFinished:"archive"===t?delete cur.wallArchiveFinished:"donut"===t&&delete cur.wallDonutFinished,uiTabs.showProgress(_),Wall.showMore(0,_)),(null==_||null===(o=_.dataset)||void 0===o?void 0:o.donutLogEvent)&&Object(_shared_donut_stats_donut_log__WEBPACK_IMPORTED_MODULE_49__.a)(_.dataset.donutLogEvent),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(e)},resetWall:function(){if(cur.wallType&&cur.wallTab){var _=geByClass1("_wall_tab_"+cur.wallType);_&&(cur.wallNextFrom=0,cur.wallTopNextFrom=0,cur.wallArchiveNextFrom=0,(cur.wallLayer?wkcur:cur).wallMyDeleted={},"top"===cur.wallType?delete cur.wallTopFinished:"archive"===cur.wallType?delete cur.wallArchiveFinished:"donut"===cur.wallType&&delete cur.wallDonutFinished,uiTabs.showProgress(_),Wall.showMore(0,_,!0))}},hasPosts:function(_){_=_||cur.wallType;var e=Wall.getPostsWrap(_);return!!geByClass1("post",e)},getPostsWrap:function(_){switch(_){case"archive":return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_archive_posts");case"top":return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_top_posts");case"donut":return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_donut_posts");default:return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_posts")}},showSuggested:function showSuggested(ev,rows,notAll){if(ev&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.d)(ev))return!0;if(!cur.oid)return!1;var el=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_suggest");if(el=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(el,"unshown")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.F)("#page_wall_suggest_more .ui_tab_group_item"):geByClass1("ui_tab",el),!el)return!1;if(uiTabs.switchTab(el),cur.wallTab="suggested",delete cur.suggestedDeletedCount,void 0!==rows)wall.suggestLoaded(rows,notAll);else{if(cur.suggestedLoading)return!1;var curOid=cur.suggestedLoading=cur.oid;uiTabs.showProgress(el),ajax.post("al_wall.php",{act:"get_suggests",owner_id:cur.oid},{onDone:function onDone(rows,notAll,js,count){if(js)try{eval(js)}catch(_){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__.d)(_,js)}cur.suggestedLoading=!1,uiTabs.hideProgress(el),Wall.updateTabCounter("page_wall_suggested_cnt",count),curOid===cur.oid&&"suggested"==cur.wallTab&&wall.suggestLoaded.apply(window,arguments)}})}return!1},deleteSuggested:function(_,e,t,o){if(!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.k)(o)){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(o);var i=Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.d)({title:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_action_confirmation"),onHide:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(o)}},Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_delete_suggested_box"),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_delete_suggested_btn"),(function(o){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.k)(o)||(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(o),ajax.post("al_wall.php",{act:"delete_suggested",post_id:_,hash:t,group_id:e},{onDone:function(_){if("full_own"==cur.wallType||"full_all"==cur.wallType){var e=(Math.ceil(_/cur.pgPerPage)-1)*cur.pgPerPage;e<cur.pgOffset&&(e>0?nav.objLoc.offset=e:delete nav.objLoc.offset,nav.setLoc(nav.objLoc)),nav.reload()}else Wall.showSuggested();i.hide()},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o.pbind(o),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w.pbind(o)}))}),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_cancel"))}},suggestLoaded:function(_,e){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_suggested_posts",_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.yb)("wall_more_link",e),wall.switchTabContent("suggested")},suggestMore:function(){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_suggested_posts"),e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_more_link");Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.k)(e)||ajax.post("al_wall.php",{act:"get_suggests",owner_id:cur.oid,offset:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post",_).length-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("dld",_).length},{onDone:function(t,o){for(var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{innerHTML:t}),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(i);l;)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(l.id)||!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(l,"post")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(l):_.appendChild(l),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(i);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.yb)(e,o)},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o.pbind(e),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w.pbind(e)})},suggestUpdate:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_suggests_count"),t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(e));e&&(-1!==_&&1!==_||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(e,t+=_),Wall.updateTabCounter("page_wall_suggested_cnt",t))},suggestPublished:function(_,e,t){if(cur.onepost)return nav.go("/wall"+cur.oid);if(Wall.suggestUpdate(-1),Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.f)(e),cur.wallMyDeleted[_]=1,cur.editingPost=!1,Wall.deinitComposer(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wpe_text")),"full_own"!=cur.wallType&&"full_all"!=cur.wallType||(Pagination.recache(-1),FullWall.updateSummary(cur.pgCount)),cur.postWpeIsPoster=!!cur.posterWpeSendParams,cur.posterWpe&&cur.posterWpeSendParams&&WallEdit.posterDestroy(),t&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_postponed_posts",t),wall.postponeUpdateCount()),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_suggests_count")))Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)("post"+_);else{var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_rmenu");o?(geByClass1("ui_rmenu_item",o).click(),hide(geByClass1("_wall_menu_suggested",o))):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_tabs")&&(geByClass1("ui_tab",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_tabs")).click(),wall.updateTabVisibility("page_wall_suggest",!1))}},showDonutWall:function(_){if(!cur.oid)return!1;Wall.updateTabVisibility("page_wall_donut",!0);var e=Wall.getWallTabLink("donut");if(!e)return!1;uiTabs.switchTab(e),cur.wallTab="donut",cur.wallType="donut",void 0!==_&&Wall.donutWallSetRows(_)},donutWallSetRows(_){var e=Wall.getPostsWrap("donut");e&&(e.innerHTML=_,Wall.switchTabContent("donut"),Wall.update())},getWallTabLink:_=>{var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_"+_);return(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"unshown")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.F)(`#page_wall_${_}_more .ui_tab_group_item`):geByClass1("ui_tab",e))||null},showPostponedFull:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("ui_rmenu_postponed"),t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_posts");if(!e||!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"ui_rmenu_item_sel")||!t){var o={0:nav.objLoc[0],postponed:1};return nav.go(o)}Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(t,_),FullWall.updateSummary(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post",t).length)},showPostponed:function(_,e){if(_&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.d)(_))return!0;if(!cur.oid)return!1;var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_postponed");if(!(t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"unshown")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.F)("#page_wall_postponed_more .ui_tab_group_item"):geByClass1("ui_tab",t)))return!1;if(uiTabs.switchTab(t),cur.wallTab="postponed",void 0!==e)Wall.postponedLoaded(e);else{if(cur.postponedLoading)return!1;var o=cur.postponedLoading=cur.oid;uiTabs.showProgress(t),ajax.post("al_wall.php",{act:"get_postponed",owner_id:cur.oid},{onDone:function(_){cur.postponedLoading=!1,uiTabs.hideProgress(t),o===cur.oid&&"postponed"==cur.wallTab&&Wall.postponedLoaded(_)}})}return!1},postponedLoaded:function(_){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_postponed_posts",_),wall.postponeUpdateCount(),wall.switchTabContent("postponed")},postponeUpdateCount:function(){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_postponed_posts"),e=_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post",_).length-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("dld",_).length||0;_&&Wall.updateTabCounter("page_wall_postponed_cnt",e)},checkPostponedCount:function(){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post","page_postponed_posts"),e=0;each(_,(function(){var _=this.id.replace("post","");cur.wallMyDeleted[_]||e++})),e||wall.updateTabVisibility("page_wall_postponed",!1)},updateTabCounter:function(_,e){e=e?Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.j)(e,"%s",!0):"",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)(_).forEach((function(_){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(_,e);var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"ui_tab_group_item")&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"default-label",t.innerHTML)}))},updateTabVisibility:function(_,e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_more_tab");if(t)if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(t))if(e){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"unshown")&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_+"_more","unshown")){var o=!1;cur.wallTabsMorePriority.forEach((function(e){o||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"unshown")||(addClass(e,"unshown"),removeClass(e+"_more","unshown"),removeClass(_,"unshown"),o=!0)})),o||removeClass(_+"_more","unshown")}}else{var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(_);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(i,"unshown"))addClass(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(_+"_more"),"unshown");else{addClass(i,"unshown");var l=cur.wallTabsLimit-1-Object(_wall_tabs_utils__WEBPACK_IMPORTED_MODULE_47__.a)(t).length;if(l>0){var a=l;cur.wallTabsMorePriority.forEach((function(_){if(!(a<=0)){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(_+"_more");e&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"unshown")&&(removeClass(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(_),"unshown"),addClass(e,"unshown"),a--)}}))}}var r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("ui_tab_group_item",t);r.length-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("unshown",t).length<=1&&(r.forEach((function(_){_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"unshown")||(removeClass(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(_.id.replace(/_more$/,"")),"unshown"),addClass(_,"unshown"))})),addClass(t,"unshown"))}else{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(_),"unshown",!e);var n=Object(_wall_tabs_utils__WEBPACK_IMPORTED_MODULE_47__.a)(t).length;if(n>cur.wallTabsLimit){var s=n-(cur.wallTabsLimit-1);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("ui_tab_group_item",t).forEach((function(_){addClass(_,"unshown")})),cur.wallTabsMorePriority.forEach((function(_){if(!(s<=0)){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(_);e&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"unshown")&&(addClass(e,"unshown"),removeClass(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(_+"_more"),"unshown"),s--)}})),removeClass(t,"unshown"),Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.bb)("wall_more_tab_shown",cur.oid)}}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(_),"unshown",!e)},postponedPublished:function(_,e){if(cur.onepost)return nav.go("/wall"+cur.oid);"full_own"!=cur.wallType&&"full_all"!=cur.wallType||(Pagination.recache(-1),FullWall.updateSummary(cur.pgCount)),e&&Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.f)(e),cur.wallMyDeleted[_]=1;var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_postponed_posts")),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+_);if(t.length<=1&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(o,t)){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_rmenu");i?(geByClass1("ui_rmenu_item",i).click(),hide(geByClass1("_wall_menu_postponed",i))):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_tabs")&&(geByClass1("ui_tab",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_tabs")).click(),wall.updateTabVisibility("page_wall_postponed",!1))}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(o),wall.postponeUpdateCount()},onWallSearchSend:function(_,e){e?Wall.showSearch(e,0):Wall.hideSearch()},showSearch:function(_,e){if(cur.searchLoading&&cur.searchLoading==_||!cur.oid)return!1;var t=cur.oid;cur.wallQuery=cur.searchLoading=_,"search"!=cur.wallTab&&(cur.prevWallTab=cur.wallTab,cur.wallTab="search");var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_more_link"),i=+new Date;return ajax.post("al_wall.php",{act:"s",search:1,q:_,owner_id:cur.oid,offset:e,inline:1,owners_only:1},{onDone:function(l,a,r){if(t===cur.oid&&"search"==cur.wallTab){var n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_search_posts");e||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(n,""),n.appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.h)(l)),wall.switchTabContent("search"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.yb)(o,a<r),o.onclick=Wall.showSearch.pbind(_,a);var s=cur.oid>0?_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.ab:_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.Z,c=+new Date-i;Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.t)(s,0,r,_,0,0,c)}},showProgress:function(){uiSearch.showProgress("wall_search"),e&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(o)},hideProgress:function(){cur.searchLoading=!1,uiSearch.hideProgress("wall_search"),e&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(o)}}),!1},hideSearch:function(){if(delete cur.wallQuery,cur.prevWallTab){var _=(cur.oid,_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.ab);Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.s)(_),cur.wallTab=cur.prevWallTab,cur.prevWallTab=!1,wall.switchTabContent(cur.wallTab),wall.update()}},publishPostponedPost:function(_,e,t){Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.d)(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("publish_postponed_title"),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("publish_postponed_confirm"),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("publish_postponed_btn"),(function(){Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.b)().hide(),ajax.post("al_wall.php",{act:"publish_postponed",post:_,from:t,hash:e},{onDone:Wall.postponedPublished.pbind(_),showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o.pbind("wpe_publish"+_),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w.pbind("wpe_publish"+_)})}),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_cancel"))},publishFreeDonutCopy:function(_,e,t,o){var i=_.currentTarget,l=o?{title:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_warning"),content:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_publish_donut_as_free_confirmation_warn")}:{title:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_publish_donut_as_free_confirmation_title"),content:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_publish_donut_as_free_confirmation_confirm")},a=Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.d)(l.title,l.content,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_publish_donut_as_free_confirmation_btn"),()=>{var _=()=>{a.hide()},o=a.btns.ok[0];ajax.post("al_wall.php",{act:"publish_free_donut_copy",post_id:e,hash:t},{onDone:e=>{Wall.publishFreeDonutCopyDone({menuActionEl:i,message:e}),_()},onFail:()=>{_()},showProgress:()=>{Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(o)},hideProgress:()=>{Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(o)}})},Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_cancel"))},publishFreeDonutCopyDone(_){var e=_.message,t=_.menuActionEl;"full_own"!==cur.wallType&&"full_all"!==cur.wallType||(Pagination.recache(-1),FullWall.updateSummary(cur.pgCount)),e&&Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.f)(e,{timeout:3e3}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(t)},cmp:function(_,e){var t=_.length,o=e.length;return t<o?-1:t>o?1:_<e?-1:_>e?1:0},receive:function(_,e,t,o){o=!0===o;var i,l,a,r,n="top"===(t=t||cur.wallType),s="archive"===t,c="donut"===t,b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{innerHTML:_}),d=!!cur.options.revert,E=Wall.getPostsWrap(t),O=[],u=[],p=["page_top_posts","page_wall_posts","page_archive_posts","page_donut_posts"],P=0;if(o)u=p;else{var w=[[s,"page_archive_posts"],[n,"page_top_posts"],[c,"page_donut_posts"],[!0,"page_wall_posts"]].find(_=>_slicedToArray(_,1)[0]),M=_slicedToArray(w,2)[1];u=p.filter(_=>_!==M),a=d?E.firstChild:E.lastChild}function D(_){return!!(_&&_.tagName&&"div"===_.tagName.toLowerCase()&&_.id&&"post"===_.id.substr(0,4))&&_.id}u.forEach((function(_){if("page_donut_posts"!==_||!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_donut_info"))for(var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(_));e;){var t=e;e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(e),t.tagName&&"input"===t.tagName.toLowerCase()||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(t)}}));for(var m=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(d?b.firstChild:b.lastChild);m;m=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(d?b.firstChild:b.lastChild))if("input"!=m.tagName.toLowerCase()){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(m,"post_fixed")||!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(m.id))if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(m,"_ads_promoted_post"))O.push({el:m,beforePost:D(d?b.firstChild:i),afterPost:D(d?i:b.lastChild)});else{for(;a&&a.tagName&&"div"==a.tagName.toLowerCase()&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(a,"post_fixed")&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(a,"_ads_promoted_post")||!n&&!s&&Wall.cmp(a.id,m.id)<0);)a=d?a.nextSibling:a.previousSibling;++P,a?Wall.cmp(a.id,m.id)?(r=a,(l=d?a.previousSibling:a.nextSibling)&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(l,"_ads_promoted_post")&&(r=l),d?(E!==Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(r)&&Wall.sendInsertBeforeError(),E.insertBefore(m,r)):(E!==Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(r.nextSibling)&&Wall.sendInsertBeforeError(),E.insertBefore(m,r.nextSibling))):(E.replaceChild(m,a),a=m,--P):d?E.appendChild(m):E.insertBefore(m,E.firstChild),i=m,Object(_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_31__.c)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.O)("textarea",m),{fast:1})}}else{var f=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(m.id);f?E.replaceChild(m,f):E.firstChild?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(m,E.firstChild):E.appendChild(m)}if(O.length)for(var C=0,T=O.length;C<T;++C){var h=O[C];if(h.beforePost||h.afterPost){for(var v="no_position",A=d?E.firstChild:E.lastChild;A;A=d?A.nextSibling:A.previousSibling){r=null;var W=D(A);if(W){if(h.beforePost===W?r=A:h.afterPost===W&&(r=A.nextSibling),r&&(r.previousSibling&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(r.previousSibling,"_ads_promoted_post")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(r,"_ads_promoted_post"))){r=null,v="ads_sibling";break}if(r){E!==Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(r)&&Wall.sendInsertBeforeError(),E.insertBefore(h.el,r),v=!1;break}}}v&&Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.bb)("debug_watch",1,"js_page_ads_promoted_post_no_position",v)}}n&&!P?cur.wallTopFinished=cur.oid:s&&!P?cur.wallArchiveFinished=cur.oid:c&&!P&&(cur.wallDonutFinished=cur.oid),"full_own"!==t&&"full_all"!==t||(Pagination.recache(P),FullWall.updateSummary(cur.pgCount)),Wall.update(),wall.addReplyNames(e),Wall.updateMentionsIndex(),P&&Object(_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_14__.l)().updateCurrentPlaying()},showMore:function(_,e,t){if(cur.viewAsBox)return cur.viewAsBox();if(!cur.wallLayer){if("suggested"===cur.wallTab)return Wall.suggestMore();if(!(cur.wallTypeLoading&&cur.wallTypeLoading[cur.wallType]||"top"===cur.wallType&&cur.wallTopFinished===cur.oid||"archive"===cur.wallType&&cur.wallArchiveFinished===cur.oid||"donut"===cur.wallType&&cur.wallDonutFinished===cur.oid)){var o=cur.wallType,i="top"===o,l="archive"===o,a="donut"===o,r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_more_link"),n=cur.wallLoading=cur.oid,s=i&&!!cur.wallTopOnlyCache,c="";0!==_&&(c=l?cur.wallArchiveNextFrom:i?cur.wallTopNextFrom:a?cur.wallDonutNextFrom:cur.wallNextFrom),cur.wallTypeLoading=cur.wallTypeLoading||{},cur.wallTypeLoading[o]=!0,t=!0===t&&!_,ajax.post("al_wall.php",{act:"get_wall",owner_id:cur.oid,offset:_,type:o,fixed:cur.options.fixed_post_id||"",wall_start_from:c,onlyCache:s},{onDone:function(r,s,c,b){return e&&uiTabs.hideProgress(e),n!==cur.oid||o!==cur.wallType?(delete cur.wallLoading,void delete cur.wallTypeLoading[o]):i&&isObject(r)&&r.wait?(cur.wallTopLoadingDelay=cur.wallTopLoadingDelay?cur.wallTopLoadingDelay+100:200,void(cur.wallTopLoadingDelay<500?setTimeout((function(){delete cur.wallLoading,delete cur.wallTypeLoading[o],Wall.showMore(_)}),cur.wallTopLoadingDelay):(delete cur.wallLoading,delete cur.wallTypeLoading[o],cur.wallTopOnlyCache=!1,Wall.showMore(_)))):(delete cur.wallTopLoadingDelay,cur.wallVideos&&each(c,(function(_,e){cur.wallVideos[_]&&(cur.wallVideos[_].list=cur.wallVideos[_].list.concat(e.list))})),l?cur.wallArchiveNextFrom=b:i?cur.wallTopNextFrom=b:a?cur.wallDonutNextFrom=b:cur.wallNextFrom=b,void setTimeout((function(){Wall.receive(r,s,o,t),_||o!==cur.wallType||Wall.showWall(),delete cur.wallLoading,delete cur.wallTypeLoading[o]}),0))},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o.pbind(r),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w.pbind(r)})}}},showWall:function(){wall.switchTabContent(cur.wallType);var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("wall_module",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_posts")))[1];_<Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)()&&Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(_-15)},checkTextLen:function(_,e,t){var o=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(Emoji.editableVal(_).replace(/\n\n\n+/g,"\n\n"));if(_.lastLen!==o.length||t){var i=_.lastLen=o.length,l=(cur.options||{}).max_post_len||(window.mvcur||{}).maxReplyLength,a=i-o.replace(/\n/g,"").length;e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e),i>l-100||a>4?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(e),e.innerHTML=i>l?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_recommended_exceeded",i-l):a>4?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_recommended_lines",a-4):Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("text_N_symbols_remain",l-i)):hide(e),window.FullWall&&cur.onepost&&FullWall.onePostOnScroll()}else window.FullWall&&cur.onepost&&FullWall.onePostOnScroll()},checkPostLen:function(_,e,t,o){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(_);if(t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(t).replace(/\n\n\n+/g,"\n\n"),i&&(i.lastLen!==t.length||o)){var l=i.lastLen=t.length,a=cur.options.max_post_len,r=l-t.replace(/\n/g,"").length,n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e);l>a-100||r>4?(n.innerHTML=l>a?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_recommended_exceeded",l-a):r>4?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_recommended_lines",r-4):Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("text_N_symbols_remain",a-l),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(n)):hide(n)}},postChanged:function(_){var e,t=Wall.isPosterEditorOpen();if((t||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)("submit_post"))&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_box"),"shown")||Wall.showEditPost(),vk.id&&!vk.widget&&!(null===(e=cur.options)||void 0===e?void 0:e.no_draft)){clearTimeout(cur.postAutosave);var o=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(cur.oid)==vk.id?Wall.saveDraft:Wall.saveOwnerDraftText.pbind(cur.oid);!0===_?o():cur.postAutosave=setTimeout(o,10===_?10:1e3)}t||setTimeout(Wall.checkPosterAvailability)},ownerDraftKey:function(_){return"wall_draft"+vk.id+"_"+_},ownerDraftData:function(){return cur.wallDraftData||(cur.wallDraftData={}),cur.wallDraftData},addOwnerDraftMedia:function(_,e){var t;if(!(null===(t=cur.options)||void 0===t?void 0:t.no_draft)){var o=Wall.ownerDraftData(),i=e[0],l=e[1],a=e[2];o._attach_cache=o._attach_cache||{},a?o._attach_cache[i+l]=a:a=o._attach_cache[i+l],o.attaches=o.attaches||[];var r=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.a.get(Wall.ownerDraftKey(_))||{};!1!==i?o.attaches.push([i,l,a,o.attaches.length]):!1===i&&void 0!==l&&(o.attaches=o.attaches.filter((function(_){return _[3]!==l}))),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.a.set(Wall.ownerDraftKey(_),extend(r,{txt:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(Wall.getDraftData().message||""),medias:o.attaches}))}},cleanOwnerDraftMedia:function(_){var e;if(!(null===(e=cur.options)||void 0===e?void 0:e.no_draft)){var t=Wall.ownerDraftData(),o=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.a.get(Wall.ownerDraftKey(_))||{};t.attaches=[],_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.a.set(Wall.ownerDraftKey(_),extend({txt:""},o,{medias:[]}))}},saveOwnerDraftText:function(_){var e;if(cur.postFieldZoomText&&cur.postFieldZoomText(cur.postField,cur.wallAddMedia),!(null===(e=cur.options)||void 0===e?void 0:e.no_draft)){var t=Wall.ownerDraftData(),o=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.a.get(Wall.ownerDraftKey(_))||{},i=Wall.getDraftData(),l=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(i.message||""),a=null;if(t.txt=l,each(o.medias||{},(function(_,e){switch(e[0]){case"postpone":i.postpone&&(o.medias[_][1]=i.postpone,o.medias[_][2].draft=1);break;case"poll":var t=(cur.wallAddMedia||{}).pollData(!0,!0);t&&extend(o.medias[_][2],t);break;case"copyright":var l=(cur.wallAddMedia||{}).copyrightData(!0);l&&extend(o.medias[_][2],l);break;case _web_donut__WEBPACK_IMPORTED_MODULE_34__.a:i[_web_donut__WEBPACK_IMPORTED_MODULE_34__.a]&&(o.medias[_][2]=Object.assign(o.medias[_][2]||{},{[_web_donut__WEBPACK_IMPORTED_MODULE_34__.a]:i[_web_donut__WEBPACK_IMPORTED_MODULE_34__.a]}))}})),l&&i.bkg_id&&(a={id:i.bkg_id},cur.poster&&cur.poster.isCustomBkgId(i.bkg_id)&&extend(a,cur.poster.getCustomBkg()),o.bkg_id&&delete o.bkg_id),extend(o,{txt:l,bkg:a}),cur.shareShowImg&&extend(o,{shareShowImg:cur.shareShowImg}),_<0){var r=cur.poster?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_box"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("_submit_post_box",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("official"));extend(o,{from:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(r,"from-oid")||vk.id,signed:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)("signed")?1:0}),Object(_web_donut__WEBPACK_IMPORTED_MODULE_34__.d)(r,cur.wallAddMedia)?o.donutOnly=1:delete o.donutOnly}_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.a.set(Wall.ownerDraftKey(_),o)}},getOwnerDraft:function(_){var e;if(null===(e=cur.options)||void 0===e?void 0:e.no_draft)return[];var t=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.a.get(Wall.ownerDraftKey(_))||[],o={from:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(t.from),signed:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(t.signed),shareShowImg:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(t.shareShowImg)};return Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(t.donutOnly)&&(o.donutOnly=1),[t.txt,t.medias,!0,o,t.bkg]},saveOwnerDraftMedia:function(_,e,t,o){var i;if(!(null===(i=cur.options)||void 0===i?void 0:i.no_draft)){Wall.cleanOwnerDraftMedia(_);var l=cur.wallAddMedia||{},a=[],r=(cur.wallAddMedia?l.getMedias():[]).slice().map((function(_){return _.slice(0,2)}));void 0!==t&&e?a=[[e,t,o]]:e||void 0===t||r.splice(t,1),r=r.concat(a),each(r,(function(){Wall.addOwnerDraftMedia(_,this)}))}},saveDraft:function(){var _;if(cur.postFieldZoomText&&cur.postFieldZoomText(cur.postField,cur.wallAddMedia),!(null===(_=cur.options)||void 0===_?void 0:_.no_draft))if(cur.noDraftSave)cur.noDraftSave=!1;else if(!cur.postSent&&vk.id==Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(cur.oid)){var e=Wall.getDraftData();e.delayed||ajax.post("al_wall.php",Wall.fixPostParams(extend({act:"save_draft",hash:cur.options.post_hash},e)),{onFail:function(){return!0}})}},getDraftData:function(){var _;if(null===(_=cur.options)||void 0===_?void 0:_.no_draft)return{};var e=cur.wallAddMedia||{},t=e.chosenMedia||{},o=cur.wallAddMedia?e.getMedias():[],i=e.shareData||{},l="",a=0,r=null;if(Wall.isPosterEditorOpen())r=(l=cur.poster.getText())?cur.poster.getBkgId():null;else{var n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_field");l=window.Emoji?Emoji.editableVal(n):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(n),l=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(l)}var s={message:l,bkg_id:r};return Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_40__.h)(t)&&t.length&&o.push(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.d)(t)),o.length&&each(o,(function(_,t){if(t){var o=this[0],r=this[1];switch(o){case"poll":var n=e.pollData(!0,!0);if(!n)return s.delayed=!0,!1;r=n.question,delete n.question,s=extend(s,n);break;case"copyright":var c=e.copyrightData(!0);if(c)return void(s=extend(s,c));break;case"share":if(i.failed||!i.title&&(!i.images||!i.images.length)&&!i.photo_url&&!i.video)return cur.shareLastParseSubmitted&&Date.now()-cur.shareLastParseSubmitted<2e3?(s.delayed=!0,!1):void 0;i.video?(r=i.video_owner_id+"_"+i.video_id,s.snippet_video=1):r=i.user_id&&i.photo_id&&!i.noPhoto?i.user_id+"_"+i.photo_id:"",i.initialPattern&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(l)==i.initialPattern&&(s.message=""),i.is_vk_mini_app&&(s.is_vk_mini_app=!0,s.is_photo_edit=i.isPhotoEdit,s.image_offset=cur.shareShowImg),s=extend(s,{url:i.url,module:cur.module,mode:i.mode,title:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(i.title),description:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(i.description),button_text:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(i.button_text),button_action:i.button_action,extra:i.extra,extra_data:i.extraData,photo_url:i.video?"":Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(i.photo_url),open_graph_data:(i.openGraph||{}).data,open_graph_hash:(i.openGraph||{}).hash});break;case"page":i.initialPattern&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(l)==i.initialPattern&&(s.message="");break;case"postpone":var b=+e.postponeDate;return void(s=extend(s,{postpone:b}));case"mark_as_ads":return void(s=extend(s,{mark_as_ads:1}));case _web_donut__WEBPACK_IMPORTED_MODULE_34__.a:return void(s=extend(s,Object(_web_donut__WEBPACK_IMPORTED_MODULE_34__.f)(t)))}this[3]&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(l)==this[3]&&(s.message=""),s["attach"+(a+1)+"_type"]=o,s["attach"+(a+1)]=r,a++}})),s},setDraft:function(_){var e;if(!(null===(e=cur.options)||void 0===e?void 0:e.no_draft)&&(_[0]||_[1]&&_[1].length||null!=_[4])){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_field");if(t){var o=_[4];o||Emoji.val(t,Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(_[0]||"")).replace(/\n/g,"<br/>")),Wall.showEditPost((function(){setTimeout((function(){if(o&&cur.poster){Wall.hidePosterFeatureTooltip();var e={text:_[0]||""};if(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.A)(o)?e.bkgId=_[4]:isObject(o)&&(cur.poster.isCustomBkgId(o.id)&&cur.poster.addCustomBkg(o),e.bkgId=o.id),!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(Wall.getMainPostBlock()))return cur.poster.setBkg(e.bkgId,!0),cur.poster.setText(e.text),void Emoji.val(t,Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(_[0])).replace(/\n/g,"<br/>"));Wall.openPosterEditor(e)}if(_[1]&&cur.wallAddMedia)for(var i in _[1])cur.noDraftSave=!0,cur.wallAddMedia.chooseMedia.apply(cur.wallAddMedia,_[1][i]);Wall.checkPosterAvailability(),Wall.saveDraft()}),0)})),_[2]&&wall.focusOnEnd(),_[3]&&(wall.setReplyAsGroup(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("official"),_[3]),_[3].shareShowImg&&(cur.shareShowImgRestored=_[3].shareShowImg),_[3].donutOnly&&cur.wallAddMedia&&cur.wallAddMedia.donutPostSettings&&cur.wallAddMedia.donutPostSettings.setPostDonutOnly&&cur.wallAddMedia.donutPostSettings.setPostDonutOnly()),cur.postFieldZoomText&&cur.postFieldZoomText(cur.postField,cur.wallAddMedia)}}},initPostEditable:function(_){var e=cur.postField;if(!e||e.emojiInited)return!1;e.emojiInited=!0,stManager.add([jsc("web/emoji.js"),"notifier.css"],(function(){Emoji.init(e,{ttDiff:-42,rPointer:!0,controlsCont:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e),noStickers:!0,onSend:Wall.sendPost,noEnterSend:!0,ref:"post",checkEditable:Wall.postChanged,initUploadForImagePasteCallback:function(_,e,t){window.Upload&&Upload.onFileApiSend(cur.wallUploadInd,[t])}}),addClass(e,"submit_post_inited"),_?setTimeout(Wall.setDraft.pbind(_),0):cur.postFieldZoomText&&cur.postFieldZoomText(cur.postField,cur.wallAddMedia)})),setTimeout((function(){cur.postFieldZoomText&&addEvent(e,"keydown paste",(function(){setTimeout((function(){cur.postFieldZoomText(cur.postField,cur.wallAddMedia)}),0)}))}),0)},showEditPost:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_field");if(cur.viewAsBox)return setTimeout((function(){e.blur()}),0),cur.viewAsBox();0!==cur.editing&&(setTimeout(WallUpload.init,0),Wall.initComposer(e,{lang:{introText:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("profile_mention_start_typing"),noResult:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("profile_mention_not_found")},checkLen:Wall.postChanged,onValueChange:Wall.onPostValChange,onItemSelect:Wall.onPostItemSelect},_),Wall.hideEditPostReply(),addClass("submit_post_box","shown"),cur.editing=0,Wall.showPosterFeatureTooltip(),Wall.showPostCopyrightFeatureTooltip(),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.v)(cur.onShowEditPost)&&cur.onShowEditPost(),cur.wallAdsReplacedFeatureTooltip&&Wall.showAdsReplacedTooltip(),window.cur.wallBestFriendsSettingsFeatureTooltip&&Wall.showBestFriendsSettingsFeatureToolTip(),stManager.add(["ui_controls.css","ui_controls.js","datepicker.css",window.jsc("web/datepicker.js")]))},postBoxFocus:function(_,e){Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.j)(_||window.event);var t=Wall.isPosterEditorOpen();(cur.postField&&window.Emoji||t)&&setTimeout((function(){e?t?(cur.poster.focusPoster(),Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(cur.poster.getPosterElement())[1]-15)):(Emoji.focus(cur.postField),Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(cur.postField)[1]-15)):t?cur.poster.focusPoster():Emoji.focus(cur.postField,!0,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_box"))}),0)},initComposer:function(_,e,t){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(_,"composer"))t&&t();else if(cur.composerAdded){var o=Composer.init(_,e);t&&t(),cur.destroy.push(Composer.destroy.bind(Composer).pbind(o))}else stManager.add(["wide_dd.css","wide_dd.js"],(function(){cur.composerAdded=!0;var o=Composer.init(_,e);t&&t(),cur.destroy.push(Composer.destroy.bind(Composer).pbind(o))}))},deinitComposer:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(_,"composer");e&&Composer.destroy(e),_.emojiId&&window.Emoji&&Emoji.destroy(_.emojiId)},hasComposerMedia:function(_){var e=_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(_,"composer");return!(!e||!e.addMedia)&&e.addMedia.attachCount()>0},composerListShown:function(_){var e=_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(_,"composer");if(!e)return!1;var t=e.wdd,o=0;for(var i in t.shown)o+=1;return!!(t&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(t.listWrap)&&o)},onPostValChange:function(_){if(cur.wallAddMedia&&cur.wallAddMedia.checkMessageURLs.apply(window,arguments),"full_own"!=cur.wallType&&"full_all"!=cur.wallType||Pagination.pageTopUpdated(),browser.msie&&!_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_field");hide(e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.H)(e)}},onPostItemSelect:function(_){if(_&&!(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(_[0])>=0)&&cur.wallAddMedia){var e="vk.com/event"+-_[0];cur.wallAddMedia.checkMessageURLs(e,!0)}},hideEditPost:function(_){cur.editing=!1;var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_field"),t=cur.wallAddMedia||{},o=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)((window.Emoji?Emoji.editableVal:_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(e));!browser.opera_mobile&&e&&(!_&&(o||t.chosenMedia||t.getMedias&&t.getMedias().length>0||t.activeState||t.attachCount&&t.attachCount()>0)||(removeClass("submit_post_box","shown"),e&&!o&&cur.postMention&&(cur.postMention.options.minHeight=cur.emptyPostheight||14),cur.onWallSendCancel&&cur.onWallSendCancel(),window.WallUpload&&WallUpload.hide(),cur.wallAddMedia&&cur.wallAddMedia._hideAddMedia(!0)))},clearInput:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("page_add_media");var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_field");if(Wall.withMentions){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(_,"mention");e&&(e.rtaEl.innerHTML="",hide(e.cont),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(_))}Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(_,""),_.blur(),_.phonblur(),Wall.hideEditPost(!0),cur.wallAddMedia&&cur.wallAddMedia.unchooseMedia(),Wall.resetPostVisibilityAccess(),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)("export_status",!1),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)("close_comments",!1),Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_40__.h)(window.cur.wallOnClearInput)&&window.cur.wallOnClearInput.forEach(_=>{_()});var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(_,"composer");t&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(t.articleConvertEl),t.articleConvertEl=!1)},fixPostParams:function(_){var e=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.d)(_);return e.Message=_.message,delete e.message,e},focusOnEnd:function(_){if(_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_field"))if("TEXTAREA"!=_.tagName){var e=_.innerHTML?_.innerHTML.length:_.length?_.length:_.childNodes.length-1;if(_.focus(),document.selection){var t=document.selection.createRange();t.moveStart("character",e),t.select()}else window.getSelection().collapse(_,_.childNodes.length)}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.H)(_)},isAnonPost:function(){var _=geByClass1("anon_toggle");return _&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(geByClass1("_ui_toggler",_),"on")?1:""},saveAnon:function(_){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(geByClass1("_ui_toggler",_),"on");var e=Wall.isAnonPost();Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)("friends_only",!1),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)("best_friends_only",!1),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)("status_export",!e),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)("facebook_export",!e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_box"),"anon_field_on");var t=cur.anonPostBtn||Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_send");cur.anonPostBtn=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("send_post").innerHTML,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("send_post").innerHTML=e?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_send"):t},showPostSettings:function(_,e){var t=cur.wallAdsReplacedFeatureTooltip&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"addpost_opt");if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(_,"ett")||t){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(_),i=o&&o.querySelector(".Post__copyrightButton");t&&Wall.hideAdsReplacedTT(),new ElementTooltip(_,{cls:"post_settings_tooltip"+(i?" post_settings_tooltip_with_custom_btn":""),content:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(o),defaultSide:"top",offset:[0,-5],appendTo:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_)}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(o)}e&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.e)(e)&&"click"===e.type&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(_,"ett").toggle()},saveExport:function(_,e,t){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)("friends_only")||Wall.isAnonPost()||Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)(_),cur.saveExportTO=cur.saveExportTO||{},clearTimeout(cur.saveExportTO[e]),cur.saveExportTO[e]=setTimeout((function(){ajax.post("/al_settings.php",{act:"a_save_export",service:e,disabled:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)(_)?0:1,hash:t})}),300)},togglePostVisibilityAccess:function(_,e,t,o){var i=Wall.isAnonPost(),l=!!t;if(!i||l){t=t||"";var a="post_visibility_btn",r=cur[a+t];r&&r.hide(),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.r)(_,e,"post_settings_btn"+a+t);var n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_visibility_btn"+t),s=l?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wpe_status_export"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("status_export"),c=l?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wpe_facebook_export"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("facebook_export"),b=geByClass1("post_action_btn_text",n),d=![_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_36__.a.ONLY_FRIENDS,_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_36__.a.ONLY_BEST_FRIENDS].includes(e);if(e===_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_36__.a.ONLY_BEST_FRIENDS){var E=(window.event||{}).target,O=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("best_friends_only"+t).querySelector(".PostVisibilityBestFriendsOnlyOption"),u=Number(O.dataset.count);E&&E.closest(".PostVisibilityBestFriendsOnlyOption__editLink")||0===u?(Object(_web_BestFriends_analytics__WEBPACK_IMPORTED_MODULE_51__.b)(_web_BestFriends_analytics__WEBPACK_IMPORTED_MODULE_51__.a.editBestFriends),this.resetPostVisibilityAccess(),stManager.add([jsc("web/best_friends.js"),"BestFriends.css"],()=>{window.bestFriendsBoxSettings(_=>{var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("best_friends_only"+t);if(0===_)e.innerHTML=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.n)("visibility_access_best_friends_only_option",{html:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_choose_best_friends"),count:_}),this.togglePostVisibilityAccess(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("no_friends_only"+t),_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_36__.a.PUBLIC,t,!0);else{var o=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_best_friends_settings_box_conversation_friends_count",_);e.innerHTML=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.n)("visibility_access_best_friends_only_option",{html:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.n)("visibility_access_best_friends_only_item",{count_text:o}),count:_}),this.togglePostVisibilityAccess(e,_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_36__.a.ONLY_BEST_FRIENDS,t,!0)}})})):(Object(_web_BestFriends_analytics__WEBPACK_IMPORTED_MODULE_51__.b)(_web_BestFriends_analytics__WEBPACK_IMPORTED_MODULE_51__.a.selectBestFriends),b.innerHTML=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_best_friends_only"),b.setAttribute("aria-label",Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_best_friends_only")),addClass(n,"best_friends_only"),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)(s,!1),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)(c,!1))}else if(d){var p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("no_friends_only"+t).innerHTML;b.innerHTML=p,b.setAttribute("aria-label",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(p)),removeClass(n,"on"),removeClass(n,"best_friends_only")}else{var P=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("friends_only"+t),w=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(P);b.innerHTML=w,b.setAttribute("aria-label",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(w)),addClass(n,"on"),removeClass(n,"best_friends_only"),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)(s,!1),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)(c,!1)}s&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.e)(s,!d),c&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.e)(c,!d),o||Wall.postChanged()}},resetPostVisibilityAccess(){Wall.canChangeVisibilityForNewPost()&&Wall.togglePostVisibilityAccess(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("no_friends_only"),_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_36__.a.PUBLIC,!1,!0)},canChangeVisibilityForNewPost:()=>!!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_visibility_btn"),initPostVisibilitySelector(_){Wall.canChangeVisibilityForNewPost()&&Object(_web_page_wall_post_tooltip__WEBPACK_IMPORTED_MODULE_41__.a)("post_visibility_btn",_.id)},cantAccessDonutPosts:()=>!1===window.cur.donutGroupUserHasWallAccess,togglePostMarkAsAds:function(_,e){e=e||"mute_notifications";var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e);if(t){var o=Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)(_);if(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.e)(t,o),o)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"prev-state",+Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)(t)),addClass(t,"on");else{var i=+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"prev-state");Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(t,"on",i)}}},needCheckSign:function(){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("check_sign");return _&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)(_)},saveCheckSign:function(_){var e=Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)(_);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"title",e?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_check_sign_disabled"):Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_check_sign_enabled")),window.tooltips&&tooltips.hide(_,{onHide:_.onmouseover.bind(_)}),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)(_,!e)},checkAsGroup:function(_){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)(_),wall.setReplyAsGroup(_,{fromGroup:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)(_)})},sendPost:function(_,e){var t=cur.wallAddMedia||{},o=t.chosenMedia||{},i=cur.wallAddMedia?t.getMedias():[],l=t.shareData||{},a=cur.poster&&!!e,r=a?e.text:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)((window.Emoji?Emoji.editableVal:_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_field"))),n=!1,s=Wall.isAnonPost(),c=a?null:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("send_post"),b=cur.options.suggesting?"suggest":cur.wallType;"top"===b&&(b="all"),a&&(i=i.filter(_=>{if(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_40__.h)(_)){var e=_slicedToArray(_,1)[0];return["copyright","postpone",_web_donut__WEBPACK_IMPORTED_MODULE_34__.b].includes(e)}}));var d=a?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_box"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("_submit_post_box",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("official")),E=Object(_web_donut__WEBPACK_IMPORTED_MODULE_34__.d)(d,t),O=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(d,"from-oid")==cur.postTo?1:"";d&&cur.postTo||O||cur.defaultPostSettings&&(O=cur.defaultPostSettings.official?1:"");var u={act:"post",message:r,to_id:cur.postTo,type:b,friends_only:!s&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)("friends_only"),best_friends_only:!s&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)("best_friends_only"),check_sign:Wall.needCheckSign(),status_export:!s&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)("status_export"),close_comments:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("close_comments")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)("close_comments")?1:0:"",mute_notifications:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("mute_notifications")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)("mute_notifications")?1:0:"",mark_as_ads:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)("mark_as_ads")?1:0,official:O,signed:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)("signed"),anonymous:s,hash:cur.options.post_hash,from:cur.from?cur.from:"",fixed:cur.options.fixed_post_id||"",situational_suggest_id:cur.options.situational_suggest_id||null},p=0;extend(u,Object(_web_donut__WEBPACK_IMPORTED_MODULE_34__.e)(E,t)),cur.options.additional_save_params&&(u=extend(u,cur.options.additional_save_params));var P,w=cur.wallAddMedia&&cur.wallAddMedia.id||"";function M(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_error");if(e.innerHTML=_.length>60?'<div class="msg_text">'+_+"</div>":_,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)("submit_post_error")||(Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.l)("submit_post_error",100),Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.b)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("box_layer_wrap"),{scrollTop:0})),Wall.isPosterEditorOpen()){var t=cur.poster.getErrorWrapperElement();t.innerHTML="",t.appendChild(e)}}if(extend(u,Object(_web_discover_category_post_topic__WEBPACK_IMPORTED_MODULE_39__.a)(String(w))),Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_40__.h)(o)&&o.length&&i.push(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.d)(o)),a&&(u.poster_bkg_id=e.bkgId,u.poster_bkg_access_hash=e.accessHash,e.fallbackObj&&(i.push(["photo",e.fallbackObj.owner_id+"_"+e.fallbackObj.id,!1]),u.poster_photo_hash=e.fallbackObj.post_hash),u.poster_bkg_id!==cur.posterCtaBkgId&&(u.poster_author_bkg_check=!0)),hide("submit_post_error"),i.length){var D=0;P=!1,each(i,(function(_,e){var o;if(e){var a=this[0],d=this[1];switch(a){case"video":if(n||"suggest"==b)break;var E=Wall.getOwnerDraft(cur.oid)[1];if(!E)break;each(E,(function(_,e){e[1]===d&&e[2]&&e[2].upload_new&&D++}));break;case"poll":if(s)return;var O=t.pollData();if(!O)return P=!0,!1;d=O.question,delete O.question,u=extend(u,O);break;case"copyright":if(s)return;var w=t.copyrightData();if(w)return void(u=extend(u,w));break;case"share":if(l.failed||!l.title&&(!l.images||!l.images.length)&&!l.photo_url&&!l.video)return cur.shareLastParseSubmitted&&Date.now()-cur.shareLastParseSubmitted<2e3?(P=!0,!1):void 0;if((cur.options.share||{}).button_exclusive&&l.button_text&&l.button_action){var m;i.length>1&&(m=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_share_too_many_attachments")),r.split("\n").length-1>(cur.options.share||{}).button_exclusive_max_message_newlines&&(m=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_share_too_many_newlines")),r.length>(cur.options.share||{}).button_exclusive_max_message_len&&(m=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_share_too_long_message"));var f=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.j)(" "+r+" "),C=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.j)(" "+l.url+" ")[0];if(C&&f.length){"/"===C.query&&(C.query=""),"www."===C.domain.substr(0,4)&&(C.domain=C.domain.substr(4));for(var T=0;T<f.length;++T){var h=f[T];if("/"===h.query&&(h.query=""),"www."===h.domain.substr(0,4)&&(h.domain=h.domain.substr(4)),C.domain!=h.domain||C.query!=h.query){m=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_share_too_many_links");break}}}if(m)return M(m),P=!0,!1}if(!l.title)return M(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_share_title_required")),P=!0,!1;if(!l.url)return M(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_share_url_required")),P=!0,!1;if(l.url=new URL(l.url).href,l.video?(d=l.video_owner_id+"_"+l.video_id,u.snippet_video=1):d=l.user_id&&l.photo_id&&!l.noPhoto?l.user_id+"_"+l.photo_id:"",l.share_upload_failed&&!d)return void(l.share_upload_failed=0);if(l.images&&l.images.length&&!Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_40__.h)(l.images[cur.shareShowImg])&&!d&&!l.noPhoto&&!l.share_own_image&&!l.video)return Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(c),t.uploadShare((function(){Wall.sendPost(!0)})),P=!0,!1;if((cur.options.share||{}).require_image&&!d)return M(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_share_image_required")),P=!0,!1;l.initialPattern&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(r)==l.initialPattern&&(u.message=""),l.is_vk_mini_app&&(u.is_vk_mini_app=!0,u.is_photo_edit=l.isPhotoEdit,u.image_offset=cur.shareShowImg),u=extend(u,{url:l.url,module:cur.module,mode:l.mode,title:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(l.title),description:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(l.description),button_text:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(l.button_text),button_action:l.button_action,extra:l.extra,extra_data:l.extraData,photo_url:l.noPhoto||l.video?"":Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(l.photo_url),open_graph_data:(l.openGraph||{}).data,open_graph_hash:(l.openGraph||{}).hash});break;case"page":l.initialPattern&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(r)==l.initialPattern&&(u.message="");break;case"postpone":if(s)return;var v=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("postpone_date"+t.lnkId);return u=extend(u,{postpone:v}),cur.postponedLastDate=v,void(n=!0);case"mark_as_ads":return void(u=extend(u,{mark_as_ads:1}));case"pretty_cards":if(!t.prettyCardGallery)return;if(t.prettyCardGallery.needSendData())return t.prettyCardGallery.saveCards(Wall.sendPost,(function(_){M(_)})),P=!0,!1;var A=t.prettyCardGallery.getSendData();d=A.attachVal;break;case"podcast":if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(this[2],"attach_disabled"))return!1;break;case _web_donut__WEBPACK_IMPORTED_MODULE_34__.b:return;case"donut_link":u["attach"+(p+1)+"_owner_id"]=null===(o=this[5])||void 0===o?void 0:o.owner_id}this[3]&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(r)==this[3]&&(u.message=""),s&&"photo"!==a||(u["attach"+(p+1)+"_type"]=a,u["attach"+(p+1)]=d,p++)}}));var m=cur.postTo<0||cur.postTo===vk.id;if(cur.wallUploadVideoOpts&&cur.wallUploadVideoOpts.vars.is_wall_postponed_allowed&&m&&D&&!_&&!cur.postponeVideoPost)return Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.b)()&&Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.b)().hide(),void Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.b)("al_video.php?act=postponed_post_box",{videos_count:D},{onDone:function(_,e){_.removeButtons(),_.addButton(e.video_post_later_text,(function(){cur.postponeVideoPost=!0,Wall.sendPost(!0),_.hide()})),_.addButton(e.video_post_now_text,(function(){Wall.sendPost(!0),_.hide()}),"no")}});if(P)return void(_&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(c))}if(!p&&!r)return _&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(c),void Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.H)("post_field");if(!c||_||!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.k)(c)){cur.postponeVideoPost&&(u=extend(u,{postpone_video:!0,postpone_video_hd:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("postponed_post_hd"))})),cur.postAutosave&&clearTimeout(cur.postAutosave),hide("submit_post_error"),cur.postSent=!0;var f=window.GroupsAdminTips&&window.GroupsAdminTips.isShownSection()?1:0;u.update_admin_tips=f;var C=Object(_web_donut__WEBPACK_IMPORTED_MODULE_34__.g)(t,cur.oid);u.donut_duration&&-1!==u.donut_duration&&C&&!cur.donutAttachesApproved?Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.d)({title:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("publish_postponed_title"),onHide:()=>{Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(c)}},Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_publish_donut_freeing_attaches_confirmation_title"),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("publish_postponed_btn"),()=>{Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.b)().hide(),cur.donutAttachesApproved=!0,Wall.sendPost(_,e)},Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_cancel"),()=>{Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.b)().hide(),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(c)}):setTimeout((function(){ajax.post("al_wall.php",Wall.fixPostParams(u),{onDone:function(_,e,o,i){Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.A)(o)||(o=null),cur.poster&&a&&(cur.poster.unlockEditPoster(),cur.poster.closeEditor(),cur.poster.resetPoster(),cur.posterCtaBkgId&&(cur.posterCtaBkgId=null)),cur.posterFeatureTT&&cur.posterFeatureTT.hide(),Wall.clearInput(),cur.postSent=!1,cur.postponeVideoPost=!1,cur.donutAttachesApproved=!1;var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("mark_as_ads"),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("mute_notifications");if(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)(l)&&r&&(removeClass(r,"on"),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.e)(r,0)),l&&(removeClass(l,"on"),t.donutUpdateVisibility()),cur.options.onSendPostDone)cur.options.onSendPostDone.apply(window,arguments);else{if(i&&Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.f)(i),!isObject(_)||!_.redirect){if(Object(_wall_tabs_utils__WEBPACK_IMPORTED_MODULE_47__.b)(),n){if("feed"==b)Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.f)(_,{out:3e3});else if("full_own"==b||"full_all"==b)return Wall.showPostponedFull(_);return wall.updateTabVisibility("page_wall_postponed",!0),void Wall.showPostponed(!1,_)}if(("full_own"==b||"full_all"==b)&&(cur.pgStart||nav.objLoc.postponed)){var s=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.d)(nav.objLoc);return delete s.offset,delete s.postponed,vk.id!=cur.oid&&delete s.own,nav.go(s)}if(vk.id!=cur.oid&&"full_own"==b){var c=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.d)(nav.objLoc);return delete c.own,nav.go(c)}return"feed"==b?cur.wallPostCb():"suggest"==b?(wall.updateTabVisibility("page_wall_suggest",!0),Wall.showSuggested(!1,_,e),Wall.suggestUpdate()):void(E?Wall.showDonutWall(_):(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_tabs")&&geByClass1("ui_tab",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_tabs")).click(),Wall.receive(_,e),cur.onWallSendPost&&cur.onWallSendPost(),f&&null!==o&&window.GroupsAdminTips&&window.GroupsAdminTips.refreshSection(o)))}nav.go(_.redirect)}},onFail:function(_){if(cur.postSent=!1,cur.postponeVideoPost=!1,cur.donutAttachesApproved=!1,cur.poster&&a&&cur.poster.unlockEditPoster(),cur.posterFeatureTT&&cur.posterFeatureTT.hide(),!cur.options.onSendPostFail){if(!_)return!0;var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_error");if(e.innerHTML=_.length>60?'<div class="msg_text">'+_+"</div>":_,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)("submit_post_error")||Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.l)("submit_post_error",100),Wall.isPosterEditorOpen()){var t=cur.poster.getErrorWrapperElement();t.innerHTML="",t.appendChild(e)}return!0}cur.options.onSendPostFail.apply(window,arguments)},showProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(c)},hideProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(c)},noSort:!0})}),0)}},_repliesLoaded:function(_,e,t,o,i){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+_);if(l){var a=l.nextSibling;if(e){var r=l.offsetHeight;l.innerHTML=t,Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)()+(l.offsetHeight-r),0,void 0,!0),setTimeout(Wall.scrollHighlightReply.pbind("post"+e),0)}else l.innerHTML=t;if(a&&"replies_open"==a.className&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(a),ajax._framenext(),_==cur.wallLayer){var n=wkcur.reverse;extend(wkcur,{offset:!n&&i.offset||0,loaded:i.num||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("reply",l,"div").length,count:i.count}),wall.addReplyNames(o),WkView.wallUpdateReplies(),n||(wkLayerWrap.scrollTop=wkLayerWrap.scrollHeight,WkView.wallUpdateRepliesOnScroll())}else wall.addReplyNames(o),Wall.repliesSideSetup(_);Wall.updateMentionsIndex(),setTimeout((function(){Object(_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_14__.l)().updateCurrentPlaying()}),10),i&&Likes.updateComments("wall"+_,i.count)}},repliesSideSetup:function(_){if(cur.wallLayer!=_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+_);if(e){var t=geByClass1("wr_header",e,"a"),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+_),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(o,"deep_active"),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_side"+_);if(cur.wallMyOpened[_]&&(t||i)){if(!l){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)('<div class="replies_side_wrap"><div id="replies_side'+_+'" class="replies_side"></div></div>');e.parentNode.insertBefore(a,e),(l=a.firstChild).onmouseover=Wall.repliesSideOver.pbind(_),l.onmouseout=Wall.repliesSideOut.pbind(_),l.onclick=i?Wall.hideDeepReplies.pbind(_):Wall.repliesSideClick.pbind(_)}e.onmouseover=Wall.repliesSideOver.pbind(_),e.onmouseout=Wall.repliesSideOut.pbind(_),Wall.repliesSideOver(_)}else hide(l),e.onmouseover=null,e.onmouseout=null}}else WkView.wallUpdateReplies()},repliesSideClick:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+_),t=Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)(),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(e)[1];return t>o&&Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(o-100,0),hide("replies_side"+_),Wall.showReplies(_,3,!1)},repliesSideOver:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+_),t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_side"+_);if(e){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(t))[1],i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(t)[1],l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(e)[1],a=e.offsetHeight,r=window.lastWindowHeight||0,n=o+i-r+15,s=l+a-r;cur.wallRepliesSideOver=[_,t,n,s],Wall.repliesSideUpdate()}},repliesSideOut:function(_){cur.wallRepliesSideOver&&cur.wallRepliesSideOver[0]==_&&delete cur.wallRepliesSideOver},repliesSideUpdate:function(_){var e=cur.wallRepliesSideOver;if(e){var t,o=e[1],i=e[4]||{},l=e[5]||"",a="replies_side";void 0===_&&(_=Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)()),_<e[2]?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(o),t={marginTop:0,opacity:1}):_<e[3]?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(o),a+=" replies_side_fixed",t={opacity:Math.max(0,Math.min(1,(e[3]-_)/200))}):(a+=" replies_side_hidden",t={marginTop:e[3]-e[2],opacity:0,display:null}),JSON.stringify(i)!==JSON.stringify(t)&&(each(i,(function(_,e){i[_]=null})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.vb)(o,extend(i,t)),e[4]=t),l!=a&&(o&&(o.className=a),e[5]=a)}},highlightReply:function(_){(_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(_))&&(addClass(_,"reply_highlighted"),setTimeout((function(){removeClass(_,"reply_highlighted")}),1500))},scrollHighlightReply:function(_){if(_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(_))if(cur.wallLayer||_.id.match(/^post-?\d+(photo|video|market)?_\d+$/)&&(window.wkcur&&wkcur.shown||window.mvcur&&mvcur.mvShown||cur.pvShown)){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(_,!0)[1];e<0||e>lastWindowHeight-200?Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.b)(wkLayerWrap,{scrollTop:wkLayerWrap.scrollTop+e-50},300,Wall.highlightReply.pbind(_)):Wall.highlightReply(_)}else{var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(_)[1];t<Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)()+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)("page_header")[1]?(Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(t,300),setTimeout(Wall.highlightReply.pbind(_),300)):Wall.highlightReply(_)}},showReply:function(_,e,t,o){if(cur.viewAsBox)return!1;if(o&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.d)(o))return!0;if(window.mvcur&&mvcur.post==e)return Videoview.showComment(t),!1;var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+t);if(i)Wall.scrollHighlightReply(i);else if(cur.wallLayer==e)WkView.wallShowPreviousReplies(t);else if(e.match(/market/))Market.comments(e);else{if(_.tt&&_.tt.hide&&_.tt.hide(),"full"==cur.wallType){var l=t.split("_");return delete nav.objLoc.offset,nav.go(extend(nav.objLoc,{reply:l[1]}))}Wall.showReplies(e,!1,t)}return!1},showReplies:function(_,e,t,o){if(Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.d)(o||window.event))return!0;if(cur.viewAsBox)return cur.viewAsBox();if(cur.wallLayer!=_||!wkcur.reverse){cur.wallMyOpened[_]=3!=e;var i={act:"get_replies",post:_,count:e},l={onDone:Wall._repliesLoaded.pbind(_,t),showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o.pbind("wrh"+_),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w.pbind("wrh"+_),local:1};if(t||e&&!(e>20)||(extend(i,{cont:"replies"+_}),extend(l,{frame:1}),cur.onFrameBlocksDone=function(){setTimeout(Wall.repliesSideSetup.pbind(_),browser.msie?100:10)}),ajax.post("al_wall.php",i,l),!browser.msie&&e>0&&e<10){for(var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+_),r=a&&a.lastChild,n=[];n.length<e&&r;)"DIV"==r.tagName&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(r,"reply")&&n.push(r),r=r.previousSibling;if(n.length==e){var s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("reply",a,"div").length;for(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(a,'<a class="wr_header wrh_all"></a>'),Wall.updateRepliesHeader(_,a.firstChild,e,s),hide("replies_side"+_);n.length;)a.appendChild(n.pop());Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)("wrh"+_)}}return!1}},moreReplies:function(_,e,t,o){var i;if(o.deep){var l=_.split("_");i={act:"get_post_replies",offset:e,owner_id:l[0],item_id:l[1],count:t},o.order&&(i.order=o.order)}else i={act:"get_replies",offset:e,post:_,count:t};return extend(i,{rev:o.rev,from:o.from}),ajax.post("al_wall.php",i,{onDone:function(e,t,i){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+_);o.clear?l.innerHTML=e:o.rev||o.append?l.appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.h)(e)):l.innerHTML=e+l.innerHTML,wall.addReplyNames(t),o.onDone&&o.onDone(e,t,i),Wall.updateMentionsIndex()},onFail:()=>!1,showProgress:o.showProgress,hideProgress:o.hideProgress}),!1},openDeepShortReplies:function(_,e){var t=geByClass1("replies_next",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_));return t&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(t),t.focus(),t.click(),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(_)),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(e)},collapseDeepReplies:function(_,e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+e);if(t&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"replies_list_deep")){var o=Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)(),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(_)[1],l=Math.round(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.j)()/2);cur.wallLayer?(i-=o)<l&&Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.b)(wkLayerWrap,{scrollTop:wkLayerWrap.scrollTop+i-l},300):o>i-l&&Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(i-l),Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.k)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e));var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("span",{className:"progress_inline replies_next_loader"});Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(_),t.innerHTML="";var r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box_wrap"+e);r&&hide(r);var n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_wrap_deep"+e),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",t)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",t),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(s,"post-id"),b=wall.getRepliesOrder(c);removeClass(n,"replies_deep_has_field"),addClass(n,"replies_deep_has_short"),wall.updateRepliesOnScroll(),ajax.post("al_wall.php",{act:"get_collapsed_replies",reply_id:e,order:b},{onDone:function(_){t.innerHTML=_},onFail:function(){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(cur.wallTpl.reply_deep_next,{post_id:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(s,"post-id"),reply_id:e,offset:0,text:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_next_n_replies",cur.options&&cur.options.replies_page_count||20),class:" replies_next_deep"}));t.appendChild(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(_)},showProgress:function(){t.appendChild(a),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(a)},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(a)}})}},overCollapseDeepReplies:function(_){var e=geByClass1("replies_deep_collapse_icon",_),t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(e),o=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.T)(e,"bottom")),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(_),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(_),a=Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)(),r=cur.wallLayer?wkLayerWrap.scrollTop:a;cur.wallLayer&&(l[1]-=a);var n,s,c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.j)(),b=l[1]+i[1],d=Object(_web_wall_reply_utils__WEBPACK_IMPORTED_MODULE_43__.a)(),E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(d)[1];cur.wallLayer?(n=r+b-c,s=r+l[1]+t[1]+o+o-c):(n=b-c,s=l[1]+t[1]+o+o-c),cur.onScrollCollapseDeepReplies=wall.updCollapseDeepRepliesIcon.pbind(_,e,{iconSize:t,iconBottom:o,collapseSize:i,collapsePos:l,fixedField:d,fixedFieldSize:E,maxFixedScroll:n,topMaxScroll:s}),addEvent(cur.wallLayer?wkLayerWrap:window,"scroll",cur.onScrollCollapseDeepReplies),addEvent(window,"resize",cur.onScrollCollapseDeepReplies),cur.onScrollCollapseDeepReplies()},outCollapseDeepReplies:function(_){cur.onScrollCollapseDeepReplies&&(removeEvent(cur.wallLayer?wkLayerWrap:window,"scroll",cur.onScrollCollapseDeepReplies),removeEvent(window,"resize",cur.onScrollCollapseDeepReplies),delete cur.onScrollCollapseDeepReplies);var e=geByClass1("replies_deep_collapse_icon",_);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.vb)(e,{position:null,bottom:null,left:null,right:null})},updCollapseDeepRepliesIcon:function(_,e,t){var o=cur.wallLayer?wkLayerWrap.scrollTop:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)(),i=t.maxFixedScroll;if((cur.wallLayer&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t.fixedField,"wl_reply_form_fixed")||"full"===cur.wallType&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t.fixedField,"fixed"))&&(i+=t.fixedFieldSize),o<i){var l=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)((t.collapseSize[0]-t.iconSize[0])/2),a=t.topMaxScroll+t.fixedFieldSize-o,r=t.fixedFieldSize+t.iconBottom;a>0&&(r-=a),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.vb)(e,{position:"fixed",bottom:r,left:t.collapsePos[0]+l,right:"auto"})}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.vb)(e,{position:null,bottom:null,left:null,right:null})},updateCollapseDeepReplies:function(_){if(cur.wallTpl&&cur.wallTpl.reply_deep_collapse){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_wrap_deep"+_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("replies_wrap_deep",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+_));if(e){_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"post-id");var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+_);if(!t)return t;var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("reply",t).length>=2,i=geByClass1("replies_deep_collapse",e);if(o){if(i)return;i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(cur.wallTpl.reply_deep_collapse,{reply_id:_})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(i,t)}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(i)}}},showNextReplies:function(_,e,t){var o=e.split("_"),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"offset"),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"count"),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"collapse"),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"replies_prev"),n=cur.wallLayer?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_post"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)("post"+e,"reply"),c={act:"get_post_replies",owner_id:o[0],item_id:o[1],offset:i,count:l,collapse:a},b=r?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(_):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.D)(_);if(b&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(b,"reply")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(b,"replies_wrap_deep"))){var d=(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(b,"post-id")||"").split("_")[1];r?c.next_id=d:c.prev_id=d}if(s)cur.wallLayer||(n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",n));else{var E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+e),O=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(E,"top-ids");O&&(c.top_replies=O)}var u=n.offsetHeight,p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(n,"post-id");c.order=wall.getRepliesOrder(p);var P=s&&wall.isDescRepliesOrder(p,c.order);P&&(r=!r);var w=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("span",{className:"progress_inline replies_next_loader"});return ajax.post("al_wall.php",c,{onDone:function(t,o,l){var s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.p)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{innerHTML:t})),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.h)(),b=!1;s.forEach((function(_){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"wr_header")){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(_.id);e&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"reply")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"replies_wrap_deep"))||(c.appendChild(_),b=!0)}}));var d,E,O=r&&!P||!r&&P,w=!1;if(O){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_wrap_deep"+e),"replies_deep_has_short")){var M=window.innerHeight||document.documentElement.clientHeight,D=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)("page_header")[1],m=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_),f=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(m)[1];d=cur.wallLayer?wkLayerWrap.scrollTop:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)(),w=cur.wallLayer?f<M:f<d+M-D}E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(c),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(c,_)}else E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.A)(c),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.y)(c,_);var C=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(l.num),T=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(l.offset),h=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(l.count),v=Math.max(0,T+(r?-C:C)),A=h-v,W=0;if(b&&(r&&T>0||!r&&A>0)&&(W=r?i-v:Math.min(A,C),l.closest_inx>=0&&(W=Math.min(W,l.closest_inx))),document.activeElement===_?addEvent(_,"focusout",(function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(_)})):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(_),W){var L=_.cloneNode(!0);removeClass(L,"replies_next_pre_deleted"),a||(O?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(L,E),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(L,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_prev_n_replies",W))):(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.y)(L,E),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(L,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_next_n_replies",W))),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(L,"count",W),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(L,"offset",v))}removeClass(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_wrap_deep"+e),"replies_deep_has_short");var g=n.offsetHeight-u;if(w&&g){var R=d+g;cur.wallLayer?wkLayerWrap.scrollTop=R:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(R,0,!1,!0)}wall.updateCollapseDeepReplies(e),wall.updateMentionsIndex(),wall.addReplyNames(o),wall.addDeepRepliesBlock(e),cur.wallMyOpened=cur.wallMyOpened||{},cur.wallMyOpened[p]=1,wall.repliesSideSetup(p),wall.updateRepliesOnScroll()},onFail:function(){removeClass(_,"replies_next_pre_deleted")},showProgress:function(){addClass(_,"replies_next_pre_deleted"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.y)(w,_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(w)},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(w)}}),t&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(!1)},emojiOpts:{},emojiShowTT:function(_,e,t){return void 0!==Wall.emojiOpts[_]&&Emoji.ttShow(Wall.emojiOpts[_],e,t)},emojiHideTT:function(_,e,t){return void 0!==Wall.emojiOpts[_]&&Emoji.ttHide(Wall.emojiOpts[_],e,t)},initReplyEditable:function(_,e,t,o,i){if(_.emojiInited)return!1;var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_button"+t),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_media_preview"+t);_.emojiInited=!0,stManager.add([jsc("web/emoji.js"),"notifier.css"],(function(){var r=Emoji.init(_,{ttDiff:o?-40:-42,rPointer:!0,controlsCont:e,shouldFocus:!i,ref:"reply",onSend:function(){Wall.sendReply(t),_.blur()},ctrlSend:function(){return Wall.customCur().wallTpl.reply_multiline||Wall.composerListShown(_)},checkEditable:function(){cur.onReplyChanged&&cur.onReplyChanged(_,t),Wall.checkTextLen(_,"reply_warn"+t)},onChange:function(){l&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(l,"reply_send_disabled",!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(Emoji.editableVal(_))&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(a,"media_preview_has_medias")),Wall.hideCheckTimer(t,"editing")},onStickerSend:function(_,e){Wall.sendReply(t,!1,{stickerId:_,sticker_referrer:e})},initUploadForImagePasteCallback:Page.initUploadForImagePaste});if(vk.widget&&!window.emojiStickers&&Emoji.updateTabs(),Wall.emojiOpts[t]=r,cur.afterEmojiInit&&cur.afterEmojiInit[t]){var n=geByClass1("emoji_smile",Emoji.opts[r].controlsCont);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(n)&&(cur.afterEmojiInit[t](),delete cur.afterEmojiInit[t])}}))},initEditReply:function(_,e,t,o){var i,l=_,a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+_),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+_),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_fakebox"+_),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+_),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(r,"reply"),b=cur.wallLayer?wkcur:cur,d=!1;if(c){if(i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",r)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",r),d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(i,"deep_active")){if(!cur.reply_to){var E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(r,"answering-id");if(E){var O=_.split("_")[1];cur.reply_to=[Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(E),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(O)],Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("reply_to"+_,O)}}wall.addDeepRepliesBlock(_),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_fakebox"+_)}l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"post-id")}else cur.wallLayer?(d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_post"),"deep_active"),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_reply_form_inner")):(i=r,d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(i,"deep_active"));if(!i&&n?i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_post_wrap",n):!i&&s&&(i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_post_wrap",s)),n){var u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+l),p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(u,"can_reply_as_group"),P=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(u,"can_reply_as_any_group"),w=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(n,"owner-photo")||"",M=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(n,"owner-href")||"",D=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(n,"owner-name")||"",m="";P?m=b.wallTpl.reply_form_any_group:p&&(m=b.wallTpl.reply_form_group),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(d&&b.wallTpl.reply_form_new?b.wallTpl.reply_form_new:b.wallTpl.reply_form,{add_buttons:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(m,{post_id:_,oid:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(_),owner_photo:w||"/images/blank.gif"}),post_id:_,oid:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(_),owner_photo:w,owner_href:M,owner_name:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.J)(D))})),n.parentNode.replaceChild(s,n),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+_)}if(!a)throw new Error("Failed to init new reply or edit reply: no reply field");if(Wall.initReplyEditable(a,s,_,e,t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(a,"composer"))o&&o();else{var f,C,T,h,v=[],A=!1;window.mvcur&&mvcur.mvShown?f=mvcur.mvMediaTypes:cur.wallLayer==l?f=wkcur.options.rmedia_types:window.pvcur&&cur.pvShown?(f=pvcur.rmedia_types,C=0,T=0):f=b.options&&b.options.rmedia_types,(d||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(i.parentElement,"VerticalVideoLayerInfo__commentsReply"))&&(A=!0,C=0,T=0),each(f||b.options&&b.options.media_types||[],(function(){Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(this[0],["photo","video","audio","doc","link","page"])&&v.push(this)}));var W=!1,L=l.match(/^(\d+_)?-?\d+_(photo|video|topic|market)?\d+(mv)?(_\d+)?$/);v.length>0&&L?(h={lnk:d?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_more_attaches"+_):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_add_media_"+_),preview:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_media_preview"+_),actionsEl:!1,gearEl:!1,types:v,options:{from:"topic"===L[2]?"board":"comment",limit:2,disabledTypes:["album","market","market_album","poll",_web_ui_media_selector_ui_media_selector__WEBPACK_IMPORTED_MODULE_38__.a],toggleLnk:!0,maxShown:void 0!==C?C:void 0,hideAfterCount:void 0!==T?T:void 0,vectorIcon:A,hideLabel:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_reply_add_attach_label"),toId:"full"===cur.wallType?cur.oid:cur.postTo,onToggleBlock:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+_),o=geByClass1("reply_box_photo",t);o&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.yb)(o,e)},onMediaChanged:function(){Wall.hideCheckTimer(_,"editing"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)("reply_button"+_,"reply_send_disabled",!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(Emoji.editableVal(a))&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)("reply_media_preview"+_,"media_preview_has_medias"))}}},l.match(/^-?\d+_topic/)&&(extend(h.options,{disabledTypes:["album","share","link","page"],limit:10,editable:1,sortable:1,teWidth:280,teHeight:200}),W=!0)):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)("reply_add_media_"+_),Wall.initComposer(a,{lang:{introText:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("profile_mention_start_typing"),noResult:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("profile_mention_not_found")},toup:W,wddClass:"reply_composer_dd",width:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(a.parentNode)[0],media:h,isReply:!0},o)}return void 0!==a.emojiId&&cur.afterEmojiInit&&cur.afterEmojiInit[_]&&(cur.afterEmojiInit[_](),delete cur.afterEmojiInit[_]),{postId:l,postEl:i,isReply:c,rf:a}},showEditReply:function(_,e,t,o,i,l){if(cur.viewAsBox)return setTimeout((function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+_).blur()}),0),cur.viewAsBox();if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)("post"+_,"Post--with_closed_comments_donut"))return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.vb)("replies_wrap"+_,{display:""}),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(e);var a=wall.initEditReply(_,t,i,l);if(a.rf){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("reply_box_wrap",a.rf));var r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("replies_wrap_deep",a.rf);r&&addClass(r,"replies_deep_has_field")}return cur.wallMyOpened&&(cur.wallMyOpened[_]=cur.wallMyOpened[_]||!1),cur.editing===_?(Emoji.editableFocus(a.rf,!1,!0),!1):(Wall.hideEditPostReply(),a.isReply?addClass(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_wrap_deep"+_),"deep_reply_box_open"):(addClass(a.postEl,"reply_box_open"),addClass(a.postEl,"post--replyBoxWasOpened")),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.vb)("replies_wrap"+_,{display:""}),cur.editing=_,window.Emoji&&setTimeout((function(){Emoji.editableFocus(a.rf,!1,!0),Wall.repliesSideOver(_)}),0),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.k)(window,"scroll"),void 0!==a.rf.emojiId&&cur.afterEmojiInit&&cur.afterEmojiInit[_]&&(cur.afterEmojiInit[_](),delete cur.afterEmojiInit[_]),cur.wallTpl&&cur.wallTpl.reply_multiline_intro&&ajax.post("al_wall.php",{act:"a_ctrl_submit_intro",hash:cur.wallTpl.poll_hash},{onDone:function(e){e&&cur.editing===a.postId&&Wall.replySubmitTooltip(_,1)},onFail:function(){return!0}}),window.mvcur&&(mvcur.post==a.postId&&Videoview.onShowEditReply(),mvcur.onReplyFormSizeUpdate&&mvcur.onReplyFormSizeUpdate(),mvcur.scrollBottom&&mvcur.scrollBottom()),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.v)(cur.onReplyFormSizeUpdate)&&cur.onReplyFormSizeUpdate(a.rf),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.v)(cur.onReplyFormFocus)&&cur.onReplyFormFocus(a.rf),!1)},hideEditReply:function(_,e){cur.editing=!1;var t,o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+_),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+_),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+_),a=cur.reply_to&&Wall.getReplyName(cur.reply_to[0]),r=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(window.Emoji?Emoji.editableVal(o):""),n=Wall.hasComposerMedia(o),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(i,"reply");if(!(t=cur.wallLayer?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_reply_form_inner"):s?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",i):i)&&l&&(t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_post_wrap",l)),o&&(!n||e)){if(a&&Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_40__.h)(a)&&a[1]&&(r&&a[1].indexOf(r)||(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(o,""),r="")),e&&(r||n)){var c=o&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(o,"composer");c?Composer.reset(c):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(o,""),r="",hide(geByClass1("reply_warn",t))}if(!(browser.opera_mobile||browser.safari_mobile||r)){Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.b)()&&Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.b)().isVisible()||(s?removeClass(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_wrap_deep"+_),"deep_reply_box_open"):removeClass(t,"reply_box_open")),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_link"+_)&&hide("replies_wrap"+_),window.tooltips&&l&&tooltips.hideAll(l),o.blur(),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.k)(window,"scroll"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("reply_to"+_,""),hide("reply_to_title"+_),cur.reply_to=!1;var b=Wall.emojiOpts[_];b>=0&&Emoji.opts[b]&&Emoji.opts[b].onChange&&Emoji.opts[b].onChange(),cur.onReplyFormSizeUpdate&&cur.onReplyFormSizeUpdate();var d=cur.replySubmitSettings;d&&d.tt&&d.tt.el&&d.tt.destroy(),window.mvcur&&mvcur.post==_&&(Videoview.onHideEditReply(),mvcur.onReplyFormSizeUpdate&&mvcur.onReplyFormSizeUpdate())}}},replyNamesRE:function(){wall.addReplyNames({});var _=wall.getReplyNames();if(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.u)(_))return!1;var e=[];return each(_,(function(_,t){t&&(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_40__.h)(t)&&(t=t[1]),"string"==typeof t&&e.push(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.h)(t)))})),new RegExp("^("+e.join("|")+")")},replyTo:function(_,e,t,o){var i=window.cur.wallLayer==_?wkcur:window.cur;Wall.showEditReply(_,o),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("reply_to"+_,e);var l=i.reply_to&&Wall.getReplyName(i.reply_to[0]);i.reply_to=[t,e];var a=Wall.getReplyName(t),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_as_group"+_),n=_.match(/^(-?\d+)_([a-z]+)?(\d+)([a-z]+)?$/),s=n[1],c=n[2]||"",b=n[4]||"",d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+s+c+"_"+e),E=d&&geByClass1("reply_to",d,"a"),O=Wall.replyNamesRE(),u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",d)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",d),p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(u,"deep_active"),P=p?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("replies_wrap_deep",d):null,w=P?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(P,"post-id"):_,M="";if(!p||P){var D=(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_40__.h)(a)?a[0]:a)||"";D='<a class="reply_to_mem" onclick="return wall.showReply(this, \''+w+"', '"+s+c+"_"+e+b+"', event);\">"+D+"</a>";var m='<span class="reply_to_cancel" onclick="return Wall.cancelReplyTo(\''+w+"', event);\"></span>",f='<div class="reply_to_label">'+langStr(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_reply_to"),"user",D)+"</div>";M=p?f+m:m+f}Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("reply_to_title"+w,M);var C=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+w);if(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_40__.h)(a)&&a[1]&&window.Emoji){var T=C,h=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(Emoji.val(T)));!(h=h.replace(/&nbsp;/g," "))||l&&Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_40__.h)(l)&&!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.N)(l[1]).indexOf(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.N)(h))?Emoji.val(T,a[1]):O&&(h=h.replace(O,a[1]),Emoji.val(T,h));var v=Wall.emojiOpts[_];v>=0&&Emoji.opts[v]&&Emoji.opts[v].onChange&&Emoji.opts[v].onChange(),Emoji.focus(T,!0)}if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.yb)("reply_to_title"+w,M),r){var A=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(r.parentNode)&&s<0&&E&&E.getAttribute("rid")===s;Wall.setReplyAsGroup(r,{from:A?s:vk.id})}var W=Object(_web_wall_reply_utils__WEBPACK_IMPORTED_MODULE_43__.a)();return p&&C&&W&&Object(_web_wall_deep_replies_utils__WEBPACK_IMPORTED_MODULE_42__.a)(C,W),i.onReplyFormSizeUpdate&&i.onReplyFormSizeUpdate(),window.mvcur&&mvcur.onReplyFormSizeUpdate&&mvcur.onReplyFormSizeUpdate(),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.j)(o),!1},cancelReplyTo:function(_,e){var t=window.cur.wallLayer==_?wkcur:window.cur,o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+_),i=t.reply_to&&Wall.getReplyName(t.reply_to[0]),l=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(window.Emoji?Emoji.editableVal(o):"")),a=Wall.replyNamesRE(),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+_),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",r)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",r),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(n,"deep_active");if(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_40__.h)(i)&&i[1]&&window.Emoji){l&&i[1].indexOf(l)?a&&(l=l.replace(a,""),Emoji.val(o,l)):(l="",Emoji.val(o,l));var c=Wall.emojiOpts[_];c>=0&&Emoji.opts[c]&&Emoji.opts[c].onChange&&Emoji.opts[c].onChange(),Emoji.focus(o,!0)}if(hide("reply_to_title"+_),s){var b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(r,"answering-id");if(b){var d=_.split("_")[1];t.reply_to=[Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(b),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(d)],Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("reply_to"+_,d)}else t.reply_to=!1,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("reply_to"+_,"")}else window.mvcur&&mvcur.post==_?mvcur.mvReplyTo=!1:t.reply_to=!1,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("reply_to"+_,"");return t.onReplyFormSizeUpdate&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.v)(t.onReplyFormSizeUpdate)&&t.onReplyFormSizeUpdate(o),window.mvcur&&mvcur.onReplyFormSizeUpdate&&mvcur.onReplyFormSizeUpdate(),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.j)(e),!1},replySubmitTooltip:function(_,e,t){var o=_&&window.cur.wallLayer==_?wkcur:window.cur,i=_&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_fakebox"+_)),l=i&&geByClass1("button_blue",i,"div"),a=o.replySubmitSettings;if(!(t&&l&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(l)))if(t=t||l,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"flat_button")&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.k)(t)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"button_disabled"))!e&&a&&a.tt&&a.tt.hide&&a.tt.hide();else if(a||(a=o.replySubmitSettings=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{className:"reply_submit_hint_tt_point"})),e){if(t)if(a.parentNode==t&&a.tt&&a.tt.show)a.tt.show();else{a.tt&&a.tt.el&&a.tt.destroy(),t.insertBefore(a,t.firstChild);var r=Wall.customCur().wallTpl.reply_multiline?1:0,n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(Wall.customCur().wallTpl.reply_multiline_hint,{enabled:r?"on":"",disabled:r?"":"on"}),s=i&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",i)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",i)),c=s&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(s,"deep_active");Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.c)(a,{text:n,typeClass:"tt_default_right",slide:15,shift:c?[15,8]:[0,8],asrtl:1,hasover:1,toup:!1,showdt:700,hidedt:700,dir:"auto",noZIndex:!0,onCreate:function(){radioBtns.reply_submit={els:Array.prototype.slice.apply(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("radiobtn",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_submit_hint_opts"))),val:n?1:0}}})}}else a&&a.tt&&a.tt.hide&&a.tt.hide()},onReplySubmitChanged:function(_,e){if(cur.wallTpl?cur.wallTpl.reply_multiline=_:mvcur.wallTpl&&(mvcur.wallTpl.reply_multiline=_),Wall.customCur().wallTpl&&(Wall.customCur().wallTpl.reply_multiline=_),e){var t=cur.replySubmitSettings;t&&t.tt&&t.tt.el&&t.tt.destroy()}else ajax.post("al_wall.php",{act:"a_save_ctrl_submit",value:_,hash:Wall.customCur().wallTpl.poll_hash}),window.Notifier&&Notifier.lcSend("wall_reply_multiline",{value:_})},getReplyFromId:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_as_group"+_);return!(!e||!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(e.parentNode))&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("_submit_post_box",e),"from-oid")},showCheckTimer(_,e,t){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+_),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+_),l=i&&geByClass1("WallCheckComment__timer",i);if(o&&l){Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.c)(o,{text:t.description,showdt:0,hidedt:0,shift:[0,-1],width:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(o)[0],forcetoup:!0,nohide:!0,noZIndex:browser.msie_edge,className:"WallCheckComment__tt"}),geByTag("span",l).forEach(_=>{_.style.animationDuration=t.delay+"s"}),i.classList.add("WallCheckComment--shown");var a=setTimeout(()=>{i.classList.remove("WallCheckComment--shown"),Wall.sendReply(_,void 0,e)},1e3*t.delay);l.timeout=a,l.onclick=()=>{Wall.hideCheckTimer(_,"button")},cur.destroy||(cur.destroy=[]),cur.destroy.push(()=>{a&&clearTimeout(a)}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.H)(o)}},hideCheckTimer(_){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+_),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+_),i=o&&geByClass1("WallCheckComment__timer",o);if(t&&i){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"check_timestamp");e&&l&&Wall.isCheckTimerShown(_)&&ajax.post("al_wall.php",{act:"check_comment_cancelled",post_raw:_,timestamp:l,reason:e}),i.timeout&&clearTimeout(i.timeout),t.tt&&t.tt.hide&&t.tt.hide(),o.classList.remove("WallCheckComment--shown"),"button"===e&&setTimeout(()=>Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.H)(t),0)}},isCheckTimerShown(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+_);return e&&e.classList.contains("WallCheckComment--shown")},sendReply:function(_,e,t){t=extend({},t);var o,i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_wrap_deep"+_),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("reply_to"+_);if(i?(o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",i)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",i),"post-id"),l=l||_.split("_")[1]):o=_,window.mvcur&&mvcur.post==o)return Videoview.sendComment(o,e,t);var a,r,n,s=window.cur.wallLayer==o,c=s?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_post"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+o),b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+_),d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(c,"deep_active"),E=s?wkcur:window.cur,O=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+_),u=O&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(O,"composer"),p=E.reply_to&&Wall.getReplyName(E.reply_to[0]),P=O&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(O,"send");if(P&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.v)(P))return P(_,e,t);if(t.stickerId)r={message:"",attach1_type:"sticker",attach1:t.stickerId,sticker_referrer:t.sticker_referrer};else if(t.suggest)r={message:t.suggest};else{if((r=u?Composer.getSendParams(u,Wall.sendReply.pbind(_)):{message:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(Emoji.editableVal(O))}).delayed)return;if(!r.attach1_type&&(!r.message||Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_40__.h)(p)&&p[1]&&!p[1].indexOf(r.message)))return void Emoji.editableFocus(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+_),!1,!0)}var w=window.wkcur&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wk_content");if(O&&(w&&w.contains(O)?wkcur.wallCheckComments:E.wallCheckComments)){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(O,"check_in_progress"))return;if(!(n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(O,"check_timestamp")||void 0))return Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.j)(e),void ajax.post("al_wall.php",{act:"check_comment",post_raw:o,text:r.message},{onDone(e){e&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(O,"check_timestamp",e.timestamp),e.description&&e.delay)?Wall.showCheckTimer(_,t,e):Wall.sendReply(_,void 0,t)},onFail:()=>(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(O,"check_timestamp",Date.now()),Wall.sendReply(_,void 0,t),!0),showProgress(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(O,"check_in_progress",!0)},hideProgress(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(O,"check_in_progress",null)}});if(Wall.isCheckTimerShown(_))return void Wall.hideCheckTimer(_,"button");Wall.hideCheckTimer(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(O,"check_timestamp",null)}t.stickerId||t.suggest||(u?a=Composer.reset(u):window.Emoji&&Emoji.val(O,""),O.autosize&&O.autosize.update()),E.wallMyOpened=E.wallMyOpened||{},E.wallMyReplied[o]=1,E.wallMyOpened[o]=1;var M=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_hash"+o)?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_hash"+o).value:E.options.post_hash,D=null,m=d&&(i||!s&&"full"!==E.wallType),f=wall.getRepliesOrder(o),C=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(b,"top-ids"),T=!1;if(m&&b){var h=!i&&wall.isDescRepliesOrder(o,f)?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(b):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.A)(b);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(h,"replies_next")&&(m=!1,T=!0)}extend(r,{act:"post",type:E.wallType,reply_to:o,reply_to_msg:l,reply_to_user:E.reply_to&&E.reply_to[0]||0,start_id:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("start_reply"+o),from:s?"wkview":"",hash:M,only_new:m?1:0,need_last:T?1:0,order:f,top_replies:C||null,timestamp:n}),E.reverse&&(r.rev=1);var v,A=wall.getReplyFromId(_);if(A&&(r.from_oid=A),v=E.wallType?"feed"==E.wallType?"news"==E.section?"feed_"+(E.subsection?E.subsection:E.section):"recommended"==E.section?"feed_recommended"+("recent"!=E.subsection?"_"+E.subsection:""):-1!==["friends","groups","videos","photos","list"].indexOf(E.section)?"feed_"+E.section+(E.subsection?"_"+E.subsection:""):"feed_"+E.section:"top"==E.wallType?"wall_top":"wall_"+(E.onepost?"one":(E.wallType||"").indexOf("full_")?"page":"full"):E.module,extend(r,{ref:v}),browser.mobile?Wall.hideEditReply(_):(Emoji.editableFocus(O,!1,!0),Wall.cancelReplyTo(_,e)),hide("reply_warn"+_),ajax.post("al_wall.php",Wall.fixPostParams(r),{onDone:function(e,t,i,l){if(d){if(m)return wall.onOnlyNewReplySent.apply(window,arguments);if(T)return wall.onLastChunkReplySent.apply(window,arguments);if(s)return wall.onNewReplySentLayer.apply(window,arguments)}if("full"===E.wallType)return d?FullWall.onNewReplySent.apply(window,arguments):FullWall.onReplySent.apply(window,arguments);E.wallMyReplied[o]=0,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)("reply_link"+o),hide("reply_warn"+o),Wall._repliesLoaded(_,!1,t,i,l),Wall.processPostReplyActions(e)},onFail:function(_){if(D&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(D),u?a=Composer.restore(u,a):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(O,r.message),O.autosize&&O.autosize.update(),_)return Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.d)(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_error"),_),!0},showProgress:function(){d?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.f)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_button"+_),!0):Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_button"+_))},hideProgress:function(){d?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.f)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_button"+_),!1):Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_button"+_))}}),window.cur.onPostReply&&window.cur.onPostReply(_),!r.from_oid&&r.message&&!m){var W=-++E.wallMyRepliesCnt,L=Emoji.emojiToHTML(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(r.message),!0),g=wall.getReplyNames(),R=r.reply_to_user<0?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_replied_to_group"):g[r.reply_to_user]&&g[r.reply_to_user][0],j=R?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(E.wallTpl.reply_link_to,{to_user:R}):"";if(D=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(E.wallTpl.reply_fast,{reply_id:"0_"+W,message:L.replace(/\n/g,"<br/>"),to_link:j,date:Wall.getNowRelTime(E)})),b&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(b)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_link"+_))Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)("reply_link"+_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("replies_wrap"+_);else if(!E.onepost){var I=b.nextSibling;if(I&&"replies_open"==I.className&&Wall.openNewComments(_),!s){var B=geByClass1("wr_header",b,"a"),U=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("reply",b,"div").length+1,K=U;B&&(K=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(B.getAttribute("offs").split("/")[1])+1),(K>5||U<K)&&(B||b.insertBefore(B=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("a",{className:"wr_header"}),b.firstChild),Wall.updateRepliesHeader(_,B,U,K))}}E.reverse?b.insertBefore(D,b.firstChild):b.appendChild(D),s&&(WkView.wallUpdateReplies(),E.reverse||(wkLayerWrap.scrollTop=wkLayerWrap.scrollHeight,WkView.wallUpdateRepliesOnScroll()))}},onOnlyNewReplySent:function(_,e,t){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+_),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(o,"reply"),l=i?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",o)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",o):o,a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(l,"post-id"),r=!i&&wall.isDescRepliesOrder(a);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(l,"deep_active")){var n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("replies_wrap_deep",o);i&&n&&(_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(n,"post-id"));var s=cur.wallLayer===a,c=Wall._getRepliesInfoBeforeAddNewReply(_,s),b=Wall._checkVisibilityBeforeAddNewReply(_,c,r,s);i&&wall.addDeepRepliesBlock(_);var d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(e);r&&c.repliesListEl.firstChild?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(d,c.repliesListEl.firstChild):c.repliesListEl.appendChild(d),Wall._fixScrollAfterAddNewReply(_,c,b,r,s),i&&wall.updateCollapseDeepReplies(_),Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.k)(d),wall.incReplyCounter(l),wall.addReplyNames(t)}},onLastChunkReplySent:function(_,e,t,o,i,l){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+i),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(a,"reply"),n=r?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",a)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",a):a,s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(n,"post-id"),c=!r&&wall.isDescRepliesOrder(s);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(n,"deep_active")){var b=cur.wallLayer===s,d=Wall._getRepliesInfoBeforeAddNewReply(i,b),E=Wall._checkVisibilityBeforeAddNewReply(i,d,c,b);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(d.repliesListEl,e),Wall._fixScrollAfterAddNewReply(i,d,E,c,b);var O=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+l);Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.k)(O),r&&wall.updateCollapseDeepReplies(i),wall.incReplyCounter(n,1,_),wall.addReplyNames(o)}},_getRepliesInfoBeforeAddNewReply:function(_,e){var t=e?wkLayerWrap.scrollTop:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)(),o=window.innerHeight||document.documentElement.clientHeight,i=t+(e?0:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)("page_header_cont")[1]),l=t+o,a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+_),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(a,e)[1],n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(a)[1];return{repliesListEl:a,scrollY:t,topY:i,bottomY:l,viewportHeight:o,repliesListY:r,repliesListH:n,repliesListEndY:r+n,layerFieldH:e?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)("wl_reply_form")[1]:0}},_checkVisibilityBeforeAddNewReply:function(_,e,t,o){return t?o?e.repliesListY>0&&e.repliesListY<e.viewportHeight-e.layerFieldH:e.topY<e.repliesListY&&e.bottomY>e.repliesListY:o?e.repliesListEndY>0&&e.repliesListEndY<e.viewportHeight-e.layerFieldH:e.topY<e.repliesListEndY&&e.bottomY>e.repliesListEndY},_fixScrollAfterAddNewReply:function(_,e,t,o,i){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(e.repliesListEl)[1];if(o)t||Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(e.repliesListY-100,300,!1,!0);else if(t){var a=e.scrollY+l-e.repliesListH;i?wkLayerWrap.scrollTop=a:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(a,0,!1,!0)}else{var r=e.repliesListY+l-300;i?Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.b)(wkLayerWrap,{scrollTop:e.scrollY+r},300):Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(r,300,!1,!0)}},incReplyCounter:function(_,e,t){e=e||1;var o,i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"post-id"),l=geByClass1("comment",_);l&&(t||(o=+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(l,"count"),t=Math.max(0,o+e)),Likes.update("wall"+i,{comment_num:t}))},onNewReplySentLayer:function(_,e,t,o){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_post"),l=geByClass1("wl_replies",i);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(l,e);var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.p)(l).filter((function(_){return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"reply")})).length;extend(wkcur,{offset:t,loaded:a,count:_}),wall.addReplyNames(o),WkView.wallUpdateReplies();var r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"post-id");wall.isDescRepliesOrder(r)?wkLayerWrap.scrollTop=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(i)[1]-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)("wl_replies_wrap")[1]-30:wkLayerWrap.scrollTop=wkLayerWrap.scrollHeight,WkView.wallUpdateRepliesOnScroll()},postTooltip:function(_,e,t,o){if(!cur.viewAsBox){var i=(t||{}).reply,l=(t||{}).className||"",a=i&&!(i%2)&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(_)[0]>420;o=o||{},i||(o.appendEl=bodyNode),Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.c)(_,extend({url:"al_wall.php",params:extend({act:"post_tt",post:e},t||{}),slide:15,shift:[a?417:27,6,6],ajaxdt:100,showdt:400,hidedt:200,dir:"auto",className:"rich wall_tt"+l,typeClass:a?"tt_default_right":"tt_default"},o))}},adsMarkTooltip:function(_){cur.viewAsBox||Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.c)(_,{black:1,shift:[15,7,0],text:_.getAttribute("data-tooltip")})},hideEditPostReply:function(_,e){if(!1!==cur.editing&&(cur.wallLayer&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)("wl_post","deep_active")&&(e=!0),e||!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(boxLayerBG)&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(layerBG))){var t=_&&_.target?_.target:{},o=t.id;cur.editing?cur.editingHide?cur.editingHide(cur.editing,t):_&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("_reply_wrap",t)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"reply_link")||o=="reply_field"+cur.editing||"reply_to_link"==t.className)||Wall.hideEditReply(cur.editing):(cur.wallAddMedia||{}).chosenMedia||_&&"post_field"==o||Wall.hideEditPost()}},postShowDeletedMessage:function(_,e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+_);if(t){var o=geByClass1("_post_content",t)||geByClass1("feedback_row_t",t);Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.g)(o),hide(o),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(o),"post_publish")&&hide(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(o));var i="post_del"+_,l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(i),a='<span class="dld_inner">'+e+"</span>";return l?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(l,a),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(l)):t.appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{id:i,className:"dld",innerHTML:a})),!0}return!1},postHideDeletedMessage:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+_);if(e){var t=geByClass1("_post_content",e)||geByClass1("feedback_row_t",e);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(t),"post_publish")&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(t));var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_del"+_);return hide(o),!0}return!1},isArchiveWall:function(){return cur.pgParams&&cur.pgParams.archive||"wall_archive"===cur.module},rollbackPostsArchiveState:function(_,e,t){if(Wall.isArchiveWall()&&!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.m)(_)){var o=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(e.split("_")[1]);ajax.post("al_wall_archive.php",{act:"a_rollback_state",from:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_more_tab")?"profile":"wall",postId:o,hash:t},{onDone:function(_){cur.wallArchiveRolledback=!0,Wall.postShowDeletedMessage(e,_)},showProgress:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.p)(_),hideProgress:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.x)(_)})}},restoreLastRollbackPostsArchiveState:function(_,e,t){if(Wall.isArchiveWall()&&!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.m)(_)){var o=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(e.split("_")[1]);ajax.post("al_wall_archive.php",{act:"a_restore_last_rollback",from:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_more_tab")?"profile":"wall",postId:o,hash:t},{onDone:function(_){delete cur.wallArchiveRolledback,Wall.postShowDeletedMessage(e,_)},showProgress:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.p)(_),hideProgress:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.x)(_)})}},postSetArchiveState:function postSetArchiveState(actionEl,postRaw,hash,state,isRollback){if(!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.a)(actionEl)&&!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.m)(actionEl)){var postId=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(postRaw.split("_")[1]),isActionMenuItem=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(actionEl,"ui_actions_menu_item"),localCur=cur.wallLayer?wkcur:cur;localCur&&(localCur.wallMyDeleted||(localCur.wallMyDeleted={}),localCur.wallMyDeleted[postRaw]=!Wall.isArchiveWall()==!state?0:1);var extended=!isRollback&&(Wall.isArchiveWall()?cur.wallArchiveRestored>=3&&!cur.wallArchiveRolledback:!cur.wallArchiveArchived);ajax.post("al_wall_archive.php",{act:"a_set_state",from:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_more_tab")?"profile":cur.pid?"post":"wall",hash,state:state?1:void 0,extended:extended?1:void 0,postId},{onDone:function onDone(msg,js){if(Wall.isArchiveWall()&&(state=!state,isRollback||(cur.wallArchiveRestored||(cur.wallArchiveRestored=0),cur.wallArchiveRestored++)),state&&(cur.wallArchiveArchived=!0),isRollback?Wall.postHideDeletedMessage(postRaw):Wall.postShowDeletedMessage(postRaw,msg)){"full_own"==cur.wallType||"full_all"==cur.wallType?(Pagination.recache(state?-1:1),FullWall.updateSummary(cur.pgCount)):"full"==cur.wallType&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(postEl,"reply")&&(state?--cur.pgOffset:++cur.pgOffset,state?--cur.pgCount:++cur.pgCount,FullWall.repliesSummary(cur.pgCount));var postEl=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+postRaw);"own"!=cur.wallType&&"all"!=cur.wallType&&"archive"!=cur.wallType||(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(postEl,"own")&&(state?++cur.deletedCnts.own:--cur.deletedCnts.own),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(postEl,"all")&&(state?++cur.deletedCnts.all:--cur.deletedCnts.all),Wall.isArchiveWall()&&(state?--cur.deletedCnts.archive:++cur.deletedCnts.archive),Wall.update())}if(js)try{eval(js)}catch(_){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__.d)(_,js)}},showProgress:isActionMenuItem?_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.n.pbind(actionEl):Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.p)(actionEl),hideProgress:isActionMenuItem?_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.v.pbind(actionEl):Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.x)(actionEl)})}},deletePost:function(_,e,t,o,i){(cur.wallLayer?wkcur:cur).wallMyDeleted[e]=1;var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e),a=geByClass1("post_actions",l),r={act:"delete",post:e,hash:t,root:o?1:0,confirm:i?1:0,from:"wall"};cur.suggestedDeletedCount&&cur.suggestedDeletedCount>=2&&(r.delete_all=1),Object(_internal_nospam_common__WEBPACK_IMPORTED_MODULE_46__.isClaimContent)()&&(r._nol=JSON.stringify(window.nav.objLoc)),ajax.post("al_wall.php",r,{onDone:function(i,a,r){if(r)var n=Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.d)(i,r,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_delete"),(function(){n.hide(),wall.deletePost(_,e,t,o,1)}),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("box_cancel"));else{Wall.postShowDeletedMessage(e,i),"full_own"==cur.wallType||"full_all"==cur.wallType?(Pagination.recache(-1),FullWall.updateSummary(cur.pgCount)):"full"==cur.wallType&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(l,"reply")&&(cur.pgOffset--,cur.pgCount--,FullWall.repliesSummary(cur.pgCount));var s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_publish_wrap"+e);s&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(s,"suggest")&&(void 0===cur.suggestedDeletedCount&&(cur.suggestedDeletedCount=0),cur.suggestedDeletedCount++),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(l,"suggest")?Wall.suggestUpdate(-1):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(l,"postponed")?wall.postponeUpdateCount():"own"!=cur.wallType&&"all"!=cur.wallType&&"archive"!=cur.wallType||(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(l,"own")&&++cur.deletedCnts.own,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(l,"all")&&++cur.deletedCnts.all,Wall.isArchiveWall()&&++cur.deletedCnts.archive,Wall.update())}},showProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.n)(_):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"flat_button")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(_):addClass(a,"post_actions_progress")},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.v)(_):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"flat_button")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(_):removeClass(a,"post_actions_progress")}});var n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("delete_post"+e);n&&n.tt&&n.tt.el&&n.tt.destroy()},markAsSpam:function markAsSpam(el,post,hash,inline){var postEl="block_market-items"===post?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(post):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+post),adData=postEl?postEl.getAttribute("data-ad"):"";ajax.post("al_wall.php",{act:"spam",post,ad_data:adData,hash,from:inline?"inline":""},{onDone:function onDone(msg,js,js2){if("string"!=typeof js&&js2&&(js=js2),inline)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(el).replaceChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{innerHTML:msg}),el);else{var postSelector="#post"+post,r=el.closest(postSelector)||document.querySelector(postSelector),t=geByClass1("_post_content",r)||geByClass1("feedback_row_t",r);Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.g)(r);var pd=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_del"+post);if(pd?(pd.innerHTML=msg,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(pd)):r.appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{id:"post_del"+post,innerHTML:msg})),hide(t),js)try{eval(js)}catch(_){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__.d)(_,js)}adData&&Wall._setAdReportHandler(post,adData,hash)}},showProgress:function(){el&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(el,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.n)(el):inline&&(hide(el),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(el)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(el).appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("span",{className:"progress_inline"}))))},hideProgress:function(){el&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(el,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.v)(el):inline&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(el),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(el)))},stat:[jsc("web/privacy.js"),"privacy.css"]});var btn=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("delete_post"+post);btn&&btn.tt&&btn.tt.el&&btn.tt.destroy()},_setAdReportHandler(_,e,t){var o="ad_report_"+_,i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(o+"_send");if(i){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("radiobtn",o),a=geByClass1("radiobtn on",o);window.radioBtns[o]={val:a.dataset.value||1,els:l};var r=()=>{var l=_slicedToArray(_.split("_"),2),a=l[0],n=l[1],s=window.radioBtns[o].val;ajax.post("reports.php",{act:"report_ad_common",type:"ad",oid:a,item_id:n,hash:t,reason:s,ad_data:e},{onDone:()=>{delete window.radioBtns[o],i.removeEventListener("click",r),window.closeChosenReportReasonBlock(a,n),Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.f)(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("reports_warning_sent"))},onFail:_=>(Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.f)(_),!1),showProgress:()=>Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(i),hideProgress:()=>Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(i)})};i.addEventListener("click",r)}},showIgnoreItemReasons:function(_,e,t,o,i,l,a){var r="block_market-items"===e?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e);if(r){var n=r.getAttribute("data-ad");Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.g)(r),ajax.post("/al_wall.php?misc",{act:"get_ignore_reasons",post_raw:e,feed_raw:t,caption_type:i,uids:l,hash:o,ad_data:n,mode:a},{onDone:function(_){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(r,_);var n="ad_hide_"+e,s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(n+"_send");if(s){var c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("radiobtn",n),b=geByClass1("radiobtn on",n);window.radioBtns[n]={val:b.dataset.value||1,els:c},s.addEventListener("click",()=>{Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(s);var _=window.radioBtns[n].val;("feed"===a?window.feed.ignoreItem:wall.ignoreAdsItem)(e,t,o,i,l,_).then(()=>{delete window.radioBtns[n]}).catch(()=>Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(s))})}},showProgress:function(){_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"ui_actions_menu_item")&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.n)(_)},hideProgress:function(){_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"ui_actions_menu_item")&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.v)(_)}})}},ignoreAdsItem:function(_,e,t,o,i){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+_),r=a.getAttribute("data-ad"),n=geByClass1("ui_actions_menu_wrap",a);if(a)return n&&uiActionsMenu.toggle(n,!1),Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.g)(a),new Promise((o,i)=>{ajax.post("/al_feed.php?misc",{act:"a_ignore_item",post_raw:_,feed_raw:e,hash:t,ad_data:r,no_html:1,reason_id:l},{onDone:function(){hide(a),o()},onFail:i})})},ignoreAdsOwner:function(_,e,t,o){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+_);i&&ajax.post("/al_feed.php?misc",{act:"a_ignore_owner",post_raw:_,owner_id:e,hash:t,list:0,no_html:1},{onDone:function(_){hide(i)},showProgress:o&&_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o.pbind(o),hideProgress:o&&_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w.pbind(o)})},markAsAds:function(_,e,t,o){ajax.post("al_wall.php",{act:"mark_as_ads",post:_,hash:e,full:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(o)},{onDone:function(e){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("ui_actions_menu_item_mark_as_ads"+_).innerHTML=e}})},restorePost:function(_,e,t){return(cur.wallLayer?wkcur:cur).wallMyDeleted[_]=0,ajax.post("al_wall.php",{act:"restore",post:_,hash:e,root:t?1:0},{onDone:function(e){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)("post_del_btn"+_),Wall.postHideDeletedMessage(_)){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+_);"full_own"==cur.wallType||"full_all"==cur.wallType?(Pagination.recache(1),FullWall.updateSummary(cur.pgCount)):"full"==cur.wallType&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"reply")&&(cur.pgOffset++,cur.pgCount++,FullWall.repliesSummary(cur.pgCount)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"suggest")?Wall.suggestUpdate(1):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"postponed")?wall.postponeUpdateCount():"own"!=cur.wallType&&"all"!=cur.wallType&&"archive"!=cur.wallType||(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"own")&&--cur.deletedCnts.own,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"all")&&--cur.deletedCnts.all,Wall.isArchiveWall()&&--cur.deletedCnts.archive,Wall.update())}}}),!1},blockPostApp:function(_,e,t,o){ajax.post("al_wall.php",{act:"block_post_app",aid:_,from:e,hash:t},{onDone:function(_){o.parentNode.parentNode.innerHTML=_},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o.pbind(o),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w.pbind(o)})},checkPostClick:function(_,e,t){if(e=e||window.event,!_||!e)return!0;var o=e.target||e.srcElement,i=8,l=!1,a=/wall_post_text|published_comment|post_media|page_event_share|page_public_share|page_group_share|feed_friends|feed_videos|feed_explain_list|explain|feed_photos|feedback_row/;do{if(!o||o==_||o.onclick||o.onmousedown||Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(o.tagName,["A","IMG","TEXTAREA","EMBED","OBJECT"])||Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(o.className,["play_new","video_box_wrap"])||(l=o.className.match&&o.className.match(a)))break}while(i--&&(o=o.parentNode));if(!l)return!1;if(cur.postClicked||(cur.postClicked={}),!t||!cur.postClicked[_]){if(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)((window.getSelection&&window.getSelection()||document.getSelection&&document.getSelection()||document.selection&&document.selection.createRange().text||"").toString()))return!1;t&&(cur.postClicked[_]=!0,setTimeout((function(){cur.postClicked[_]=!1}),2e3))}return o||!0},postClick:function(_,e,t){t=t||{};var o,i=(_||"").match(/^(-?\d+)_(wall)?(\d+)$/),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+_);if(o=!!t.skipCheck||Wall.checkPostClick(l,e)){if(!0!==o){var a=geByClass1("wall_post_more",o,"a");if(a&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(a))return a.onclick(),void(i||removeClass(l,"wall_post_over"))}if(i&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(l,"suggest")&&!cur.onepost){var r=l&&l.getAttribute("data-ad"),n=l&&l.getAttribute("data-ad-block-uid"),s="/wall"+i[1]+"_"+i[3];if(browser.mobile&&e){var c={};r&&n&&(c.params={_post_ad_data:r,_post_ad_block_unique_id:n}),nav.go(s,null,c)}else Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.d)(e)?window.open(s,"_blank"):(r&&n&&(t.ads_params={post_ad_data:r,ad_block_unique_id:n}),Wall.hideEditPostReply(),Wall.postFull("wall"+i[1]+"_"+i[3],!1,t))}}},postClickStat:function(_){var e=(_=Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.h)(_)).currentTarget,t=[];e.getAttribute("data-ad-view")&&(t.push(Wall.postsGetRaws(e)),Page.postsSeen(t));var o=_.target;Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(o.getAttribute("data-post-click-type"),["post_owner_img","post_owner_link"])||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(o,"author")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(o,"post_image")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(o,"post_img")?Wall.triggerAdStat(e,"click_post_owner"):("A"==_.target.nodeName&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wall_post_text",_.target,e)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("page_media_thumbed_link",_.target,e)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_.target,"lnk")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("lnk",_.target,e))&&Wall.triggerAdStat(e,"click_post_link")},adBlockClickStat:function(_,e){var t=(_=Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.h)(_)).currentTarget;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"_ads_block_data_w")||(t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_ads_block_data_w",t));var o=[];t.getAttribute("data-ad-view")&&(o.push(Wall.postsGetRaws(t)),Page.postsSeen(o)),Wall.triggerAdStat(t,e)},getAdsEvents:function(){var _=Wall._lsAdsEvents;return _||(_=Wall._lsAdsEvents=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.a.get(Wall.LS_ADS_EVENTS)||{}),_},cleanAdsEvents:function(){var _=Wall.getAdsEvents(),e=(new Date).getTime()/1e3|0,t=!1;each(_,(function(o,i){e-i>=3600&&(delete _[o],t=!0)})),t&&_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.a.set(Wall.LS_ADS_EVENTS,_)},triggerAdPostStat:function(_,e){Wall.triggerAdStat(_,e)},triggerAdStat:function triggerAdStat(elIdOrEl,event){for(var el="string"==typeof elIdOrEl?Wall.domPost(elIdOrEl):elIdOrEl,pixels=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(el,"ad-stat-"+event);pixels;){var adBlockUID=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(el,"ad-block-uid"),isUniqueEvent=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(event,["load","impression","impression_long","video_start","video_play_3s","video_play_10s","video_play_25","video_play_50","video_play_75","video_play_95","video_play_100"]);if(isUniqueEvent&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(el,"ad-disabled-stat-"+event,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(el,"ad-stat-"+event)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(el,"ad-stat-"+event,null)),adBlockUID&&isUniqueEvent)try{var eventKey=Object(_web_lib_utils__WEBPACK_IMPORTED_MODULE_32__.g)(""+event+adBlockUID),lsData=Wall.getAdsEvents();if(lsData[eventKey])break;var now=(new Date).getTime()/1e3|0;lsData[eventKey]=now,_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.a.set(Wall.LS_ADS_EVENTS,lsData)}catch(_){try{console.log(_.message)}catch(_){}}pixels=pixels.split("$$$"),each(pixels,(function(_,e){Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.K)().src=e}));break}var statHtml=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(el,"ad-stat-html-"+event);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(el,"ad-stat-html-"+event,null),statHtml)for(var statElemWrap=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{innerHTML:statHtml}),elem;elem=statElemWrap.firstChild;)if(el.appendChild(elem),"SCRIPT"===elem.tagName)try{eval(elem.innerHTML)}catch(_){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__.d)(_,elem.innerHTML)}},copyHistory:function(_,e,t,o){var i=(_=_||window.event).target||_.srcElement,l=8,a=!1,r=/published_a_quote/;do{if(!i||(a=i.className.match(r))||i.onclick||i.onmousedown||Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(i.tagName,["A","IMG"]))break}while(l--&&(i=i.parentNode));if(a&&!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)((window.getSelection&&window.getSelection()||document.getSelection&&document.getSelection()||document.selection&&document.selection.createRange().text||"").toString()))return ajax.post("al_wall.php",{act:"copy_history",post:t,offset:o,from:cur.module},{onDone:function(_){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e)&&(hide(e),_)){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e),"published_by_quote")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e):e;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(t).insertBefore(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.h)(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(t)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.db)(t,"im_rows")?IM.updateScroll(!0):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.db)(t,"wl_post")&&WkView.wallUpdateReplies()}}}),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(_)},postFull:function(_,e,t){if(_.match(/^wall-?\d+_\d+$/)&&!(t||{}).nolist&&(!cur.pgParams||!cur.pgParams.owners_only&&!cur.pgParams.q))switch(cur.wallType){case"all":case"full_all":_+="/all"}return Object(_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_14__.H)({w:_},!1,e,t)},checkReplyClick:function(_,e){if(e=e||window.event,!_||!e)return!1;var t=e.target||e.srcElement,o=8,i=!1;do{if(!t||t==_||t.onclick||t.onmousedown||"A"==t.tagName&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"_reply_lnk")||Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(t.tagName,["IMG","TEXTAREA","EMBED","OBJECT"])&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"emoji")||"wpe_cont"==t.id||(i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"_reply_content")))break}while(o--&&(t=t.parentNode));return!i||!!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)((window.getSelection&&window.getSelection()||document.getSelection&&document.getSelection()||document.selection&&document.selection.createRange().text||"").toString())},replyClick:function(_,e,t,o){var i=_.split("_"),l=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(i[0]),a=i[1].replace(/-?\d+$/,""),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+l+a+"_"+e),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+_);if(!(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(n,"closed_comments")||!cur.stickerClicked&&Wall.checkReplyClick(r,t))){(t||{}).cancelBubble=!0;var s=geByClass1("wall_reply_more",r,"a");if(s&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(s))return removeClass(r,"reply_moreable"),void s.onclick();if(o){n=cur.wallLayer?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_post"):n;var c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(n,"deep_active"),b=cur.stickerClicked||!1,d=_;if(c){var E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("replies_wrap_deep",r);d=E?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(E,"post-id"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(r,"post-id")}var O=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+d);cur.stickerClicked=!1,!b||O&&O.emojiInited||(cur.afterEmojiInit=cur.afterEmojiInit||{},cur.afterEmojiInit[d]=function(){Emoji.clickSticker(b,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+d))}),Wall.replyTo(d,e,o,t),b&&O&&O.emojiInited&&Emoji.clickSticker(b,O)}}},stickerClick:function(_,e,t){if((t||{}).cancelBubble=!0,window.Emoji)if(e){var o=Emoji.isStickerPackEnabled(_,Wall.stickerClick.pbind(_,e));if(0!==o)if(o){var i=e.parentNode,l=8;do{if(!i||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(i,"reply"))break}while(l--&&(i=i.parentNode));i&&i.onclick&&(cur.stickerClicked=_,i.onclick())}else Emoji.clickSticker(_,!1)}else Emoji.clickSticker(_,!1);else stManager.add([jsc("web/emoji.js"),"notifier.css"],(function(){Wall.stickerClick(_,e)}))},domPost:function(_){return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+_)},formatCount:function(_,e){return e=e||{},Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.l)(_,e)},likeFullUpdate:function(_,e,t){var o=e.match(/^(wall|photo|video|note|topic|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(-?\d+_)(\d+)/);Likes.update(o?(o[1]||"wall")+o[2]+o[3]:e,t)},likeUpdate:function(_,e,t,o,i,l,a){a||(o=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(o)),!1===_&&cur.wallLayer===e&&(_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_post_body"));var r=e.match(/(-?\d+)(_?)(photo|video|note|topic|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/),n=r[1]+"_"+r[4],s=_&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_post_content",_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",_))||wall.domPost(n),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(s,a?"_views_wrap":l?"_share_wrap":"_like_wrap"),b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(c,"_count");if(b){if(!a&&!l){var d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(s,"_views_wrap"),E=d&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(d,"_count");!E||!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(d,"_auto_update")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(E)&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(E)!=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(b)||wall.likeUpdate(_,e,0,this.formatCount(o),void 0,void 0,1)}var O=c.tt||{},u=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.d)(O.opts||{}),p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(O.container,"_value"),P=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(O.container,"_content"),w=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(O.container,"_title");i&&w&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(w,i),O&&(O.likeInvalidated=!0),p&&(p.value=o),Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.c)(b,a?o:Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.j)(o,"%s",!0),{str:"auto",noWrapWidth:!!a}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(c,l?"my_share":"my_like",t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(c,a?"no_views":l?"no_shares":"no_likes",!o),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(P,"me_hidden",!t&&!a),o?O.el&&(!1===i?O.destroy&&O.destroy():Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(O.container)||i||!1===i||tooltips.show(O.el,extend(u,{showdt:0}))):O.el&&O.hide();var M=Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.j)(o,"%s",!0);if(a){var D=geByClass1("feedback_views",s),m=0;m=o.match(/^\d+$/)?Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(o):5,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(D,"<em>"+o+"</em> "+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_X_post_views",m,!0))}else if(l){var f="";o>0&&(f="<em>"+M+"</em> "+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_X_shared",o,!0)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(geByClass1("feedback_share",s),f)}else{var C="";o>0&&(C="<em>"+M+"</em> "+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_like")),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(geByClass1("feedback_like",s),C)}Wall.updateFeedbackVisibility(s)}},updateFeedbackVisibility:function(_){var e=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(geByClass1("feedback_views",_))),t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(geByClass1("feedback_share",_))),o=!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(geByClass1("feedback_like",_)))&&!t&&!e;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(geByClass1("post_feedback_info",_),"empty",o)},likeShareUpdate:function(_,e,t,o,i){return Wall.likeUpdate(_,e,t,o,i,!0)},like:function(_,e){if(vk.id&&!cur.viewAsBox){var t=wall.domPost(_),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(t,"_like_wrap"),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(o,"_icon"),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(o,"_count"),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(i,"fw_like_icon")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(i,"fw_my_like"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(o,"my_like"),r=_.match(/(-?\d+)(_?)(photo|video|note|topic|market|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/),n=(r[3]||"wall")+r[1]+"_"+r[4],s=cur.module;cur.wallType&&(s="feed"==cur.wallType?"feed_"+("news"==cur.section&&cur.subsection?cur.subsection:cur.section):"top"==cur.wallType?"wall_top":"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full")),ajax.post("like.php",{act:"a_do_"+(a?"un":"")+"like",object:n,hash:e,wall:2,from:s},{onDone:Wall.likeFullUpdate.pbind(!1,_)});var c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(l);Wall.likeUpdate(!1,_,!a,Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(c)+(a?-1:1)),cur.onWallLike&&cur.onWallLike()}},bookmark:function(_,e){Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(e),addClass(_,"bookmarked")},likeShare:function(_,e){if(vk.id&&!cur.viewAsBox){var t=_.match(/(-?\d+)(_?)(photo|video|note|topic|market|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/),o=(t[3]||"wall")+t[1]+"_"+t[4],i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("like_share_"+o),l=Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)(i),a=cur.wallType?"feed"==cur.wallType?"feed_"+cur.section:"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full"):cur.module;"top"==cur.wallType&&(a="wall_top"),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)(i),ajax.post("like.php",{act:"a_do_"+(l?"un":"")+"publish",object:o,hash:e,wall:2,ref:a},{onDone:Wall.likeFullUpdate.pbind(!1,_)});var r=wall.domPost(_),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(r,"_like_wrap"),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(n,"_icon"),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(r,"_count")),b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(s,"fw_like_icon")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(s,"fw_my_like"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(n,"my_like");Wall.likeUpdate(!1,_,!0,Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(c)+(b?0:1))}},likeShareCustom:function(_,e){var t=_.match(/(-?\d+)(_?)(photo|video|note|topic|market|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/),o=(t[3]||"wall")+t[1]+"_"+t[4];Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.b)("like.php",extend({act:"publish_box",object:o},e))},likeShareCheckLen:function(_,e,t){_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(_),e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e),t=t||255;var o=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(_)).replace(/\n\n\n+/g,"\n\n");if(_.lastLen!==o.length){var i=_.lastLen=o.length,l=i-o.replace(/\n/g,"").length;i>t-50||l>4?(i>t?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(e,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("text_exceeds_symbol_limit",i-t)):l>4?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(e,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_recommended_lines",l-4)):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(e,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("text_N_symbols_remain",t-i)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(e)):hide(e)}},showLikesPage:function(_,e,t){cur.likesBox.loadTabContent("like.php",{act:"a_get_members",object:_,published:e,offset:t,wall:1},e)},clearLikesCache:function(_,e){var t="^/like.php#"+Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_27__.toQueryString)({act:"a_get_members",object:_,published:e,offset:12345,wall:1,tab:e,only_content:1}).replace("12345","\\d+")+"$",o=new RegExp(t,"i");for(var i in ajaxCache)o.test(i)&&delete ajaxCache[i]},subscribeByButton:function(_,e,t,o,i){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"_subscribed"),a={showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o.pbind(_),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w.pbind(_),onDone:function(){l=!l,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(_,"_subscribed",l)}},r={};e>0&&i&&(r.from=i),Wall.subscribeToAuthor(l,e,t,o,a,r)},subscribeByAction:function(_,e,t,o){if(!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.a)(_)){var i=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"value"))?1:0,l={showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.n.pbind(_),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.v.pbind(_)},a={};e>0&&o?a.from=o:e<0&&(l=extend(l,{onDone:function(o,a,r){if(a){var n=Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.d)(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_warning"),a,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("group_leave_group"),(function(){n.hide(),Wall.subscribeToAuthor(i,e,t,l,"",{confirm:1})}),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_cancel"));return!0}Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(_,o),_.setAttribute("data-value",1-i),r&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(_)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(_))}})),Wall.subscribeToAuthor(i,e,t,"",l,a)}},subscribeToAuthor:function(_,e,t,o,i,l){i=extend({onFail:function(_){setTimeout(Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.d)(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_error"),_).hide,3e3)}},i),l=l||{},e>0?ajax.post("al_friends.php",extend({act:_?"remove":"add",mid:e,hash:t,from:"feed"},l),i):ajax.post("al_groups.php",extend({act:_?"list_leave":"list_enter",gid:-e,hash:t},l),i),o&&ajax.post("al_feed.php?act=viral_subscribe_stat",{author_id:e,subscribe:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(!_),hash:o})},showPhoto:function(_,e,t,o,i){return!Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.b)("al_photos.php",{act:"photo_box",to_id:_,photo:e,hash:t},{cache:1},!!o.href&&i)},_animDelX:function(_,e,t,o){},domFC:function(_){for(_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(_);_&&_.id.match(/page_wall_count_/);)_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(_);return _},domPS:function(_){for(_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.D)(_);_&&_.id.match(/page_wall_count_/);)_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.D)(_);return _},scrollCheck:function(_,e,t){var o,i,l=null==e?Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)():e,a=0,r=[],n=window.innerHeight||document.documentElement.clientHeight||bodyNode.clientHeight;if(window.scrollAnimation)return!1;if((Wall.repliesSideUpdate(l),cur.wallPage)&&(i="suggested"==cur.wallTab?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_suggested_posts"):"top"==cur.wallTab?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_top_posts"):"donut"===cur.wallTab?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_donut_posts"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_posts"),(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(cur.topRow)!=i||((cur.topRow||{}).id||"").match(/page_wall_count_/))&&(cur.topRow=Wall.domFC(i)),vk.id&&cur.topRow&&!cur.topRow.id.match(/page_wall_count_/)&&!((window.curNotifier||{}).idle_manager||{}).is_idle)){for(var s=[],c=Wall.domPS(cur.topRow);c;c=Wall.domPS(c))cur.topRow.offsetTop>l&&(cur.topRow=c),c.unseen||(c.unseen=!0,s.push(Wall.postsGetRaws(c)));Page.postsUnseen(s);for(var b=cur.topRow;b;b=o){LongView&&LongView.register(b,"Wall");var d=a||b.offsetTop;if(d>=l+n)break;(((o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(b))||{}).id||"").match(/page_wall_count_/)&&(o=null),(a=o?o.offsetTop:d+b.offsetHeight)<l&&o&&(cur.topRow=o);var E=b.bits||0;E>=3||(E|=(d>=l&&d<l+n?1:0)|(a>=l&&a<l+n?2:0))&&(b.bits=E,3==E&&r.push(Wall.postsGetRaws(b)))}LongView&&LongView.onScroll(l,n),Page.postsSeen(r)}if(cur.wallAutoMore&&!cur.wallLoading&&!cur.viewAsBox){var O=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_more_link");Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(O)&&l+lastWindowHeight+1500>Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(O)[1]&&O.onclick()}},postsGetRaws:function(_){var e,t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.p)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_).children,_),o={};if(!_)return o;o.module=cur.module,o.index=t;var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"_ads_promoted_post"),l=_.getAttribute("data-ad-view");l&&(o["ad_"+l]=1,i&&(o.module+="_ads_promoted_post"));var a=_.getAttribute("post_view_hash");if(a&&(o.hash=a),"block_"===_.id.substr(0,6)){o[_.id]=1,o.block=_.id.substr(6);var r=attr(_,"data-contain");r&&(r=r.split(",")).forEach((function(_){_=_.split(":"),o[_[0]]=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(_[1])||1}))}else(e=_.id.match(/^post(-?\d+_\d+)$/))&&(o[e[1]]=1,(e=(_.getAttribute("data-copy")||"").match(/^(-?\d+_\d+)$/))&&(o[e[1]]=-1));return o},votingExtendParams:function(_,e){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"fixed")&&(_.is_fixed=1),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"preview")&&(_.is_preview=1),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"board")&&(_.is_board=1),vk.widget&&(_.is_widget=1,_.width=cur.widgetWidth,_.url=cur.url),cur.voteHash&&(_.vote_hash=cur.voteHash);var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"id");t&&(_.voting_id=t);var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"ref");o&&(_.ref=o);var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"hash");i&&(_.hash=i);var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"material");return!l||_.is_board||_.is_widget||(_.material=l),_},votingRevote:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("media_voting",_);if(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"id");if(this.votingIsLocked(t))return;var o=this.votingExtendParams({act:"revote"},e);ajax.post("al_voting.php",o,{onDone:this.votingUpdateFull.bind(this,t),showProgress:this.votingLock.bind(this,t),hideProgress:this.votingUnlock.bind(this,t)})}},votingIsLocked:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_media_voting"+_),t=!1;return e.forEach(_=>{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"media_voting_locked")&&(t=!0)}),t},votingLock:function(_){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_media_voting"+_).forEach(_=>{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"disabled")&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"queue")||addClass(_,"media_voting_locked")})},votingUnlock:function(_){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_media_voting"+_).forEach(_=>{removeClass(_,"media_voting_locked")})},votingUpdate:function(_,e){ajax.post("al_voting.php",{act:"get_layout",voting_id:_},{onDone:t=>{Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.v)(e)&&!1===e(t)||(this.votingUpdateFull(_,t),this.votingUnlock(_))},onFail:()=>this.votingUnlock(_),showProgress:()=>this.votingLock(_)})},votingUpdateFull:function(_,e){if(_&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.A)(e)){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_media_voting"+_);t.length&&(t.forEach(_=>{if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"disabled")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"queue"))if(""===e)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(_);else{var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.h)(e);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"media_voting_can_vote")){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(t);addClass(o,"media_voting_just_voted"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.G)(_,t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.nb)(o,"media_voting_just_voted")}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.G)(_,t)}}),window.IMBRIDGE&&setTimeout(IMBRIDGE.syncHistory.bind(IMBRIDGE),0),vk.widget&&window.WPoll&&window.WPoll.resizeWidget())}},votingUpdatePartly:function(_,e){if(_&&isObject(e)&&!this.votingIsLocked(_)){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_media_voting"+_);if(t.length){var o=e.answers.reduce((_,e)=>Math.max(_,e.rate),0),i={};e.answers.forEach(_=>{_.isLeader=_.rate===o,i[_.id]=_}),t.some(t=>{if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"disabled")){if(t.classList.contains("media_voting_voted")&&!e.votes)return this.votingUpdate(_),!0;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("media_voting_option_wrap",t).forEach(_=>{var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"id"),o=i[t];if(_.tt&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.v)(_.tt.destroy)&&_.tt.destroy(),o){var l=geByClass1("media_voting_option_bar",_),a=geByClass1("media_voting_option_percent",_),r=geByClass1("media_voting_option_count",_),n=geByClass1("media_voting_option_counter",_),s=Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.j)(o.votes,"%s",!0),c=new Array(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.h)(s).textContent.split("").length+2).join("0");Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.A)(r),c),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.A)(n),s),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(a,e.votes?o.rate:""),l.style.transform=`scaleX(${.01*o.rate})`,l.style.oTransform=`scaleX(${.01*o.rate})`,o.votes?r.classList.remove("media_voting_option_count_hidden"):(r.classList.add("media_voting_option_count_hidden"),_.classList.remove("media_voting_option_voted")),o.isLeader?_.classList.add("media_voting_option_leader"):_.classList.remove("media_voting_option_leader")}});var o=geByClass1("_media_voting_footer_voted_text",t);if(o){var l;l=e.votes?vk.widget?"voting_x_voted_short":"voting_x_voted":"voting_nobody_voted",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(o,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)(l,e.votes,!0));var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("media_voting_footer_voted_friend",t);a.length>e.votes&&a.forEach(_=>{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(_)})}}}),window.IMBRIDGE&&window.IMBRIDGE.syncHistory(),vk.widget&&window.WPoll&&window.WPoll.resizeWidget()}}},votingUpdateByPostRaw:function(_){if(vk.id){_=_.split("_");var e=positive(_[1]),t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(_[0]),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_post_media_voting"+t+"_"+e);if(o&&o.length){var i=geByClass1("media_voting",o[0]);if(i){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"id");this.votingUpdate(l)}}}},votingVote:function(_,e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"id");if(!this.votingIsLocked(t)&&vk.id){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"queue"))return this.votingUpdate(t,_=>{if(_&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.A)(_)){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.h)(_));if(t&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"queue")&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"disabled"))return this.votingVote(t,e,!0),!1}});if(e.length){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_),"wk_voting_box"),i=this.votingExtendParams({act:"vote",option_ids:e.join(",")},_);ajax.post("al_voting.php",i,{onDone:(_,e)=>{o?nav.reload():(vk.widget&&window.WPoll&&window.WPoll.updateShareMessage(e),this.votingUpdateFull(t,_))},showProgress:this.votingLock.bind(this,t),hideProgress:()=>{o||this.votingUnlock(t)}})}}else vk.widget&&Widgets.oauth()},votingButtonVote:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("media_voting",_);if(e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"media_voting_multiple")){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("media_voting_option_selected",e),o=[];t.forEach((function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"id");e&&o.push(e)})),this.votingVote(e,o)}},votingOptionVote:function(_,e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("media_voting",_);if(t){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"media_voting_multiple")){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"id");if(this.votingIsLocked(o)||!vk.id)return void(vk.widget&&Widgets.oauth());Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(_,"media_voting_option_selected");var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("media_voting_option_selected",t).length;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(t,"media_voting_has_selected_options",i)}else{var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"id");this.votingVote(t,[l])}Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(e)}},votingOptionTooltip:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("media_voting",_);if(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"id"),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"owner-id"),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"id"),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"board");Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.c)(_,{url:"al_voting.php",params:{act:"option_tt",option_id:t,owner_id:o,is_board:l,voting_id:i},slide:15,ajaxdt:100,showdt:400,hidedt:200,dir:"auto",shift:[0,10,10],typeClass:"voting_tt"})}},votingLayer:function(_,e){var t=!!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"media_voting_option_wrap")&&_,o=t?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"id"):0,i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"media_voting")?_:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("media_voting",_);if(i){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"id"),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"owner-id"),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"board"),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"ref"),s={w:(r?"board_poll":"poll")+a+"_"+l};if(o&&(s.opt_id=o),vk.widget)window.open(location.origin+"/"+s.w,"poll");else{var c={queue:1,noloader:!!Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.b)()};"story"===n&&(c.customRef="story"),Object(_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_14__.H)(s,!1,void 0,c)}Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(e)}},votingExport:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("media_voting",_);if(e&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"board")){var t=this.votingExtendParams({act:"export_box"},e);(vk.widget?window.showBox:_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.b)("al_voting.php",t,{onDone:function(){Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.b)().setOptions({width:500})}})}},votingOnMain:function(_,e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("media_voting",_);if(t){if(this.votingIsLocked(o))return;var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"id"),i=this.votingExtendParams({act:"onmain",state:e?1:0},t);ajax.post("al_voting.php",i,{onDone:this.votingUpdateFull.bind(this,o),showProgress:this.votingLock.bind(this,o),hideProgress:this.votingUnlock.bind(this,o)})}},votingClosed:function(_,e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("media_voting",_);if(t){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"id");if(this.votingIsLocked(o))return;var i=this.votingExtendParams({act:"closed",state:e?1:0},t);ajax.post("al_voting.php",i,{onDone:this.votingUpdateFull.bind(this,o),showProgress:this.votingLock.bind(this,o),hideProgress:this.votingUnlock.bind(this,o)})}},votingNarrowAction:function votingNarrowAction(votingId,hash,action){var act,state;switch(action){case 101:act="closed",state=0;break;case 102:act="closed",state=1;break;case 103:act="onmain",state=0;break;case 104:act="onmain",state=1}act&&!cur.votingNarrowActionProgress&&ajax.post("al_voting.php",{act,voting_id:votingId,is_fixed:1,state,narrow:1,hash},{onDone:function onDone(html,js){var votingModuleEl=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("group_voting");if(votingModuleEl&&(votingModuleEl=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(votingModuleEl),html?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.G)(votingModuleEl,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.h)(html)):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(votingModuleEl)),js)try{eval(js)}catch(_){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__.d)(_,js)}},showProgress:function(){cur.votingNarrowActionProgress=!0},hideProgress:function(){cur.votingNarrowActionProgress=!1}})},votingReport:function(_,e){if(!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.a)(_)){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("media_voting",_);if(t){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"id");if(this.votingIsLocked(o))return;var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"board");ajax.post("al_voting.php",{act:"a_report_form",voting_id:o,is_board:i,hash:e},{onDone:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.h)(_);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"media_voting_board")&&addClass(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(e),"media_voting_board"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.G)(t,e),vk.widget&&window.WPoll&&window.WPoll.resizeWidget()},showProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.n)(_),this.votingLock(o)}.bind(this),hideProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.v)(_),this.votingUnlock(o)}.bind(this)})}}},foTT:function(_,e,t){t&&t.oid&&(e=t.oid==vk.id?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_my_friends_only"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("wpfo"+t.pid)),Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.b)(_,e)},update:function(){if(cur.wallLayer)WkView.wallUpdateReplies();else{var _="top"===cur.wallType,e="archive"===cur.wallType,t="donut"===cur.wallType;if(("all"===cur.wallType||"own"===cur.wallType||_||e||t)&&("all"===cur.wallTab||"own"===cur.wallTab||"top"===cur.wallTab||"archive"===cur.wallTab||"donut"===cur.wallTab)){var o=e?"all":_||t?"own":cur.wallType,i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_more_link"),l=Wall.getPostsWrap(cur.wallType),a=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(cur.deletedCnts[o]),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)(o,l).length-a,n=!1;if((_||e||t)&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(geByClass1("no_posts",l))||_&&cur.wallTopFinished===cur.oid||e&&cur.wallArchiveFinished===cur.oid||t&&(cur.wallDonutFinished===cur.oid||Wall.cantAccessDonutPosts())))n=!0;else{var s;if(s=e?Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_archive")):_?Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_top")):t?Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_donut")):"own"===o?Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_own")):Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_all")),"suggested"!==cur.wallTab){var c=s;cur.oid<0&&cur.options.fixed_post_id&&(c-=1),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_posts_count",c?Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.j)(c,cur.options.wall_counts):cur.options.wall_no)}var b=r;!_&&!e&&cur.options.fixed_post_id&&cur.options.wall_oid<0&&(b+=1),n=b>=s-a}n?hide(i):(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(i),i.onclick=Wall.showMore.pbind(r)),cur.wallTab==cur.wallType&&(shortCurrency(),cur.gifAutoplayScrollHandler&&cur.gifAutoplayScrollHandler(),cur.videoAutoplayScrollHandler&&cur.videoAutoplayScrollHandler())}}},getAbsDate:function(_,e){e=e||window.cur;var t,o=new Date(_||Date.now()),i=o.getHours(),l=o.getMinutes(),a="";return e.wallTpl.time_system&&(a=e.wallTpl.time_system[i>11?1:0],i=i%12||12),t=i>9?i:"0"+i,l=l>9?l:"0"+l,e.wallTpl.date_format.replace("{am_pm}",a).replace("{hour}",i).replace("{num_hour}",t).replace("{minute}",l)},getNowRelTime:function(_){_=_||window.cur;var e=Date.now();return'<span class="rel_date rel_date_needs_update" time="'+Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(e/1e3-(_.tsDiff||0))+'" abs_time="'+Wall.getAbsDate(e,_)+'">'+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_just_now")+"</span>"},getNewPostHTML:function(_,e,t,o){var i,l=(o=o||window.cur).wallTpl.post;if(l){var a,r=[],n=_[2],s=n.split("_")[0],c="",b=_[4].split("|"),d=Wall.getNowRelTime(o),E="1"===_[8];E?c=o.wallTpl.reply_link||"":s!=vk.id&&(c=o.wallTpl.own_reply_link||"");var O=_[3].replace("mem_link","author").replace("memLink","author"),u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(O),p=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.J)(u.innerText||u.textContent||""));-1!=_[6].indexOf('id="wpfo')&&(d+=`<span class="page_friends_only inl_bl dvd">${Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_post_privacy_friends")}</span>`),o.wallTpl.custom_del&&(e>(_[9]==s?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER)||s==vk.id||_[9]==vk.id||_[2].split("_")[0]!=_[4])&&r.push(o.wallTpl.custom_del),e>(_[9]==s?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER)||s==vk.id||_[9]==vk.id?r.push(o.wallTpl.del):_[2].split("_")[0]!=_[4]&&r.push(o.wallTpl.spam);var P=e>constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR&&_[9]==s||s==vk.id||_[9]==vk.id;P&&"rss"!==_[13]&&r.push(o.wallTpl.edit),s!=vk.id&&_[9]!=vk.id||!_[6]||(_[6]=_[6].replace("vk2017_snippet_show_layer_button","vk2017_snippet_show_layer_button_hidden"));var w=s<0&&_[9]==s&&e>constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR,M=Object(_web_reactions_reactions_wall_reactions_wall__WEBPACK_IMPORTED_MODULE_37__.a)(_,o);return a={oid:s,name:O,actions:r.length&&(null===(i=o.wallTpl)||void 0===i?void 0:i.post_actions)?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(o.wallTpl.post_actions,{actions:r.join("")}):"",replies:"",reply_link:c,own_reply_link:o.wallTpl.own_reply_link,reply_box:E&&o.wallTpl.reply_box?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(o.wallTpl.reply_box,{actions:"",class:w?" reply_fakebox_with_official":""}):"",photo:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.jb)(b[0]),link:_[5],text:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.jb)(_[6]),date:d,post_id:_[2],poll_hash:o.wallTpl.poll_hash,date_postfix:"",user_image:"",post_url:"/wall"+n.replace("_wall_reply","_"),can_reply_as_group:w?1:"",owner_photo:w?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.jb)(b[1]||b[0]):"",owner_href:w?_[5]:"",owner_name:w?p:"",online_class:s>0?" online":"",likes:Likes.makeTemplate(o.wallTpl.post_likes,{buttons_prepend:null==M?void 0:M.template,like_class_name:null==M?void 0:M.likeClassName,object_raw:_[2]}),class:""},t&&extend(a,t(a,_)),P&&o.wallTpl.author_data&&(a.date=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(o.wallTpl.author_data,{date:a.date,post_id:n})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(l,a),a)}console.error(new Error("Missing wall post template"))},updateAnonNewPost:function(_,e){if("anon"==_[13]){var t=geByClass1("author",e),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("span");o.innerHTML=t.innerHTML,o.className=t.className,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.G)(t,o);var i=geByClass1("post_image",e),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("span");l.innerHTML=i.innerHTML,l.className=i.className,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.G)(i,l)}return e},getNewReplyHTML:function(_,e,t,o){var i=o||window.cur,l=i.wallTpl.reply,a=[],r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+_[2])||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_fakebox"+_[2])||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("fwr_text"),n="",s="",c="",b=_[10]||"",d=Object(_web_reactions_reactions_wall_reactions_wall__WEBPACK_IMPORTED_MODULE_37__.b)(_,i);if(l){if(e>constants.Groups.GROUPS_ADMIN_LEVEL_USER||!_[2].indexOf(vk.id+"_")||_[4]==vk.id?a.push(i.wallTpl.del_reply):_[2].split("_")[0]!=_[4]&&a.push(i.wallTpl.spam_reply),(e>constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR&&_[4]==Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(_[2])||_[4]==vk.id)&&a.push(i.wallTpl.edit_reply),-1!=_[8].indexOf('class="wall_reply_more"')&&(n+="reply_moreable"),r)n+=" reply_replieable",s=i.wallTpl.reply_link_wrap,wall.getReplyNames()[_[4]]||wall.addReplyName(_[4],[_[11],_[12]]);n&&(c=" onclick=\"Wall.replyClick('%post_id%', %reply_msg_id%, event, %reply_uid%)\""),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(i.wallTpl.reply_actions,{actions:a.join("")});var E={name:_[5].replace("mem_link","author"),photo:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.jb)(_[6]),link:_[7],text:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.jb)(_[8]),classname:n,actions:a,attr:c,date:Wall.getNowRelTime(i),to_link:b,answer_link:s,post_id:_[2],reply_id:_[3],like_id:_[3].replace("_","_wall_reply"),reply_msg_id:_[3].split("_")[1],reply_uid:_[4]||"false",likes:Likes.makeTemplate(i.wallTpl.reply_likes,{buttons_prepend:null==d?void 0:d.template,like_class_name:null==d?void 0:d.likeClassName,object_raw:_[2]})};return t&&extend(E,t(E)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(l,E)}console.error(new Error("Missing wall reply template"))},updatePostImages:function(_){return _.replace(/<img[^>]+>/g,(function(_){return _.match(/class=/)?_.replace("src=","data-src=").replace('class="','class="__need_img '):_}))},loadPostImages:function(_){each(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("__need_img",_,"img"),(function(){var _=this.getAttribute("data-src");_&&(this.src=_,this.removeAttribute("data-src")),removeClass(this,"__need_img")}))},openNewComments:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+_),t=e.nextSibling,o=geByClass1("wr_header",e,"a"),i=0,l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("reply",e,"div").length,a=l,r=t.newCnt;Wall.loadPostImages(e),each(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.d)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("new_reply",e,"div")),(function(){if(removeClass(this,"new_reply"),Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.k)(this),100==++i)return!1})),o&&(a=i+Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(o.getAttribute("offs").split("/")[1])),l+=-r+i,(a>3||l<a)&&(o||e.insertBefore(o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("a",{className:"wr_header"}),e.firstChild),Wall.updateRepliesHeader(_,o,l,a)),cur.wallMyOpened[_]=1,t&&"replies_open"==t.className&&(r>100?(t.innerHTML=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("news_x_new_replies_more",Math.min(100,r-i)),t.newCnt-=i):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(t)),Wall.repliesSideSetup(_)},langWordNumeric:function(_,e,t){return Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.n)(_,e,t)},updateTimes:function(_){var e=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Date.now()/1e3),t=[];e-=cur.tsDiff,each(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("rel_date_needs_update",_||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_posts"),"span"),(function(_,o){if(o){var i=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(o.getAttribute("time")),l=e-i,a=Object(_web_lib_date__WEBPACK_IMPORTED_MODULE_48__.b)(l);a||(a=o.getAttribute("abs_time"),t.push(o)),o.innerHTML=a}})),each(t,(function(){removeClass(this,"rel_date_needs_update")}))},updateRepliesHeader:function(_,e,t,o){if(!cur.onepost){var i,l,a=e.href,r=3,n=0;if(!a&&(l=_.match(/^(-?\d+)_(photo|video|note|topic|video|)(\d+)$/))){var s=l[2]||"wall";switch(a="/"+s+l[1]+"_"+l[3],s){case"topic":a+="?offset=last&scroll=1";break;case"wall":a+="?offset=last&f=replies"}e.href=a}o>t?t<100?(i=o>100?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_show_n_last_replies",100):Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_show_all_n_replies",o),r=!1):i=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_hide_replies"):(i=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_hide_replies"),n=1),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(e,"wrh_all",n),e.innerHTML=i,e.onclick=Wall.showReplies.pbind(_,r,!1),e.setAttribute("offs",t+"/"+o)}},processQueueEvent(_){if(isObject(_)&&_.entity_type)switch(_.entity_type){case"voting":this.votingUpdatePartly(_.data.id,_.data)}},updated:function(_,e,t){var o=_?window.wkcur:window.cur;if(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_40__.h)(o.wallQueues)&&Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_40__.h)(t.events)&&t.events.length){var i=o.wallQueues.filter(_=>_.key===e).pop();if(i)if(t.failed)o.wallQueues=!1;else{i.ts=t.ts;var l=_?wkLayerWrap.scrollTop:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)(),a=l,r=!(o.wallType||"").indexOf("full"),n=o.onepost,s=!!_,c=_;r&&(nav.objLoc.q||nav.objLoc.search||nav.objLoc.day)||(each(t.events,(function(){if(isObject(this))return Wall.processQueueEvent(this);var e=this.split("<!>"),t=e[0],i=e[1],l=e[2],b=0,d=0,E=_&&window.cur.wallLayer==l&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_post");if(E&&"del_reply"!=i||(E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+l),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.db)(E,_?wkLayerWrap:pageNode)||(E=null)),t==o.options.qversion){switch((Wall.isArchiveWall()?"archive_post"===i:"reveal_post"===i)&&(i="res_post"),(Wall.isArchiveWall()?"reveal_post"===i:"archive_post"===i)&&(i="del_post"),i){case"new_post":if(E)break;if(r&&o.pgStart>0){o.pgOffset++;break}if(o.oid==vk.id&&vk.id==e[9]&&window.curNotifier&&curNotifier.idle_manager.is_idle&&Wall.clearInput(),"own"!==o.wallType&&"all"!==o.wallType&&!Wall.hasPosts("own"))break;var O=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_posts"),u=O.lastChild,p=!!r&&FullWall.addTetaTet,P=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(e[e.length-1]),w=void 0!==o.options.is_admin?o.options.is_admin:o.options.wall_oid<0?8&P?constants.Groups.GROUPS_ADMIN_LEVEL_EDITOR:2&P?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER:constants.Groups.GROUPS_ADMIN_LEVEL_USER,M=Wall.getNewPostHTML(e,w,p,o);if(!M)break;var D=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(M),m=O.firstChild;if(Wall.updateAnonNewPost(e,D),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+l))break;for(u&&u!=D?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(u):u=!1,r?u||o.pgOffset++:(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_all",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_all"))+1),addClass(D,"all"),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(e[10])&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_own",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_own"))+1),addClass(D,"own"))),0==e[8]&&addClass(D,"closed_comments"),o.deepRepliesActive&&addClass(D,"deep_active");m&&("INPUT"==m.tagName||1!=m.nodeType||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(m,"post_fixed"));)m=m.nextSibling;O!==Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(m)&&Wall.sendInsertBeforeError(),O.insertBefore(D,m),Wall.votingUpdateByPostRaw(l),b=D.offsetHeight+15,d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(D,c)[1],Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.k)(D),Object(_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_29__.d)(),Wall.updateMentionsIndex(),AudioUtils.updateQueueReceivedPost(D);break;case"edit_post":var f=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wpt"+l);if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(E)||!f)break;var C=geByClass1("wall_post_more",f);C&&(C=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(C))),b=-f.offsetHeight,d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(f,c)[1];var T=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.jb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(e[3],{poll_hash:o.wallTpl.poll_hash})),h=o.videoInlinePlayer&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.db)(window._videoLastInlined[0],f),v=h&&"playing"==o.videoInlinePlayer.getState();if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(f,T),h){var A=geByClass1("page_post_sized_thumbs",f);1==Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.p)(A).length&&(A.innerHTML="",A.appendChild(window._videoLastInlined[1]),A.appendChild(window._videoLastInlined[0]),v&&setTimeout((function(){o.videoInlinePlayer.play()}),0))}C&&(C=geByClass1("wall_post_more",f))&&C.onclick(),Wall.votingUpdateByPostRaw(l),b+=f.offsetHeight,Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.k)(f),Wall.updatePostAuthorData(l);break;case"edit_reply":var W=e[3],L=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wpt"+W);if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)("post"+W)||!L)break;var g=geByClass1("wall_reply_more",L);g&&(g=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(g)));var R=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.jb)(e[4]);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(L,R),b=-L.offsetHeight,d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(L,c)[1],g&&(g=geByClass1("wall_reply_more",L))&&g.onclick(),b+=L.offsetHeight,Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.k)(L);break;case"post_parsed_link":if(!E)break;var j=geByClass1("wall_postlink_preview_btn_disabled",E);if(!j)break;var I=e[3];if("1"===I)removeClass(j,"wall_postlink_preview_btn_disabled"),removeClass(j,"button_disabled");else if("0"===I)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(j);else if(I){var B=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("a",{href:I,className:"flat_button",innerHTML:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_preview_link")});Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.G)(j,B)}break;case"del_post":E&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(E)&&!o.wallMyDeleted[l]&&!n&&(b-=E.offsetHeight+15,d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(E,c)[1],Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.g)(E),addClass(E,"unshown"),r||s||(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_all",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_all"))-1),e[3]&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_own",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_own"))-1),Wall.isArchiveWall()&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_archive",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_archive"))-1)));break;case"res_post":E&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(E)&&((o.wallRnd==e[4]||Wall.isArchiveWall())&&removeClass(E,"unshown"),r?o.pgOffset++:(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_all",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_all"))+1),e[3]&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_own",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_own"))+1),Wall.isArchiveWall()&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_archive",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_archive"))+1)));break;case"new_reply":if(!E||o.wallMyReplied[l]||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e[3])||n&&o.pgOffset<o.pgCount||s&&(o.reverse?o.offset:o.offset+o.loaded<o.count))break;if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(s?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_post"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+l),"deep_active")){var U=wall.addNewReply(e);b+=U[0],d=U[1];break}var K=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+l),y=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_wrap"+l),k=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(e[e.length-1]),x=void 0!==o.options.is_admin?o.options.is_admin:o.options.wall_oid<0?8&k?constants.Groups.GROUPS_ADMIN_LEVEL_EDITOR:2&k?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER:constants.Groups.GROUPS_ADMIN_LEVEL_USER,S=Wall.getNewReplyHTML(e,x,!1,o);if(!S)break;var F,H=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(S),N=s?K.offsetHeight:E.offsetHeight,J=!1;if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(K)&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(y)&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)("reply_link"+l)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("wall_fixed",y)){F=K.nextSibling;var q=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("new_reply",K,"div").length+1;if(s||n||o.wallMyOpened[l]){if(!n){F&&"replies_open"==F.className&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(F),J=!0;var V=geByClass1("wr_header",K,"a"),G=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("reply",K,"div").length+1,z=G;V&&(z=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(V.getAttribute("offs").split("/")[1])+1),(z>5||G<z)&&(V||K.insertBefore(V=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("a",{className:"wr_header"}),K.firstChild),Wall.updateRepliesHeader(l,V,G,z))}}else addClass(H,"new_reply"),F&&"replies_open"==F.className||(F=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{className:"replies_open",onclick:Wall.openNewComments.pbind(l),role:"button",tabIndex:0}),K.parentNode.insertBefore(F,K.nextSibling)),F.innerHTML=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_x_new_replies_more",Math.min(100,q)),F.newCnt=q}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)("reply_link"+l),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(y,K),J=!0;_&&o.reverse&&K.firstChild?K.insertBefore(H,K.firstChild):K.appendChild(H),J&&Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.k)(H),s?(o.count++,o.loaded++,WkView.wallUpdateReplies(),b=K.offsetHeight-N,d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(H,c)[1]):(n&&(FullWall.repliesSummary(e[13]),o.pgOffset++,o.pgCount++,FullWall.repliesSummary(o.pgCount),Pagination.pageReady(!1),FullWall.onePostOnScroll(!1,!1,!0)),b=E.offsetHeight-N,d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(J?H:F)[1],Wall.repliesSideSetup(l)),Wall.updateMentionsIndex(),Likes.update("wall"+l,{comment_num:e[13]});break;case"del_reply":if(o.wallMyDeleted[l]||!E)break;var Y=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",E)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",E);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(Y,"deep_active")){var $=wall.removeDeepReply(e);b+=$[0],d=$[1];break}if(b-=E.offsetHeight,d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(E,c)[1],Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.g)(E),o.layerpost)hide(E),o.count--,o.loaded--;else{n&&(o.pgOffset--,o.pgCount--,FullWall.repliesSummary(o.pgCount));var X=E.parentNode.id.match(/replies(-?\d+_\d+)/);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(E),X&&Wall.repliesSideSetup(X[1])}break;case"view_post":Wall.likeUpdate(!1,l,0,Wall.formatCount(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(e[3])),void 0,void 0,1);break;case"like_post":case"like_reply":if(!E)break;var Q="like_reply"==i?"wall_reply"+l:l,Z=E&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(E,"_like_wrap"),__=E&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(E,"_share_wrap"),e_=Object(_web_reactions_reactions_wall_reactions_wall__WEBPACK_IMPORTED_MODULE_37__.c)(e);wall.likeFullUpdate(Z,Q,_extends({isQueueUpdate:!0,like_my:Z&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(Z,"my_like"),like_num:e[3],like_title:!1,share_my:__&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(__,"my_share"),share_num:e[4],share_title:!1},e_));break;case"upd_ci":var t_=e[2],o_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("current_info"),i_=o_||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_current_info");if(!i_)break;switch(e[3]){case"audio":var l_=geByClass1("current_audio_cnt");l_&&l_.tt&&l_.tt.hide();var a_=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(e[5]||""),r_=a_?"":" hidden",n_="";o_||(n_+=" onmouseover=\"showTooltip(this, {forcetoup: true, text: '"+o.options.ciAudioTip+"', black: 1, shift: [14, 5, 5]})\" onclick=\"Page.playCurrent(this, '"+e[4]+"')\""),t_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(o.options.ciAudioTpl,{text:t_,attrs:n_,count:a_,cnt_class:r_}),wall.updateOwnerStatus(t_,i_,e,o_);break;case"app":var s_=e[6]?"[12, 5, 5]":"[15, 5, 5]",c_=e[6]?" current_app_icon":"",b_=o_?' onclick="cur.ciApp = '+e[4]+'"':" onmouseover=\"showTooltip(this, {forcetoup: true, text: '"+o.options.ciAppTip+"', black: 1, shift: "+s_+'})" href="'+e[5]+'?ref=14" onclick="return showApp(event, '+e[4]+', 1, 14, cur.oid)"';e[6]&&(b_+=" style=\"background-image: url('"+e[6]+"'); background-size: 16px 16px;\""),t_='<a class="current_app'+c_+'"'+b_+">"+t_+"</a>",wall.updateOwnerStatus(t_,i_,e,o_);break;default:stManager.add([jsc("web/emoji.js")],(function(){t_=t_?'<span class="current_text">'+Emoji.emojiToHTML(t_,!0)+"</span>":t_,wall.updateOwnerStatus(t_,i_,e,o_)}))}break;case"upd_ci_cnt":var d_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("current_info"),E_=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(e[2]),O_=d_||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_current_info"),u_=O_&&geByClass1("current_audio_cnt",O_);u_&&(u_.tt&&u_.tt.destroy(),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(u_,"hidden",0==E_),Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.c)(u_,Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.j)(E_,"%s",!0),{str:"auto"}));break;case"cover_updated":var p_=geByClass1("_page_cover");if(p_&&e[2]){var P_=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.K)(),w_=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.z)()?e[3]:e[2];P_.src=w_,P_.onload=function(){p_.style.backgroundImage="url('"+w_+"')",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(P_)}}}b&&(_?d<0:a+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)("page_header_cont")[1]>d)&&(a+=b)}})),a!=l&&l>100&&!o.onepost&&(_?wkLayerWrap.scrollTop=a:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(a,0,!1,!0)),Wall.update())}}},updateOwnerStatus:function(_,e,t,o){o&&(_='<span class="'+(_?"my_current_info":"no_current_info")+'">'+(_||Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("change_current_info"))+"</span>",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(e.parentNode.nextSibling,_),!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)("currinfo_editor")&&cur.oid>0&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.yb)("currinfo_audio","app"!=t[3]),t[2]&&"app"!=t[3]&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("currinfo_audio"),Boolean(t[2])),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.yb)("currinfo_app","app"==t[3]),addClass("currinfo_app","on")));Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(e,_)},updateMentionsIndex:function(_){if(clearTimeout(cur.wallUpdateMentionsIndexTO),_){var e={},t=[],o=new RegExp("^(https?://(vk.com|"+location.host.replace(/\./,"\\.")+"))?/?"),i=[];each(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("author",bodyNode,"a"),(function(){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(this),i=this.href.replace(o,"");if(void 0===e[i]){var l=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(this.getAttribute("data-from-id"));l&&l!=vk.id&&(e[i]=t.length,t.push([l,_,"@"+i,"/images/camera_c.gif"]))}})),i=(i=i.concat(Array.prototype.slice.apply(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post_image",bodyNode,"a")))).concat(Array.prototype.slice.apply(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("reply_image",bodyNode,"a"))),each(i,(function(){var _=this.href.replace(o,""),i=e[_];if(void 0!==i){for(var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(this);l&&"IMG"!=l.tagName;)l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(l);l&&(t[i][3]=l.getAttribute("src"),delete e[_])}})),cur.wallMentions=t}else cur.wallUpdateMentionsIndexTO=setTimeout(wall.updateMentionsIndex.pbind(!0),300)},initUpdates:function(_){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(_&&_.length&&window.Notifier){var t=e?window.wkcur:window.cur,o=()=>{t.wallQueues&&t.wallQueues.forEach(_=>{Notifier.addKey(_,(_,t)=>{Wall.updated(e,_,t)})})};if(!t.wallQueues){var i=setInterval(o,1e4);e?t._hide.push(()=>clearInterval(i)):t.destroy.push(()=>clearInterval(i))}t.wallQueues=_,o()}},initWallOptions:function(_){extend(cur,{wallCheckComments:_.check_comments,wallType:_.wall_type,wallTpl:_.wall_tpl,wallMyDeleted:{},tsDiff:_.wall_tpl&&_.wall_tpl.abs_timestamp?900*Math.round((Date.now()/1e3-_.wall_tpl.abs_timestamp)/900):0,wallMyOpened:{},wallMyReplied:{},wallMentions:[],wallMyRepliesCnt:0,wallUploadOpts:_.upload,wallUploadVideoOpts:_.upload_video,hasGroupAudioAccess:_.hasGroupAudioAccess,wallAdsReplacedFeatureTooltip:_.ads_replaced_feature_tooltip,wallAdsReplacedFeatureTooltipHash:_.ads_replaced_feature_tooltip_hash,wallBestFriendsLockFeatureTooltip:_.best_friends_lock_feature_tooltip,wallBestFriendsLockFeatureTooltipHash:_.best_friends_lock_feature_tooltip_hash,wallBestFriendsSettingsFeatureTooltip:_.best_friends_settings_feature_tooltip,wallBestFriendsSettingsFeatureTooltipKey:_.best_friends_settings_feature_tooltip_key,wallBestFriendsSettingsFeatureTooltipHash:_.best_friends_settings_feature_tooltip_hash,wallBestFriendsPostFeatureTooltip:_.best_friends_post_feature_tooltip,wallBestFriendsPostFeatureTooltipKey:_.best_friends_post_feature_tooltip_key,wallBestFriendsPostFeatureTooltipHash:_.best_friends_post_feature_tooltip_hash}),_.wall_tpl&&_.wall_tpl.lang&&(cur.lang=extend(cur.lang||{},_.wall_tpl.lang)),window.Notifier&&Notifier.addRecvClbk("wall_reply_multiline","wall",(function(_){Wall.onReplySubmitChanged(_.value,1)}),!0)},onPostLoaded:function(_,e){if(_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(_),Wall.onAdBlockLoaded(_,e),e&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"_post")&&(_=geByClass1("_post",_)),_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"_post")){var t=_.querySelector(".page_best_friends_only");_&&t&&window.cur.wallBestFriendsPostFeatureTooltip&&Wall.showBestFriendsPostFeatureToolTip(t),cur.onPostLoaded&&cur.onPostLoaded(_)}},onAdBlockLoaded:function(_,e){var t;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"_ads_block_data_w")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"_ads_promoted_post_data_w")?t=_:e&&(t=geByClass1("_ads_block_data_w",_)||geByClass1("_ads_promoted_post_data_w",_)),t&&Wall.triggerAdStat(t,"load")},init:function(_){var e;Wall.initWallOptions(_),extend(cur,{wallInited:!0,postField:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_field"),wallSearch:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_search"),wallPage:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("profile")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("group")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("public"),wallPageNarrow:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("narrow_column"),wallUploadOpts:_.upload||!1,wallOnClearInput:[],deletedCnts:{own:0,all:0,archive:0},posterFeatureTooltip:_.poster_feature_tooltip,posterFeatureTooltipHash:_.poster_feature_tooltip_hash,postCopyrightFeatureTooltip:_.post_copyright_feature_tooltip,postCopyrightFeatureTooltipHash:_.post_copyright_feature_tooltip_hash}),cur.destroy.push((function(_){Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.s)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.ab),Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.s)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.Z),Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.s)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.N),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.i)(_.postField)}));var t=removeEvent.pbind(document,"click",Wall.hideEditPostReply);cur._back?(cur._back.hide.push(t),cur._back.show.push(t),cur._back.show.push(addEvent.pbind(document,"click",Wall.hideEditPostReply))):cur.destroy.push(t),cur.wallTab=cur.wallType,Wall.update(),Wall.initUpdates(_.add_queues),_.wall_tpl&&(cur.timeUpdateInt=setInterval((function(){Wall.updateTimes(_.wallCont)}),1e4),cur.destroy.push((function(){clearInterval(cur.timeUpdateInt)})));var o=window;addEvent(o,"scroll",Wall.scrollCheck),addEvent(window,"resize",Wall.scrollCheck),cur.destroy.push((function(){removeEvent(o,"scroll",Wall.scrollCheck),removeEvent(window,"resize",Wall.scrollCheck)})),cur.wallAutoMore=_.automore;var i=!1;if((null===(e=cur.options)||void 0===e?void 0:e.no_draft)||(i=_.draft||cur.oid!=vk.id&&Wall.getOwnerDraft(cur.oid)),Wall.initPostEditable(i),cur.wallSearch&&placeholderInit(cur.wallSearch),removeEvent(document,"click",Wall.hideEditPostReply),addEvent(document,"click",Wall.hideEditPostReply),_.poster_options&&Wall.initPosterEditor(_.poster_options),_.media_types){var l=extend({onAddMediaChange:(_,e,t)=>{cur.postCopyrightFeatureTT&&cur.postCopyrightFeatureTT.hide(),Wall.hidePosterFeatureTooltip(),Wall.postChanged(10),["poll","postpone",_web_donut__WEBPACK_IMPORTED_MODULE_34__.b].includes(_)||wall.focusOnEnd(),cur.oid!=vk.id&&Wall.saveOwnerDraftMedia(cur.oid,_,e,t),setTimeout(Wall.checkPosterAvailability)},onChangedSize:()=>{setTimeout(()=>{var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_box"),e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("VideoRestriction",_);each(e,(_,e)=>{var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(e)[1],o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(e)[0];Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(e,"VideoRestriction--onlyIcon",o<200),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(e,"VideoRestriction--small",o>=200&&o<300&&o>t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(e,"VideoRestriction--medium",o>=300&&o<400)})})},onMediaChange:()=>{Wall.postChanged()},onMediaUploadStarted:()=>{Wall.postChanged()},editable:1,from:"ads"===cur.module?"ads":"post",sortable:1,poster:cur.poster},_.media_opts||{});if(cur.wallAddMedia=new MediaSelector(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_add_media"),"media_preview",_.media_types,l),cur.wallAddMedia.menu){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(cur.wallAddMedia.menu.menuNode,"_type_podcast"),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("official");a&&r&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("_submit_post_box",r),"from-oid")!=cur.postTo&&hide(a);var n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(cur.wallAddMedia.menu.menuNode,"_type_youla");n&&n.addEventListener("mouseenter",_web_youla_preloadYoulaItemCreate__WEBPACK_IMPORTED_MODULE_33__.a,{once:!0})}}if(Wall.initPostVisibilitySelector(cur.wallAddMedia),Object(_web_discover_category_post_topic__WEBPACK_IMPORTED_MODULE_39__.e)(window.cur)){var s=cur.wallAddMedia&&cur.wallAddMedia.id||"",c=Object(_web_discover_category_post_topic__WEBPACK_IMPORTED_MODULE_39__.b)(String(s),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_actions_btns"));c&&(window.cur.destroy.push(c.onDestroy),Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_40__.h)(window.cur.wallOnClearInput)&&window.cur.wallOnClearInput.push(c.clearSelection))}if(cur.withUpload=window.WallUpload&&!browser.safari_mobile&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(cur.wallType,["all","own","feed","full_all","ads_promoted_stealth"])&&Wall.withMentions&&cur.wallUploadOpts,cur.withUpload&&WallUpload.checkDragDrop()){var b=function(){removeEvent(document,"dragover dragenter drop dragleave",O)},d=!1,E=!1,O=function(_){if(!1!==d&&(clearTimeout(d),d=!1),cur.uploadInited)return b(),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(_);switch(_.type){case"drop":E=!1,delete cur.wallUploadFromDrag,hide("post_upload_dropbox");break;case"dragleave":d=setTimeout((function(){E=!1,delete cur.wallUploadFromDrag,hide("post_upload_dropbox")}),100);break;case"dragover":case"dragenter":E||2==(E=!_.target||"IMG"!=_.target.tagName&&"A"!=_.target.tagName?2:1)&&setTimeout(WallUpload.initCallback,0),2==E&&(cur.wallUploadFromDrag=1)}return Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(_)};addEvent(document,"dragover dragenter drop dragleave",O),cur.destroy.push(b)}if(Wall.updateMentionsIndex(),_.top_wall_feature_tooltip?setTimeout((function(){Wall.showTopWallTooltip(_.top_wall_feature_tooltip_hash)}),800):_.order_feature_tooltip&&setTimeout((function(){Wall.showOrderTooltip(_.order_feature_tooltip_hash)}),800),Object(_web_wall_wall_post_render__WEBPACK_IMPORTED_MODULE_44__.a)(),cur.wallBestFriendsLockFeatureTooltip&&Wall.showBestFriendsLockFeatureToolTip(),nav.objLoc.new_post){Wall.showEditPost();var u=nav.objLoc.post_privacy;"friends_only"===u?Wall.togglePostVisibilityAccess(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("friends_only"),_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_36__.a.ONLY_FRIENDS,"",!0):"best_friends_only"===u&&Wall.togglePostVisibilityAccess(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("best_friends_only"),_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_36__.a.ONLY_BEST_FRIENDS,"",!0),delete nav.objLoc.new_post,delete nav.objLoc.post_privacy,nav.setLoc(nav.objLoc)}},initPosterEditor:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)('<div class="page_block"></div>'),t=Wall.getMainPostBlock();"feed"===cur.module&&addClass(e,"feed_post_field_wrap");var o=function(){return!1},i=function(){Wall.closeFancyTooltipsInPost(),Wall.openPosterEditor(),cur.poster.sendStatsInfo("open")},l={onPreOpen:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.y)(e,t)},onPostOpen:function(){var _=cur.poster.getTextInputEl();Wall.restoreCaretPositionForPoster(_)},onPreHide:function(){Wall.saveCaretPositionForPoster(cur.poster.getTextInputEl()),Wall.closeFancyTooltipsInPost();var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_error"),e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_box"),t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_actions_btns"),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post");Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(t,o),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(_)&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.y)(_,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(e))},onPostHide:function(){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_settings_btn"),o=cur.options.suggesting&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("check_sign");_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(_,cur.openPosterBtn),o&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(o,cur.openPosterBtn),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(t);var i=cur.poster.getTextAsHtml();i&&i.match(Emoji.emojiRegex)&&(i=i.replace(Emoji.emojiRegex,Emoji.emojiReplace)),cur.postField.innerHTML=i,Wall.restoreCaretPositionForPoster(cur.postField),setTimeout((function(){Composer.updateArticleConvertSuggest(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(cur.postField,"composer"))})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(e)},onPreUploaderOpen:function(){var _=cur.poster.getTextInputEl();Wall.saveCaretPositionForPoster(_)},onPostUploaderClose:function(){var _=cur.poster.getTextInputEl();Wall.restoreCaretPositionForPoster(_)},onOverTextLimit:function(){Wall.disablePoster(!0),cur.poster.closeEditor(),cur.poster.sendStatsInfo("auto_disable"),cur.poster.state.toggled=!0},onChangeData:Wall.postChanged,onSend:function(_){Wall.sendPost(!0,_)},onDestroy:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(e)},getPostOwnerId:function(){return+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_box"),"from-oid")},width:Wall.getMainPostBlock().clientWidth,containerClasses:"poster_wall-creating",placeholder:attr(cur.postField,"placeholder"),appendToElem:e};cur.openPosterBtn=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_poster_btn"),cur.poster=new Poster(_.poster_config,l),addEvent(cur.openPosterBtn,"click",i),addEvent(cur.openPosterBtn,"mousedown",o),cur.destroy.push((function(){removeEvent(cur.openPosterBtn,"click",i),removeEvent(cur.openPosterBtn,"mousedown",o)}))},openPosterEditor:function(_){if(cur.poster&&!cur.poster.state.disabled&&!cur.poster.state.opened){_=_||{},cur.posterFeatureTT&&cur.posterFeatureTT.hide();var e=Wall.getMainPostBlock(),t=_.bkgId,o=window.browser.windows7||window.browser.windowsVista||window.browser.windowsXp;Wall.saveCaretPositionForPoster(cur.postField);var i=_.text||cur.postField.innerHTML;if(i=(i=i.replace(/\n/g,"<br/>")).replace(/<img[^>]*>/g,(function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{innerHTML:_}).firstChild,t=Emoji.getCode(e);return t?o?" ":Emoji.codeToChr(t):_})),!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(e))return cur.poster.setBkg(t,!0),void cur.poster.setText(i);hide(e);var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_settings_btn"),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_error"),r=cur.options.suggesting&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("check_sign"),n=cur.poster.getPostOptionsWrapperEl();if(l&&n.appendChild(l),r&&n.appendChild(r),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(a)){var s=cur.poster.getErrorWrapperElement();s.innerHTML="",s.appendChild(a)}var c=cur.poster.getBtnsWrapper(),b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_actions_btns");b&&(c.firstChild?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(b,c.firstChild):c.appendChild(b),b.children.length||c.children.length>1?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(c):hide(c)),cur.poster.openEditor(),cur.poster.setBkg(t,!0),cur.poster.setText(i)}},checkPosterAvailability:function(){if(cur.poster){var _=cur.wallAddMedia?cur.wallAddMedia.getMedias():[],e=cur.poster.isTextFieldValid(cur.postField),t=Wall.checkAttachesForPoster(_),o=e&&t;!o!==cur.poster.state.disabled&&Wall.disablePoster(!o),o&&cur.poster.state.toggled&&(Wall.openPosterEditor(),cur.poster.sendStatsInfo("auto_enable"),cur.poster.state.toggled=!1)}},checkAttachesForPoster(_){if(!Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_40__.h)(_))return!1;if(!_.length)return!0;var e=0;return _.some(_=>{if(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_40__.h)(_)){var t=_slicedToArray(_,1)[0];["copyright","postpone",_web_donut__WEBPACK_IMPORTED_MODULE_34__.b].includes(t)||++e}}),0===e},disablePoster:function(_){cur.poster&&(void 0===_&&(_=!0),cur.poster.state.disabled=_,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(cur.openPosterBtn,"_disable",_))},isPosterEditorOpen:function(){return cur.poster&&cur.poster.isOpen()},saveCaretPositionForPoster:function(_){if(document.activeElement===_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("span"),t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("span");e.classList.add("poster__marker","poster__marker_start"),t.classList.add("poster__marker","poster__marker_end");var o=getSelection().getRangeAt(0);(o=o.cloneRange()).insertNode(e),o.collapse(!1),o.insertNode(t)}},restoreCaretPositionForPoster:function(_){var e=geByClass1("poster__marker_start",_),t=geByClass1("poster__marker_end",_);if(e&&t){var o=document.createRange();o.setStartBefore(e),o.setEndBefore(t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(t);var i=window.getSelection();i.removeAllRanges(),i.addRange(o)}else wall.focusOnEnd(_)},getMainPostBlock:function(){var _=cur.mainPostBlock;return _||(_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_box")),cur.mainPostBlock=_),_},changeAuthorInPoster:function(_){cur.poster&&_&&cur.poster.changeBkgAuthor({authorName:_.authorName,authorUrl:_.authorUrl})},sendInsertBeforeError:function(){ajax.post("al_page.php",{act:"insert_before_error",trace:(new Error).stack,owner_id:cur.oid,module:cur.module})},closeFancyTooltipsInPost:function(){var _=cur.wallAddMedia.lnkId;cur["postPostponeTT"+_]&&cur["postPostponeTT"+_].hide(),cur["post_action_btn"+_]&&cur["post_action_btn"+_].hide(),Object(_web_discover_category_post_topic__WEBPACK_IMPORTED_MODULE_39__.f)(_)},switchOwner:function(_){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(geByClass1("_ui_toggler",_),"on"),uiSearch.showProgress("wall_search"),cur.options.params.owners_only=cur.options.params.owners_only?null:1,nav.change({owners_only:cur.options.params.owners_only,offset:null})},fakeReplyAsGroupOver:function(_){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("reply_fakebox_with_official",_)&&wall.replyAsGroupOver(_)},fakeReplyAsGroupCheck:function(_,e,t){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("reply_fakebox_with_official",_))return window.tooltips&&window.tooltips.hide(_),Wall.showEditReply(e,null,!1,!1,!0,(function(){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_as_group"+e);_&&(_.focus(),_.click())})),t&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(t)},setReplyAsGroup:function(_,e){if(!_)return!1;if(_.hasAttribute("data-reinit-ads-needs-confirmation")&&window.AdsEdit&&!e.reinitConfirmed&&AdsEdit.reinitCreatingPostFormNeeded())return AdsEdit.reinitCreatingPostFormConfirm(wall.setReplyAsGroup.pbind(_,extend({},e||{},{reinitConfirmed:!0}))),!1;var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("_submit_post_box",_),o=t&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("signed"),i=t&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("close_comments"),l=t&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("mute_notifications"),a=t&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("official"),r=t&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("mark_as_ads"),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(_,"tt"),s=e.from||(e.fromGroup?cur.oid:vk.id),c=s==vk.id?wall.replyAsProfileData():window.replyAsData&&window.replyAsData[s]||wall.replyAsGroupDomData(_);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"from-oid")==s||!c||c[0]!=s)return!1;var b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_box"),d=!t&&cur.poster&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("poster",_),E=t===b;d&&(t=b,o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("signed"),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("mark_as_ads"),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("close_comments"),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("mute_notifications"),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("official")),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"from-oid",s),wall.replyAsAnimate(t,c[2],c[1]),cur.poster&&(E||d)&&Wall.changeAuthorInPoster({authorName:c[3],authorUrl:c[2]}),n&&n.rows&&each(n.rows,(function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(this,"active",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(this,"from-oid")==s)})),o&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.e)(o,s>0),r&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.e)(r,s>0),i&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.e)(i,s>0),l&&(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)(r)?(addClass(l,"on"),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.e)(l,1)):Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.e)(l,s>0)),a&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)(a,s!==vk.id),_.setAttribute("aria-label",Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)(s<0?"wall_reply_as_group":"wall_reply_as_user")),_.hasAttribute("data-replace-owner-name")&&(_.innerHTML=c[3],"A"===_.tagName&&(_.href=c[2])),_.hasAttribute("data-replace-post-to")&&(cur.postTo=c[0]),_.hasAttribute("data-replace-oid")&&(cur.oid=c[0]),_.hasAttribute("data-reinit-ads-post-editor")&&window.AdsEdit&&(e.withoutRedraw?AdsEdit.reinitCreatingPostFormBoundWithoutRedraw():AdsEdit.reinitCreatingPostFormBound()),"official"==_.id&&Wall.postChanged(!0);var O=cur.wallAddMedia&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(cur.wallAddMedia.menu.menuNode,"_type_podcast");if(O){var u=cur.postTo==s;each(cur.wallAddMedia.getMedias()||[],(function(_,e){if("podcast"===e[0])return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(e[2],"attach_disabled",!u),u=!1,!1})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.yb)(O,u)}return _.id&&Wall.hideCheckTimer(_.id.replace("reply_as_group",""),"editing"),cur.wallAddMedia&&cur.wallAddMedia.donutUpdateVisibility(t),!1},replyAsAnimate:function(_,e,t){var o=_&&geByClass1("_post_field_author",_),i=o&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_post_field_image",o),l=_&&geByClass1("_post_field_official",_),a=l&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_post_field_image",l),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"author_secondary")?0:1;o&&i&&i[r]&&(o.href=e,i[r].src=t),a&&a[r]&&(a[r].src=t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(_,"author_secondary")},replyAsGroupOver:function(_){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"checkbox_official")&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"reply_fakebox_wrap_image")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"disabled"))return!1;var e,t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_submit_post_box",_),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("deep_active",_);if(e=o&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("replies_wrap_deep",_)?[7,8,8]:o?[2,8,8]:[9,8,8],Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.c)(_,{text:function(){return(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"from-oid")||vk.id)<0?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_on_behalf_group"):Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_on_behalf_me")},black:1,shift:e}),!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"reply_fakebox_wrap_image")&&(wall.isWallReply(_)||wall.isAdsCreatingPost(_))){var i="/al_groups.php",l="get_editor_clubs";wall.isAdsCreatingPost(_)&&(i="/ads_edit.php",l="a_get_promoted_post_stealth_groups"),ajax.post(i,{act:l},{cache:1})}},replyAsGroupFocus:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(_,"tt");e&&e.isShown()||wall.replyAsGroupOver(_)},replyAsGroup:function(_,e,t){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"checkbox_official")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"disabled"))return t&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(t);if(!(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"can_reply_as_any_group")>0)&&wall.isWallReply(_))return wall.replyAsGroupTT(_,e,[]),t&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(t);if(!wall.isWallReply(_)&&!wall.isAdsCreatingPost(_)||cur.replyAsLoaded)wall.showReplyAsGroupTooltip(_,e);else{var o="/al_groups.php",i="get_editor_clubs";wall.isAdsCreatingPost(_)&&(o="/ads_edit.php",i="a_get_promoted_post_stealth_groups"),ajax.post(o,{act:i},{cache:1,onDone:function(t){cur.replyAsLoaded=t,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(_)&&wall.showReplyAsGroupTooltip(_,e)}})}return t&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(t)},showReplyAsGroupTooltip(_,e){var t=!!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("can_reply_only_verified",_),o=(cur.replyAsLoaded||[]).filter(_=>!t||_[0]>0||_[4]);wall.replyAsGroupTT(_,e,o)},replyAsGroupDomData:function(_){var e,t,o,i,l;if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("replies_wrap_deep",_)){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",_),"post-id");a&&(e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+a)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_fakebox"+a),t=a.split("_")[0])}else e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_submit_post_box",_),t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"oid");return e&&(o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"owner-photo"),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"owner-href"),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"owner-name")),t&&o&&i&&l&&[t,o,i,Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.J)(l))]||cur.wallTpl&&cur.wallTpl.ownerData||!1},isWallReply:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_submit_post_box",_);return e&&e.id.match(/reply_box(-?\d+)_(\d+)/)},isAdsCreatingPost:function(_){return!!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("ads_edit_ad_submit_post_header",_)},replyAsProfileData:function(){return window.cur&&cur.wallTpl&&cur.wallTpl.profileData||window.wkcur&&wkcur.wallTpl&&wkcur.wallTpl.profileData||window.mvcur&&mvcur.wallTpl&&mvcur.wallTpl.profileData},replyAsGroupList:function(_,e){var t=_.hasAttribute("data-disallow-profile")?[]:[wall.replyAsProfileData()],o=wall.replyAsGroupDomData(_);return o&&t.push(o),(wall.isWallReply(_)||wall.isAdsCreatingPost(_))&&each(window.replyAsList,(function(){this[0]!=e&&t.push(this)})),t},replyAsGroupTT:function(_,e,t){window.replyAsList=t||[],window.replyAsData={},each(window.replyAsList,(function(){window.replyAsData[this[0]]=this}));var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(_,"tt"),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_submit_post_box",_),l=i&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"from-oid");if(!wall.replyAsProfileData())return!1;if(!o){var a=wall.replyAsGroupList(_,e),r="";_.hasAttribute("data-enable-search")&&(r+='<div class="post_from_tt_row_search_wrap"><input class="clear_fix post_from_tt_row post_from_tt_row_search" value="" placeholder="'+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_search")+'" /><div class="post_from_tt_row_search_progress"></div></div>');var n=function(_,e,t,o,i){return'<a id="_post_from_tt_row_oid_'+e+'" class="clear_fix post_from_tt_row _post_from_tt_row_searchable'+_+'" data-from-oid="'+e+'" href="'+t+'"><img class="post_from_tt_image" src="'+o+'" aria-label="'+i+'">'+i+"</a>"};each(a,(function(){var _=l==this[0]?" active":"";r+=n(_,this[0],this[2],this[1],this[3])}));var s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("deep_active",_);o=new ElementTooltip(_,{content:'<div class="post_from_tt_choose _post_scroll_wrap">'+r+"</div>",appendToParent:!0,autoHide:!0,customShow:!0,defaultSide:"bottom",offset:function(){return wall.isAdsCreatingPost(_)?[_.offsetWidth/2+8.5,-2]:s?[1,-5]:[-10,-5]},onFirstTimeShow:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post_from_tt_row",e);each(t,(function(e,t){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"post_from_tt_row_search")||addEvent(t,"click",wall.setReplyAsGroup.pbind(_,{from:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(this,"from-oid")}))}));var i=geByClass1("post_from_tt_row_search",e);if(i){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_post_from_tt_row_searchable",e),a=_.getAttribute("data-search-url"),r={};addEvent(i,"keyup valueChanged",(function(){var t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(i)).toLowerCase();if(a&&t){_.searchRequestTimeout&&(clearTimeout(_.searchRequestTimeout),delete _.searchRequestTimeout);var s=geByClass1("post_from_tt_row_search_progress",e);geByClass1("pr",s)||Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.u)(s),_.searchRequestTimeout=setTimeout((function(){r[t]?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.i)(s):ajax.plainpost(a,{str:t},(function(i){r[t]=!0,i=JSON.parse(i),each(i,(function(){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("_post_from_tt_row_oid_"+this[0])){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(n("",this[0],this[2],this[1],this[3]));geByClass1("ui_scroll_content",e).appendChild(t),addEvent(t,"click",wall.setReplyAsGroup.pbind(_,{from:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"from-oid")})),window.replyAsData[this[0]]||(window.replyAsData[this[0]]=this)}})),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_post_from_tt_row_searchable",e),setTimeout((function(){o.scroll.update(),o.updatePosition()}),0),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.i)(s)}),(function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.i)(s)}))}),500)}each(l,(function(_,e){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.yb)(e,""===t||-1!==e.innerText.toLowerCase().indexOf(t))}))}))}this.rows=t,this.scroll=new uiScroll(geByClass1("_post_scroll_wrap",e)),setTimeout((function(){o.scroll.update(),o.updatePosition()}),0)},onShow:function(_){setTimeout((function(){if(o.scroll){var e=geByClass1("active",_),t=e?e.offsetTop-(o.scroll.data.viewportHeight-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(e)[1])/2:0;o.scroll.scrollTop(t);var i=geByClass1("post_from_tt_row_search",_);i&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.H)(i)}}),0)},onHide:function(_){var e=geByClass1("post_from_tt_row_search",_);e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(e,"")}}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(_,"tt",o)}e&&o.isShown()&&!_.hasAttribute("data-disallow-profile")&&wall.setReplyAsGroup(_,{from:l==vk.id?e:vk.id}),_.tt&&_.tt.hide&&_.tt.hide(),o.isShown()||o.show()},reportPost:function(_,e,t){stManager.add([jsc("web/privacy.js"),"privacy.css"],(function(){return Privacy.show(_,e,"report_"+t)}))},parsePostId:_web_wall_wall_utils__WEBPACK_IMPORTED_MODULE_45__.a,likeIt:function(_,e,t,o){if(Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.j)(o),!vk.id)return!1;if(cur.viewAsBox)return cur.viewAsBox(),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(o);var i,l=wall.parsePostId(e),a=l.type,r=l.id,n=_&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_post_content",_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",_))||wall.domPost(r),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(n,"_like_wrap"),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(s,"_count"),b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(s,"my_like");i=e==cur.wallLayer?"wkview":cur.wallType?"feed"==cur.wallType?"news"==cur.section?"feed_"+(cur.subsection?cur.subsection:cur.section):"recommended"==cur.section?"feed_recommended"+("recent"!=cur.subsection?"_"+cur.subsection:""):"friends"==cur.section||"groups"==cur.section||"videos"==cur.section||"photos"==cur.section?"feed_"+cur.section+(cur.subsection?"_"+cur.subsection:""):"feed_"+cur.section:"top"==cur.wallType?"wall_top":"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full"):cur.module,ajax.post("like.php",{act:b?"a_do_unlike":"a_do_like",object:a+r,hash:t,wall:2,from:i},{onDone:Wall.likeFullUpdate.pbind(_,e),onFail:function(){return!0}});var d=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.H)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(c)).replace(/(\s|,)/g,"");return Wall.likeUpdate(_,e,!b,Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(d)+(b?-1:1)),"wall"==a&&window.cur.onLike&&window.cur.onLike(_,a,e,b),cur.onWallLike&&cur.onWallLike(),"wall"==a&&Wall.triggerAdStat(r,"like_post"),!1},likesShow:function(_,e,t){if(!_.postDontShowLikes){t=t||{};var o=wall.parsePostId(e),i=o.type,l=o.id,a=i+l,r=_&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_post_content",_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",_))||wall.domPost(l),n=t.views?"_views_wrap":t.share?"_share_wrap":"_like_wrap",s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(r,n),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"_feedback_info_item")?_:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(s,"_icon"),b=r&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(r,"_share_wrap");if(c&&!cur.viewAsBox){var d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(s)[0],E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(c)[0],O=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(c,!0)[0],u=E+O/2-d-41,p=t.views?{views:1}:t.share?{published:1}:{};if(t.listId&&(p.list=t.listId),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(c,"_feedback_info_item")){var P=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.O)("em",c);u=-40,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(c,"feedback_share")&&(u+=7),u+=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(P)[0]/2}var w=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(c,"_feedback_info_item")?c:c.parentNode;Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.c)(w,{url:"/like.php",params:extend({act:"a_get_stats",object:a,has_share:b?1:""},p),slide:15,shift:[-u,t.views?2:"wall_reply"==i?-3:7],ajaxdt:100,showdt:400,hidedt:200,dir:"auto",checkLeft:!0,reverseOffset:80,noZIndex:!0,tip:{over:function(){Wall.likesShow(_,e,t)}},onShowStart:function(){var e=w.tt.container;setTimeout((function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.vb)(e,{left:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.k)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.T)(e,"left"))+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(c)[0]-E})}),10),Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.bb)("likes_show",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"shown"))},typeClass:"like_tt",className:t.cl||""})}}},likesShowList:function(_,e,t){t=t||{};var o=wall.parsePostId(e),i=o.type,l=o.id,a=i+l,r=_&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_post_content",_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",_))||wall.domPost(l),n=t.share?"_share_wrap":"_like_wrap",s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(r,n);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(s,"_icon")&&!cur.viewAsBox&&Object(_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_14__.H)({w:(t.views?"views":t.share?"shares":"likes")+"/"+Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(a)},!1,!1,{queue:1})},sharesShow:function(_,e,t){Wall.likesShow(_,e,extend(t,{share:1}))},sharesShowList:function(_,e,t){Wall.likesShowList(_,e,extend(t,{share:1}))},viewsShowList:function(_,e,t){Wall.likesShowList(_,e,extend(t,{views:1}))},viewsUpdate:function(_,e){var t=wall.parsePostId(e),o={act:"a_get_stats",object:t.type+t.id,views:1};ajax.post("/like.php",o,{cache:1,onDone:function(t,i){Wall.likeUpdate(!1,e,!1,t,void 0,void 0,1);var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{innerHTML:i});_.setAttribute("title",l.innerText||l.textContent),setTimeout(ajax.invalidate.pbind("/like.php",o),3e3)}})},sharesOpen:function(_,e,t){if(cur.viewAsBox)return cur.viewAsBox(),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(_);if(!vk.id)return!1;Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.j)(_);var o=wall.parsePostId(e),i=o.type,l=o.id,a=i+l;return Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.b)("/like.php",extend({act:"publish_box",object:a},t)),"wall"==i&&Wall.triggerAdStat(l,"share_post"),!1},customCur:function(){return window.wkcur&&wkcur.shown?wkcur:window.mvcur&&mvcur.mvShown?mvcur:window.pvcur&&cur.pvShown?pvcur:cur},processPostReplyActions:function(_){},updatePostAuthorData:function(_){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_post_author_data_"+_).forEach((function(_){_.post_author_data_update=!0}))},closeComments:function(_,e,t,o,i){var l=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"closed"))?0:1;ajax.post("al_wall.php",{act:"close_comments",owner_id:e,post_id:t,close:l,hash:o},{onDone:function(){if(i)i(l);else{var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",_);Wall.onCloseComments(l,e)}}})},onCloseComments:function(_,e,t){if(e&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"postponed")&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"post")&&!vk.widget){var o=geByClass1("comment",e),i=geByClass1("reply_box_inner_wrap",e),l=cur.pgParams&&cur.pgParams.archive||"wall_archive"===cur.module,a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"Post--with_closed_comments_donut");if(t||a||o&&i){l||a||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(e,"closed_comments",_);var r=geByClass1("action_closing_comments",e);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(r,"closed",_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(r,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)(_?"wall_open_comments":"wall_closing_comments"))}else{var n=e.id.replace("post","").split("_");ajax.post("al_wall.php",{act:"comment_box",owner_id:n[0],post_id:n[1]},{onDone:function(t,o){if(!l){var i=geByClass1("comment",e),a=geByClass1("reply_box_inner_wrap",e);if(!i&&t){var r=geByClass1("like",e);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.y)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(r))}if(!a&&o){var n=geByClass1("replies_list",e);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.y)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(o),n)}}Wall.onCloseComments(_,e,!0)}})}}},showPostEditedTime:function(_){var e=(cur.lang||{}).wall_changed;if(e){var t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"time")),o=60*((new Date).getTimezoneOffset()+180);t&&Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.c)(_,{text:e.replace("{time}",Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.c)(t,o)),black:1,shift:[0,4]})}},showPostAuthorData:function(_,e){var t=_.className.match(/_post_author_data_(-?\d+_\d+)/)[1]||"",o=e?e.target:window.event.srcElement;!t||o!=_&&o.onmouseover||(_.post_author_data_update&&(delete _.post_author_data_update,_.post_author_data_tt&&(_.post_author_data_tt.destroy(),_.post_author_data_tt=!1)),_.post_author_data_tt||ajax.post("al_page.php",{act:"post_author_data_tt",raw:t},{onDone:function(e){var o=geByClass1("post_link",_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(_);if(e&&o){var i={content:e,arrowSize:"mini",cls:"post_author_data",defaultSide:"bottom",align:"left",id:"author_tt_"+t},l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_im_mess_stack",_);l?i.appendTo=l:i.appendToParent=!0,vk.widget&&(i.offset=[0,-2],i.forceSide="bottom"),_.post_author_data_tt=new ElementTooltip(o,i),_.post_author_data_tt.show()}else _.post_author_data_tt=!0}}))},hideAdsReplacedTT:function(){cur.adsReplacedFeatureTT.destroy(),cur.wallAdsReplacedFeatureTooltip=null,cur.adsReplacedFeatureTT=null,ajax.post("al_index.php",{act:"hide_feature_tt",hash:cur.wallAdsReplacedFeatureTooltipHash,type:"ads_in_post_replaced"})},showAdsReplacedTooltip:function(){if(!cur.adsReplacedFeatureTT){var _=setTimeout((function(){var _=geByClass1("addpost_opt");_&&(cur.adsReplacedFeatureTT=new ElementTooltip(_,{content:'<div class="ads_replaced_feature_tt__close" onclick="cur.adsReplacedFeatureTT.hide();"></div>'+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_ads_in_post_replaced"),forceSide:"top",cls:"feature_intro_tt ads_replaced_feature_tt",autoShow:!1,noHideOnClick:!0,noAutoHideOnWindowClick:!0,appendTo:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_),offset:[1,-10],onHide:Wall.hideAdsReplacedTT}),cur.adsReplacedFeatureTT.show())}),800);cur.destroy.push((function(){clearTimeout(_)})),cur.destroy.push((function(){cur.adsReplacedFeatureTT&&cur.adsReplacedFeatureTT.destroy()}))}},createPostTooltip:_web_page_wall_post_tooltip__WEBPACK_IMPORTED_MODULE_41__.a,showTopWallTooltip:function(_){if(!cur.topWallFeatureTT){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_top");e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(e)||(e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_top_more")),e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(e)&&(cur.topWallFeatureTT=new ElementTooltip(geByClass1("ui_tab",e)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("ui_tab",e),{content:'<div class="feature_tooltip__close" onclick="cur.topWallFeatureTT.hide();"></div>'+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_top_feature_text"),forceSide:"top",cls:"feature_intro_tt feature_info_tooltip",autoShow:!1,noHideOnClick:!0,noAutoHideOnWindowClick:!0,appendTo:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("page_block",e),onHide:function(){ajax.post("al_index.php",{act:"hide_feature_tt",hash:_,type:"top_wall_web"})}}),cur.topWallFeatureTT.show())}},hidePostCopyrightFeatureTooltip:function(){cur.postCopyrightFeatureTooltip&&cur.postCopyrightFeatureTooltipHash&&(cur.postCopyrightFeatureTooltip=!1,cur.postCopyrightFeatureTT.hide(),setTimeout(()=>{cur.postCopyrightFeatureTT.destroy()},ElementTooltip.FADE_SPEED),ajax.post("al_index.php",{act:"hide_feature_tt",hash:cur.postCopyrightFeatureTooltipHash,type:"post_copyright"}))},showPostCopyrightFeatureTooltip:function(){if(cur.postCopyrightFeatureTooltip&&!cur.postCopyrightFeatureTT){var _=setTimeout(()=>{var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_settings_btn");_&&cur.postCopyrightFeatureTooltip&&(cur.postCopyrightFeatureTT=new ElementTooltip(_,{content:'<div class="feature_tooltip__close" onclick="Wall.hidePostCopyrightFeatureTooltip();"></div>'+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_post_copyright_feature_text"),cls:"feature_intro_tt feature_info_tooltip",forceSide:"bottom",autoShow:!1,noOverflow:!1,noHideOnClick:!0,appendToParent:!0,offset:[-6.5,-8],onShow:()=>{ajax.post("al_index.php",{act:"show_feature_tt",hash:cur.postCopyrightFeatureTooltipHash,type:"post_copyright"})},onWindowClick:()=>{cur.postCopyrightFeatureTT&&(cur.postCopyrightFeatureTT.hide(),cur.postField.blur())}}),cur.postCopyrightFeatureTT.show())},800);cur.destroy.push(()=>clearTimeout(_))}},hidePosterFeatureTooltip:function(){cur.posterFeatureTooltip=!1,cur.posterFeatureTT&&cur.posterFeatureTooltipHash&&(cur.posterFeatureTT.destroy(),cur.posterFeatureTT=null,ajax.post("al_index.php",{act:"hide_feature_tt",hash:cur.posterFeatureTooltipHash,type:"poster_new_year"}))},showPosterFeatureTooltip:function(){if(cur.posterFeatureTooltip){var _=setTimeout((function(){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.F)(".poster__open-btn",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_poster_btn"));if(_&&cur.posterFeatureTooltip){var e='<div class="poster_feature_tt__layout" onclick="cur.posterFeatureTT.hide(); cancelEvent(event);"><div class="poster_feature_tt__close"></div><div class="poster_feature_tt__info">'+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_new_posters_new_year")+"</div>";cur.posterFeatureTT=new ElementTooltip(_,{content:e,forceSide:"bottom",cls:"eltt_fancy poster_feature_tt",autoShow:!1,noOverflow:!1,align:"left",centerShift:-28,noHideOnClick:!0,appendToParent:!0,offset:[0,-8],onHide:Wall.hidePosterFeatureTooltip,onWindowClick:function(){cur.posterFeatureTT.hide(),cur.postField.blur()}}),cur.posterFeatureTT.show(),cur.poster&&cur.poster.sendStatsInfo("new_bkg_tooltip_show")}}),800);cur.destroy.push((function(){clearTimeout(_)}))}},toggleRecommFriend:_web_page_friends_recommend__WEBPACK_IMPORTED_MODULE_35__.a.toggleRecommFriend,hideRecommFriend:_web_page_friends_recommend__WEBPACK_IMPORTED_MODULE_35__.a.hideRecommFriend,onClickRecommFriend:_web_page_friends_recommend__WEBPACK_IMPORTED_MODULE_35__.a.onClickRecommFriend,replyEditPhoto:function(_,e,t){return Wall.showEditReply(e,null,!1,!1,!1,(function(){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_more_attaches"+e);if(t){var o=geByClass1("ms_item_photo",t);tooltips.hide(_),o&&o.click()}})),t&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(t)},replyMoreAttachShow:function(_,e,t){return Wall.showEditReply(e,null,!1,!1,!0,(function(){var _=geByClass1("ms_items_more_wrap",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_more_attaches"+e));_&&(_.focus(),_.click())})),t&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(t)},replyFakeEmojiOver:function(_){wall.initEditReply(_,!1,!0,(function(){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_smile"+_);if(e){var t=geByClass1("emoji_smile",e);t&&t.onmouseover()}}))},hideDeepReplies:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+_);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"reply")&&(e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",e),_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"post-id"));var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"replies-offset")||0,o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"replies-limit")||3,i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+_),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(cur.wallTpl.reply_deep_next,{post_id:_,reply_id:_,offset:t,count:o,text:"",class:" replies_next_main"}));i.innerHTML="",i.appendChild(l),Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(i)[1]-100,0,null,!0),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(l,"collapse",!0),l.click(),cur.wallMyOpened[_]=0},addNewReply:function(_){var e,t=_[2],o=(_[10]||"").match(/wall.showReply\([^-)0-9]*(-?[_0-9]+)[^-)0-9]*(-?[_0-9]+)[^-)0-9]*\)/),i=o&&o[2]||"",l=i&&i!==t,a=cur.wallLayer&&cur.wallLayer===t,r=a?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+t):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+t),n=r.offsetHeight,s=0,c=0;e=l?wall._addDeepReply(_,i):wall._addRootReply(_);var b=a?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_post"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+t);return wall.incReplyCounter(b,1,_[13]),a?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(geByClass1("wl_replies_wrap",b)),cur.count++,cur.loaded++):(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("replies_wrap"+t),Wall.repliesSideSetup(t)),Wall.updateMentionsIndex(),e&&(s=r.offsetHeight-n,c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(e,a)[1]),[s,c]},_addDeepReply:function(_,e){var t,o=_[2],i=_[10]||"",l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(i),a=l&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(l,"root-id")||e,r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+a),n=r&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("replies_wrap_deep",r),s=cur.wallLayer&&cur.wallLayer===o?wkcur:cur;if(n&&(a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(n,"post-id"),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+a)),!r)return null;var c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+a);if(!c){wall.addDeepRepliesBlock(a);var b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_fakebox"+a)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+a);b&&hide(b),t=c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+a)}if(!c)return null;if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("reply",c).length){var d=wall._addNewReplyShowMore(o,a,c,"replies_next_deep");t=t||d}else{var E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_short_deep"+a),O=wall.isDescRepliesOrder(o);if(E){var u=geByClass1("replies_short_text_count",E),p=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(u).replace(/[^0-9]/g,""))||0;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(u,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_replied_to_reply_count",p+1))}else{E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(s.wallTpl.reply_deep_short,{post_id:o,reply_id:a,reply_msg_id:a.split("_")[1],img_src:_[6]||"",name:_[5]||"",count:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("global_replied_to_reply_count",1)}));var P=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(c);if(P)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(E,P),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(P,"replies_next_deep")&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(P,"replies_prev",O);else{c.appendChild(E);var w=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(s.wallTpl.reply_deep_next,{post_id:o,reply_id:a,offset:0,count:1,text:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_next_n_replies",1),class:" replies_next_deep"+(O?" replies_prev":"")}));c.appendChild(w)}}addClass(n,"replies_deep_has_short"),t=E}return wall.updateCollapseDeepReplies(a),removeClass(n,"replies_deep_empty_list"),t},_addRootReply:function(_){var e=_[2],t=cur.wallLayer&&cur.wallLayer===e,o=t?wkcur:cur,i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+e),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.p)(i).length,a="full"===o.wallType,r=!l||l<3&&(t||a),n=wall.isDescRepliesOrder(e);if(r){var s=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(_[_.length-1]),c=void 0!==o.options.is_admin?o.options.is_admin:o.options.wall_oid<0?8&s?constants.Groups.GROUPS_ADMIN_LEVEL_EDITOR:2&s?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER:constants.Groups.GROUPS_ADMIN_LEVEL_USER,b=Wall.getNewReplyHTML(_,c,!1,o);if(!b)throw new Error("Failed to add root reply");var d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(b);return Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.k)(d),n&&i.firstChild?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(d,i.firstChild):i.appendChild(d),d}return wall._addNewReplyShowMore(e,e,i,"replies_next_main",n)},_addNewReplyShowMore:function(_,e,t,o,i){var l,a,r=cur.wallLayer&&cur.wallLayer===_?wkcur:cur,n=r.options.replies_page_count||20,s=i?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(t):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.A)(t);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(s,"replies_next"))return(l=+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(s,"count")||0)<n?(l++,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(s,"count",l),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(s,i?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_prev_n_replies",l):Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_next_n_replies",l))):i&&(a=+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(s,"offset")||0,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(s,"offset",a+1)),s;if(i)a=0;else{var c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)(o,t),b=c[c.length-1],d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.p)(t);if(b){var E=+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(b,"count")||n,O=+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(b,"offset")||0,u=d.indexOf(b);u=(u>=0?u:0)+1,a=O+E+d.slice(u).filter((function(_){return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"reply")})).length}else a=d.filter((function(_){return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"reply")})).length}var p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(r.wallTpl.reply_deep_next,{post_id:_,reply_id:e,offset:a,count:1,text:i?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_prev_n_replies",1):Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_next_n_replies",1),class:" "+(i?" replies_prev":"")+(o?" "+o:"")}));return i?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(p,t.firstChild):t.appendChild(p),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(p),p},removeDeepReply:function(_){var e=_[2],t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e),o=0,i=0;if(cur.wallMyDeleted[e]||!t)return[o,i];i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(t,cur.layerpost)[1],Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.g)(t);var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",t)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",t),a=l?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(l,"post-id"):"",r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("replies_wrap_deep",t);if(r)o=-t.offsetHeight,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(r)[1]&&addClass(r,"replies_deep_empty_list"),wall.updateCollapseDeepReplies(e);else if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_wrap_deep"+e)){var n=cur.wallLayer&&cur.wallLayer===a?wkcur:cur,s=geByClass1("reply_date",t),c=geByClass1("reply_link_wrap",t),b="",d=attr(t,"onclick");d&&(b+=' onclick="'+d+'"');var E=e.split("_")[0],O=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(E<0?n.wallTpl.reply_deleted_group:n.wallTpl.reply_deleted_user,{reply_id:e,date:s?s.innerHTML:"",answer:c?c.outerHTML:"",class:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"reply_replieable")?" reply_replieable":"",attr:b})),u=t.offsetHeight;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.G)(t,O),o=O.offsetHeight-u}else o=-t.offsetHeight,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(t);return cur.layerpost&&(cur.count--,cur.loaded--),l&&(wall.repliesSideSetup(a),wall.incReplyCounter(l,-1)),[o,i]},addDeepRepliesBlock:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+_);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"reply")){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",e)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",e);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"deep_active")){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"post-id"),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_wrap_deep"+_),l=(cur.wallLayer?wkcur:cur).wallTpl;i||(i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(l.reply_deep,{post_id:o,reply_id:_,reply_msg_id:_.split("_")[1],text:"",offset:0,class:" replies_next_deep"})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.y)(i,e));var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_fakebox"+_),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+_);if(!a&&!r){var n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_fakebox"+o)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+o),s=geByClass1("checkbox_official",n)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("reply_fakebox_with_official",n),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(l.reply_box,{post_id:_,owner_name:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(n,"owner-name")||""),owner_photo:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(n,"owner-photo")||"",owner_href:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(n,"owner-href")||"",can_reply_as_group:s||"",class:s?" reply_fakebox_with_official":""}));i.appendChild(c),addClass(i,"replies_deep_has_field")}}}},addReplyName:function(_,e){var t={};t[_]=e,wall.addReplyNames(t)},addReplyNames:function(_){var e=cur.wallLayer?wkcur:cur;e.options||(e.options={}),e.options.reply_names=extend({},e.options.reply_names,_)},getReplyNames:function(){return(cur.wallLayer?wkcur:cur).options.reply_names||{}},getReplyName:function(_){return cur.pvShown&&cur.pvReplyNames?cur.pvReplyNames[_]||[]:window.mvcur&&mvcur.mvShown&&!mvcur.minimized?mvcur.mvReplyNames[_]||[]:wall.getReplyNames()[_]||[]},showReorderRepliesTooltip:function(_,e){var t=cur.wallLayer&&cur.wallLayer===e?wkcur:cur;if(!t["postRepliesReorderTT"+e]&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(_,"ett")){var o,i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_);o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"hide-smart")||!1?t.wallTpl.replies_reorder_tooltip:t.wallTpl.replies_reorder_tooltip_with_smart;var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(o||"",{postId:e})),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("radiobtn",l),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"order")||"asc";radioBtns["post_replies_reorder"+e]={val:r,els:a},a.some((function(_){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"order")===r)return Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)(_,!0),!0}));var n=new ElementTooltip(_,{appendTo:i,forceSide:"bottom",autoShow:!1,cls:"eltt_fancy eltt_fancy_actions",noOverflow:!1,centerShift:0,offset:[-10,0],content:l,align:"left"});t["postRepliesReorderTT"+e]=n,cur.destroy.push((function(){n&&n.destroy()})),n.show()}},reorderReplies:function(_,e,t){var o=cur.wallLayer&&cur.wallLayer===e?wkcur:cur;t=t||"asc",Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.r)(_,t,"post_replies_reorder"+e);var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_replies_reorder"+e),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"label")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(_);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(i,l),i.setAttribute("aria-label",l),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"order",t),o["postRepliesReorderTT"+e]&&o["postRepliesReorderTT"+e].hide(),wall.moreReplies(e,0,0,{deep:!0,clear:!0,order:t,onDone:function(_,t,o){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+e);if(o.count>o.offset+o.num){var l=cur.wallLayer&&cur.wallLayer===e?wkcur:cur,a=l.options.replies_page_count||20,r=Math.min(a,o.count-o.offset-o.num),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(l.wallTpl.reply_deep_next,{post_id:e,reply_id:e,offset:o.offset+o.num,count:r,text:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_next_n_replies",r),class:" replies_next_main"}));i.appendChild(n)}o.top_reply_ids&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"top-ids",o.top_reply_ids.join(",")),cur.wallMyOpened=cur.wallMyOpened||{},cur.wallMyOpened[e]=1,wall.repliesSideSetup(e)}})},getRepliesOrder:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_replies_reorder"+_);return(e?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"order"):"")||"asc"},isDescRepliesOrder:function(_,e){return"desc"===(e=e||wall.getRepliesOrder(_))},postEventChangeStatus:function(_,e,t,o){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"context");return stManager.add([jsc("web/groups.js")],()=>{Groups.enter(_,e,t,i,(_,t,o)=>{var l=i.split("_"),a=!l[1],r=l[0]+"_"+(a?"decline":""),n=a?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("events_snippet_will_participate_active"):Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("events_snippet_cant_participate_active");o=o||{},Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post_event_action_btn"+e).forEach(_=>{addClass(_,"secondary"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(_,n),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"context",r)}),o.members&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("page_media_event"+e).forEach(_=>{var e=geByClass1("page_media_event_members",_);e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(e,o.members)})},{showProgress:()=>{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post_event_action_btn"+e).forEach(_=>{Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(_)})},hideProgress:()=>{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post_event_action_btn"+e).forEach(_=>{Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(_)})}})}),o&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(o)},showEventFriends:function(_,e){Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.c)(_,{url:"/al_groups.php",params:{act:"a_event_friends_tt",owner_id:e},ajaxdt:100,showdt:400,hidedt:200,dir:"auto",noZIndex:!0,typeClass:"like_tt"})},showOrderTooltip:function(_){var e=geByClass1("post_replies_reorder");e&&(cur.orderFeatureTT=new ElementTooltip(e,{content:'<div class="feature_tooltip__close" onclick="cur.orderFeatureTT.hide();"></div>'+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_order_feature_text"),forceSide:"top",cls:"feature_intro_tt feature_info_tooltip order_feature_tooltip",autoShow:!1,noHideOnClick:!0,noAutoHideOnWindowClick:!0,appendToParent:!0,offset:[0,-4],onHide:()=>{ajax.post("al_index.php",{act:"hide_feature_tt",hash:_,type:"order_web"}),cur.orderFeatureTT.destroy(),delete cur.orderFeatureTT}}),cur.orderFeatureTT.show())},updateRepliesOnScroll:function(){cur.wallLayer?WkView.wallUpdateRepliesOnScroll():"full"===cur.wallType&&FullWall.onePostOnScroll()},showBestFriendsLockFeatureToolTip(){window.cur.bestFriendsLockFeatureToooltip&&window.cur.bestFriendsLockFeatureToooltip.destroy();var _=document.querySelector(".BestFriendsSettingsEntrypoint");if(_){var e='<div class="feature_intro_tt_hide" onclick="wall.hideBestFriendsLockFeatureTooltip(event);"></div>'+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_best_friends_lock_feature_tt");window.cur.bestFriendsLockFeatureToooltip=new ElementTooltip(_,{forceSide:"bottom",autoShow:!1,content:e,appendToParent:!0,cls:"feature_intro_tt feature_intro_blue_tt",offset:[12,-4],onHide:()=>{window.cur.bestFriendsLockFeatureToooltip&&window.cur.bestFriendsLockFeatureToooltip.destroy()},onShow:()=>{ajax.post("/al_index.php",{act:"show_feature_tt",type:"best_friends_lock",hash:cur.wallBestFriendsLockFeatureTooltipHash})}});var t=setTimeout(()=>{window.cur.bestFriendsLockFeatureToooltip.show()},500);window.cur.destroy.push(()=>{window.cur.bestFriendsLockFeatureToooltip&&window.cur.bestFriendsLockFeatureToooltip.destroy(),clearTimeout(t)})}},hideBestFriendsLockFeatureTooltip(_){Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(_),window.cur.bestFriendsLockFeatureToooltip&&(window.cur.bestFriendsLockFeatureToooltip.hide(),cur.wallBestFriendsLockFeatureTooltip=!1,ajax.post("/al_index.php",{act:"hide_feature_tt",type:"best_friends_lock",hash:cur.wallBestFriendsLockFeatureTooltipHash}))},chooseBestFriends(){stManager.add([jsc("web/best_friends.js"),"BestFriends.css"],()=>{window.bestFriendsBoxSettings(_=>{if(0!==_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("best_friends_only"),t=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_best_friends_settings_box_conversation_friends_count",_);e.innerHTML=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.n)("visibility_access_best_friends_only_option",{html:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.n)("visibility_access_best_friends_only_item",{count_text:t}),count:_}),Wall.showEditPost(),Wall.togglePostVisibilityAccess(e,_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_36__.a.ONLY_BEST_FRIENDS,"",!0);var o=document.querySelector(".BestFriendsSettingsEntrypoint");null==o||o.remove()}})})},showBestFriendsSettingsFeatureToolTip(){window.cur.bestFriendsSettingsFeatureToooltip&&window.cur.bestFriendsSettingsFeatureToooltip.destroy();var _=document.getElementById("post_visibility_btn");if(_){var e=`\n        <div class="feature_intro_tt_hide" onclick="wall.hideBestFriendsSettingsFeatureTooltip(event);"></div>\n        ${Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_best_friends_settings_feature_tt")}\n        <button class="flat_button button_small" onclick="wall.chooseBestFriends()">${Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_choose_best_friends")}</button>\n      `;window.cur.bestFriendsSettingsFeatureToooltip=new ElementTooltip(_,{forceSide:"bottom",autoShow:!1,content:e,appendToParent:!0,cls:"feature_intro_tt feature_intro_blue_tt BestFriendsSettingsFeatureTooltip",offset:[50,-4],centerShift:60,onHide:()=>wall.hideBestFriendsSettingsFeatureTooltip()});var t=setTimeout(()=>{window.cur.bestFriendsSettingsFeatureToooltip.show()},500);window.cur.destroy.push(()=>{window.cur.bestFriendsSettingsFeatureToooltip&&window.cur.bestFriendsSettingsFeatureToooltip.destroy(),clearTimeout(t)})}},hideBestFriendsSettingsFeatureTooltip(_){Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(_),window.cur.bestFriendsSettingsFeatureToooltip&&(window.cur.wallBestFriendsSettingsFeatureTooltip=!1,window.cur.bestFriendsSettingsFeatureToooltip.destroy(),window.cur.bestFriendsSettingsFeatureToooltip=null,ajax.post("/al_index.php",{act:"help_hints_hide",hint_id:window.cur.wallBestFriendsSettingsFeatureTooltipKey,hash:window.cur.wallBestFriendsSettingsFeatureTooltipHash}))},showBestFriendsPostFeatureToolTip(_){if(window.cur.wallBestFriendsPostFeatureTooltip=!1,window.cur.bestFriendsPostFeatureToooltip&&window.cur.bestFriendsPostFeatureToooltip.destroy(),_){var e='<div class="feature_intro_tt_hide BestFriendsPostFeatureTooltipButton" onclick="wall.hideBestFriendsPostFeatureTooltip(event);"></div>'+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_50__.b)("wall_best_friends_post_feature_tt");window.cur.bestFriendsPostFeatureToooltip=new ElementTooltip(_,{forceSide:"bottom",autoShow:!1,content:e,appendToParent:!0,cls:"feature_intro_tt feature_intro_blue_tt",offset:[0,-4],onHide:()=>wall.hideBestFriendsPostFeatureTooltip()});var t=setTimeout(()=>{window.cur.bestFriendsPostFeatureToooltip.show()},500);window.cur.destroy.push(()=>{window.cur.bestFriendsPostFeatureToooltip&&window.cur.bestFriendsPostFeatureToooltip.destroy(),clearTimeout(t)})}},hideBestFriendsPostFeatureTooltip(_){Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(_),window.cur.bestFriendsPostFeatureToooltip&&(window.cur.bestFriendsPostFeatureToooltip.destroy(),window.cur.bestFriendsPostFeatureToooltip=null,ajax.post("/al_index.php",{act:"help_hints_hide",hint_id:window.cur.wallBestFriendsPostFeatureTooltipKey,hash:window.cur.wallBestFriendsPostFeatureTooltipHash}))}};__webpack_exports__.a=Wall},xqyG:function(_,e,t){"use strict";t.d(e,"b",(function(){return i})),t.d(e,"c",(function(){return l})),t.d(e,"a",(function(){return a}));var o=function(){return(o=Object.assign||function(_){for(var e,t=1,o=arguments.length;t<o;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(_[i]=e[i]);return _}).apply(this,arguments)},i=function(_){return function(e){var t,i,l=e.animationData,a=e.animationURL,r=e.container,n=e.loadAnimationParams,s=void 0===n?{}:n,c=l?{animationData:l}:{path:a},b={renderer:"svg",autoplay:null!==(t=null==s?void 0:s.autoplay)&&void 0!==t&&t,loop:null===(i=null==s?void 0:s.loop)||void 0===i||i,rendererSettings:{progressiveLoad:!0}},d=o(o(o({},c),b),{container:r});return _.loadAnimation(d)}},l=function(_,e){_.isLoaded?e():_.addEventListener("DOMLoaded",(function(){e()}))};var a=function(_){var e=_.animationItemGet,t=_.animationItemSet,o=_.loadAnimation;return function(_,i,l){var a=_,r=e({animationId:a}),n=o({animationData:r,animationURL:_,container:i,loadAnimationParams:null==l?void 0:l.loadAnimationParams});return r||function(_,e){_.addEventListener("data_ready",(function(){e(_.animationData)}))}(n,(function(_){t({animationId:a,loadedAnimationData:_})})),n}}},zqir:function(_,e,t){"use strict";t.d(e,"a",(function(){return i}));var o=t("ToGb"),i=function(){Object(o.a)()}}});