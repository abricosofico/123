!function(i){function e(e){for(var r,o,s=e[0],l=e[1],w=e[2],a=0,u=[];a<s.length;a++)o=s[a],Object.prototype.hasOwnProperty.call(c,o)&&c[o]&&u.push(c[o][0]),c[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(i[r]=l[r]);for(d&&d(e);u.length;)u.shift()();return n.push.apply(n,w||[]),t()}function t(){for(var i,e=0;e<n.length;e++){for(var t=n[e],r=!0,s=1;s<t.length;s++){var l=t[s];0!==c[l]&&(r=!1)}r&&(n.splice(e--,1),i=o(o.s=t[0]))}return i}var r={},c={"web/privacy":0},n=[];function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.e=function(){return Promise.resolve()},o.m=i,o.c=r,o.d=function(i,e,t){o.o(i,e)||Object.defineProperty(i,e,{enumerable:!0,get:t})},o.r=function(i){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},o.t=function(i,e){if(1&e&&(i=o(i)),8&e)return i;if(4&e&&"object"==typeof i&&i&&i.__esModule)return i;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:i}),2&e&&"string"!=typeof i)for(var r in i)o.d(t,r,function(e){return i[e]}.bind(null,r));return t},o.n=function(i){var e=i&&i.__esModule?function(){return i.default}:function(){return i};return o.d(e,"a",e),e},o.o=function(i,e){return Object.prototype.hasOwnProperty.call(i,e)},o.p="/js/cmodules/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var w=0;w<s.length;w++)e(s[w]);var d=l;n.push([306,"evbus","common"]),t()}({306:function(i,e,t){i.exports=t("8JLy")},"8JLy":function(i,e,t){"use strict";t.r(e);t("Oyvg"),t("OG14"),t("pIFo"),t("rGqo"),t("Btvt");var r=t("4+be"),c=t("3oLO"),n=t("7jxN"),o=t("zxIV"),s=t("v+DW"),l=t("Egk5"),w=t("o7bv"),d=t("t7n3"),a=t("kcIO"),u=t("FWc3"),f=t("EasH"),p=t("RdBX"),h=t("2+aW"),v={customType:4,someType:5,listsType:6,contactsType:7,specialTypes:[8,9],flistBox(i,e,t,c,n,s,l){if(l=!!l,window.cur.flistTpl=c,0===t.length&&(t={}),window.cur.flistList=e,window.cur.flistFriends=e,window.cur.flistSearchList=[],window.cur.flistSearchTotal=-1,window.cur.flistSearchLoadStr="",window.cur.flistSelectedList=t&&t[0]?t:[],window.cur.flistSelected={},Object(d.f)(t,(i,e)=>{window.cur.flistSelected[e[0]]=1}),window.cur.flistSelectedShowed=0,window.cur.flistHash=s,window.cur.flistBox=i,window.cur.isVKMiniApp=l,window.cur.flistIndex=new p.a(e,i=>i[1]+" "+i[4]),i.removeButtons(),i.addButton(n||Object(r.d)("global_save"),this.submitFlistBox),window.cur.flistTooltip){var w=Object(o.J)("flist_sel"),a={className:"flist_info_tt",text:window.cur.flistTooltip,width:250,nohide:1,nohideover:1};a=window.cur.flistTooltipRight?Object(d.i)(a,{dir:"left",slideX:-15,shift:[-Object(o.S)(w)[0]-15,-28]}):Object(d.i)(a,{dir:"right",slideX:15,shift:[265,-28]}),Object(u.c)(w,a),window.stManager.add([window.jsc("web/tooltips.js")],()=>{i.setOptions({onHide:tooltips.hide.pbind(w)})})}else i.addButton(Object(r.d)("global_cancel"),()=>{i.hide()},"no");return window.cur.flistScrollbar=new Scrollbar("flist_scroll_wrap",{nomargin:!0,right:window.vk.rtl?"auto":0,left:window.vk.rtl?0:"auto",more:v.flistMore,onScroll:i=>{Object(o.J)("flist_scroll_wrap").scrollTop>0?Object(o.c)("flist_cont","flist_scrolled"):Object(o.mb)("flist_cont","flist_scrolled")}}),window.cur.flistAllCont=Object(o.J)("flist_all_list"),window.cur.flistSelCont=Object(o.J)("flist_sel_list"),window.cur.flistSearchEl=Object(o.J)("flist_search"),window.cur.flistSearchContEl=Object(o.L)("flist_search_cont","flist_cont"),window.cur.flistLimit&&window.cur.flistSelectedCnt>=window.cur.flistLimit-1&&v.flistFull(),window.cur.flistCountStr&&window.cur.flistSelectedCnt>0&&(Object(o.J)("flist_sel_summary").innerHTML=Object(r.j)(window.cur.flistSelectedCnt,window.cur.flistCountStr)),Object(o.zb)("flist_cont","flist_select_items",window.cur.flistSelectedCnt>0),!1},submitFlistBox(){var i=Object(o.J)("flist_list_name"),e=!1;if(Object(o.fb)(i)){if(!(e=i.value))return Object(s.q)(i);Object(w.c)(i,{back:!0}),Object(o.H)(i,0,i.value.length)}var t={},r=[];if(window.cur.isVKMiniApp&&(t.lists=[],t.friends=[]),Object(d.f)(window.cur.flistSelectedList,(i,e)=>{window.cur.isVKMiniApp?"list"===e[5]?t.lists.push(e):t.friends.push(e):t[e[0]]=e,r.push(e[0])}),window.cur.flistFriendsPrivacy)return c.a.post("al_settings.php",{act:"hide_friends",hash:window.cur.flistHash,ids:r.join(",")},{onDone:(i,e)=>{Object(a.f)(window.cur.flistFriendsPrivacyText),window.cur.flistBox.hide()},showProgress:window.cur.flistBox.showProgress,hiderogress:window.cur.flistBox.hideProgress}),Object(a.f)(window.cur.flistFriendsPrivacyText,{out:4e3}),void(window.cur.flistNavReload&&setTimeout(()=>{window.nav.reload()},2e3));window.cur.onFlistSave&&window.cur.onFlistSave(r,t,window.cur.flistHash,e),window.cur.flistBox.leaveOnSave||window.cur.flistBox.hide(!0)},flistMore(){window.cur.privacy&&window.cur.privacy.pagination&&!window.cur.flistSelectedShowed&&window.cur.flistList.length-window.cur.flistShown<10&&window.cur.flistList.length<window.cur.flistTotalCount?window.cur.flistSearchStr?v.flistSearchPagination():window.cur.flistMoreLoading||(window.cur.flistMoreLoading=!0,c.a.post("al_friends.php",Object(d.i)({},window.cur.privacy.chooseBoxOpts||{},{act:"select_friends_box",Checked:Object.keys(window.cur.flistSelected).join(","),pagination:1,offset:window.cur.flistList.length}),{onDone:i=>{window.cur.flistMoreLoading=!1,Object(d.t)(i)&&(i.forEach(i=>{window.cur.flistFriends.push(i),window.cur.flistIndex.add(i)}),v.flistMore())},onFail:()=>{window.cur.flistMoreLoading=!1}})):v.flistDrawItems()},flistDrawItems(){for(var i=window.cur.flistShown+60;window.cur.flistShown<i&&v.flistShowOne(window.cur.flistList[window.cur.flistShown+1]);)++window.cur.flistShown;setTimeout(()=>{window.cur.flistScrollbar&&window.cur.flistScrollbar.update()},10)},flistShowOne(i,e){if(!i)return!1;if(Object(o.J)("flist_item_wrap"+i[0]))return Object(o.xb)(Object(o.J)("flist_item_wrap"+i[0])),!0;var t=i[1];window.cur.flistSelection&&(t=t.replace(window.cur.flistSelection.re,window.cur.flistSelection.val));var r=Object(o.g)("div",{id:"flist_item_wrap"+i[0],className:"flist_item_wrap"+(window.cur.flistSelected[i[0]]?" flist_item_checked":""),innerHTML:Object(o.qb)(window.cur.flistTpl,{id:i[0],name:t,photo:i[2],alt:Object(d.c)(t)})});return e?window.cur.flistAllCont.insertBefore(r,window.cur.flistAllCont.firstChild):window.cur.flistAllCont.appendChild(r),!0},flistSelect(i,e,t){var c=Object(o.J)("flist_item_wrap"+i),n=e.parentNode,s=Boolean(e.dataset.isOne);if("flist_item_sel"==n.id.slice(0,14)||Object(o.ab)(c,"flist_item_checked")){delete window.cur.flistSelected[i];for(var l=0;l<window.cur.flistSelectedList.length;l++)if(window.cur.flistSelectedList[l][0]==i){window.cur.flistSelectedList.splice(l,1);break}c&&Object(o.mb)(c,"flist_item_checked");var w=Object(o.J)("flist_item_sel"+i);if(w&&(Object(o.kb)(w),window.cur.flistSelectedCnt>window.cur.flistSelInRow&&window.cur.flistSelectedList[window.cur.flistSelInRow-1])){var u=window.cur.flistSelectedList[window.cur.flistSelInRow-1];Object(o.J)("flist_item_sel"+u[0])||window.cur.flistSelCont.insertBefore(Object(o.g)("div",{id:"flist_item_sel"+u[0],className:"flist_item_wrap",innerHTML:Object(o.qb)(window.cur.flistTpl,{id:u[0],name:u[1],photo:u[2],alt:Object(d.c)(u[1])})}),Object(o.J)("flist_sel_show_all"))}window.cur.flistSelectedCnt--,0===window.cur.flistSelectedCnt?(Object(o.xb)("flist_info"),window.cur.flistSelectedShowed||Object(o.bb)("flist_search_toggler_wrap")):window.cur.flistSelectedCnt>window.cur.flistSelInRow?(Object(o.Cb)("flist_sel_show_all","+"+(window.cur.flistSelectedCnt-window.cur.flistSelInRow)),Object(o.mb)("flist_sel_show_all","unshown")):window.cur.flistSelectedCnt==window.cur.flistSelInRow&&Object(o.c)("flist_sel_show_all","unshown"),window.cur.flistLimit&&window.cur.flistSelectedCnt==window.cur.flistLimit-1&&Object(o.mb)(window.cur.flistAllCont,"flist_full"),Object(a.b)().changed=!0}else if(!Object(o.ab)(c,"flist_item_checked")){if(window.cur.flistLimit&&window.cur.flistSelectedCnt>=window.cur.flistLimit)return v.flistFull(t||window.event),!1;var f=Object(o.Cb)(c);if(Object(o.c)(c,"flist_item_checked"),0==window.cur.flistSelectedCnt&&(Object(o.bb)("flist_info"),Object(o.xb)("flist_search_toggler_wrap")),window.cur.flistSelectedCnt++,window.cur.flistSelCont.insertBefore(Object(o.g)("div",{id:"flist_item_sel"+i,className:"flist_item_wrap",innerHTML:f}),window.cur.flistSelCont.firstChild),window.cur.flistSelectedCnt>window.cur.flistSelInRow){var p=Object(o.K)("flist_item_wrap",window.cur.flistSelCont);Object(o.kb)(p[p.length-1]),Object(o.Cb)("flist_sel_show_all","+"+(window.cur.flistSelectedCnt-window.cur.flistSelInRow)),Object(o.mb)("flist_sel_show_all","unshown")}window.cur.flistLimit&&window.cur.flistSelectedCnt>=window.cur.flistLimit&&v.flistFull(t||window.event);for(var h=0;h<window.cur.flistList.length;h++)if(window.cur.flistList[h]&&window.cur.flistList[h][0]==i){window.cur.flistSelectedList.unshift(window.cur.flistList[h]);break}window.cur.flistSelected[i]=1,window.cur.flistSearchStr&&v.flistSearch(!1)}return Object(o.zb)("flist_cont","flist_select_items",window.cur.flistSelectedCnt>0),window.cur.flistCountStr&&Object(o.Cb)("flist_sel_summary",window.cur.flistSelectedCnt>0?Object(r.j)(window.cur.flistSelectedCnt,window.cur.flistCountStr):window.cur.flistNoSelStr),window.cur.flistScrollbar.update(),s&&this.submitFlistBox(),!1},flistFull(i){var e;i&&(Object(o.ab)(i.target,"flist_item_thumb")?e=i.target:(Object(o.ab)(i.target,"flist_item")&&(e=i.target)||(e=Object(o.Y)("flist_item",i.target)))&&(e=Object(o.L)("flist_item_thumb",e)),e&&(window.tooltips&&tooltips.hideAll(),Object(u.c)(e,{text:window.cur.limitTooltip,className:"flist_max_size_tt",dir:"auto",slide:-15,shift:[15,10],nohide:1,nohideover:1,hasover:1}),setTimeout(()=>{window.tooltips&&tooltips.hide(e)},2e3)));Object(o.c)(window.cur.flistAllCont,"flist_full")},flistSearch(i){i=Object(d.I)(i),window.cur.flistSearchStr=i,window.cur.privacy&&window.cur.privacy.pagination&&!window.cur.flistSelectedShowed&&window.cur.flistIndex.list.length<window.cur.flistTotalCount&&i?v.flistSearchPagination():(window.cur.flistSearchList=[],window.cur.flistSearchTotal=-1,window.cur.flistSearchLoadStr="",clearTimeout(window.cur.flistSearchLoadMore),i?(window.cur.flistList=(window.cur.flistSelectedShowed?window.cur.flistSelectedIndex:window.cur.flistIndex).search(i),window.cur.flistSelection={re:new RegExp("("+i.replace(window.cur.flistIndex.delimiter,"|").replace(/[\/\\\(\)\[\]\{\}\*,]/g,"").replace(/^\||\|$/g,"")+")","gi"),val:'<em class="highlight">$1</em>'},window.cur.flistScrollbar.scrollTop(0)):(window.cur.flistList=window.cur.flistSelectedShowed?window.cur.flistSelectedList:window.cur.flistFriends,window.cur.flistSelection=!1,Object(o.Cb)(window.cur.flistSearchEl,""),Object(o.c)("ui_search_field_empty",window.cur.flistSearchContEl)),window.cur.flistList.length?(window.cur.flistAllCont.innerHTML="",window.cur.flistShown=-1,v.flistMore()):window.cur.isVKMiniApp&&(window.cur.flistAllCont.innerHTML="",window.cur.flistAllCont.append(Object(o.g)("div",{className:"flist_empty no_select",innerHTML:Object(r.d)("apps_no_friends_for_query")})),window.cur.flistShown=0))},flistSearchPagination(){if(!(window.cur.flistSearchLoading||window.cur.flistSearchLoadStr===window.cur.flistSearchStr&&window.cur.flistSearchList.length>=window.cur.flistSearchTotal)&&window.cur.privacy){var i=window.cur.flistSearchStr;window.cur.flistSearchLoadMore&&clearTimeout(window.cur.flistSearchLoadMore),window.cur.flistSearchLoadStr===i?e():window.cur.flistSearchLoadMore=setTimeout(e,500)}function e(){window.cur.flistSearchLoading=!0,c.a.post("al_friends.php",Object(d.i)({},window.cur.privacy.chooseBoxOpts||{},{act:"select_friends_search",q:i,offset:window.cur.flistSearchLoadStr===i?window.cur.flistSearchList.length:0}),{onDone:(e,t)=>{window.cur.flistSearchLoadStr!==i&&(window.cur.flistSearchLoadStr=i,window.cur.flistShown=-1,window.cur.flistSearchList=[],window.cur.flistAllCont.innerHTML=""),window.cur.flistSearchTotal=+t,e.forEach(i=>{window.cur.flistSearchList.push(i)}),window.cur.flistList=window.cur.flistSearchList,v.flistDrawItems(),window.cur.flistSearchLoading=!1},onFail:()=>{window.cur.flistSearchLoading=!1}})}},flistToggleAllSelected(){window.cur.flistSelectedShowed?(window.cur.flistSelectedShowed=0,Object(o.mb)("flist_sel_show_all","flist_sel_showed_all"),Object(o.mb)("flist_search_toggler","on"),0===window.cur.flistSelectedCnt&&(Object(o.bb)("flist_search_toggler_wrap"),Object(o.mb)("flist_cont","flist_select_items")),v.flistSearch(!1)):(window.cur.flistSelectedShowed=1,Object(o.c)("flist_sel_show_all","flist_sel_showed_all"),Object(o.c)("flist_search_toggler","on"),window.cur.flistList=window.cur.flistSelectedList,window.cur.flistAllCont.innerHTML="",window.cur.flistShown=-1,v.flistMore(),window.cur.flistSelectedIndex=new p.a(window.cur.flistSelectedList,i=>i[1]+" "+i[4])),window.cur.flistSelection=!1,Object(o.Cb)(window.cur.flistSearchEl,"")},hideFriends(i,e){var t=window.cur.privacy[i][2];return Object(f.b)("al_friends.php",{act:"select_friends_box",from:"friends_privacy",Checked:t.join(",")},{stat:[window.jsc("web/privacy.js"),"privacy.css",window.jsc("web/indexer.js")],params:{dark:1}}),window.cur.onFlistSave=function(e,t,r){c.a.post("al_settings.php",{act:"hide_friends",hash:r,ids:e.join(",")},{onDone:(e,t)=>{Object(o.J)("privacy_"+i+"_hide").innerHTML=e,window.cur.privacy[i]=t,window.cur.onPrivacyChanged&&window.cur.onPrivacyChanged(i)}})},!1},update(i,e){var t=Object(o.J)("privacy_edit_"+i),r=window.cur.privacy[i],c=r[0],n=window.cur.privacy[i+"_types"]||window.cur.privacy._types,s=window.cur.privacy[i+"_lists"]||window.cur.privacy._lists||{},l={};for(var w in s)s.hasOwnProperty(w)&&(l[parseInt(w)]=s[w]);if(t){t.innerHTML=n[c];var d=Object(o.J)("privacy_header");d&&(d.innerHTML=n[c]);var a=Object(o.Y)("privacy_edit_wrap",t);if(a&&a.nextSibling)if(c==v.listsType){var u=[];for(var f in r[2])if(r[2].hasOwnProperty(f)){var p=-r[2][f],b=(p-1)%8+1;if(l[p]){var _=void 0;_=p<100?'<a href="/friends?section=list'+p+'" class="group'+b+'">'+l[p]+"</a>":'<span class="group'+b+'">'+l[p]+"</span>",u.push(_)}}a.nextSibling.innerHTML=(u.length?": ":"")+u.join(", ")}else a.nextSibling.innerHTML="";if(a&&Object(o.ab)(a,"privacy_graphic"))(0==c&&"hidden_friends"!==i||c==v.customType&&r[1]&&r[2]&&"0"==r[2][0]||1==c&&"appscall"===i?o.mb:o.c)(a,"privacy_locked")}window.cur.onPrivacyChanged&&window.cur.onPrivacyChanged(i,e?Object(h.a)(e):e)},setValue(i,e){var t=window.cur.privacy[i],r=window.cur.onPrivacyChanged;window.cur.privacy[i]=e,window.cur.onPrivacyChanged=null,v.update(i,t),window.cur.onPrivacyChanged=r},someSaved(i,e,t,c){var n=window.cur.privacy[i];window.cur.privacy[i]=[v.someType,0,e,[]];for(var s=window.cur.privacy.lang||{},l=e.length,w=[],d=0;d<l&&d<5;++d){var a=e[d],u=c?t[d]:t[a],f=u[4].replace(/'/g,"");w.push('<a href="/'+(f||"id"+a)+'" onclick="return nav.go(this, event)">'+(u[5]||u[1])+"</a>")}w=w.join(", "),l>5&&(w+=" "+(s.some?Object(r.d)(s.some,l-5):Object(r.d)("privacy_N_friends_some",l-5)));var p=Object(o.J)("privacy_edit_"+i),h=Object(o.Y)("privacy_edit_wrap",p),b=window.cur.privacy[i+"_types"]||window.cur.privacy._types;p.innerHTML=b[v.someType],h.nextSibling.innerHTML=": "+w,window.cur.onPrivacyChanged&&window.cur.onPrivacyChanged(i,n)},customSaved(i,e,t,c){var n=window.cur.privacy[i];window.cur.privacy[i]=e;var s=window.cur.privacy.lang||{};if(1==e[1]&&!e[3].length||e[0]==v.listsType)v.update(i,n);else if(e[0]==v.someType)v.someSaved(i,e[2],t,!0);else{var l=Object(o.J)("privacy_edit_"+i),w=Object(o.Y)("privacy_edit_wrap",l),d=window.cur.privacy[i+"_types"]||window.cur.privacy._types,a=window.cur.privacy[i+"_lists"]||window.cur.privacy._lists||{},u=d[v.listsType],f="";if(1==e[1])u=d[e[2][0]];else{f=[];for(var p=t.length,h=!1,b=0;b<p&&b<5;++b){var _=t[b],y=_[0];if(y>0){var S=_[4].replace(/'/g,"");h=!0,f.push('<a href="/'+(S||"id"+y)+'" onclick="return nav.go(this, event)">'+_[6]+"</a>")}else{var j=-y,O=(j-1)%8+1;f.push('<a href="/friends?section=list'+j+'" class="group'+O+'">'+a[j]+"</a>")}}h&&(u=d[v.someType]),f=": "+f.join(", "),p>5&&(f+=" "+Object(r.d)(s.some||"privacy_N_friends_some",p-5))}if(c.length){for(var m=c.length,g=[],T=0;T<m&&T<5;++T){var x=c[T],C=x[0];if(C>0){var L=x[4].replace(/'/g,"");g.push('<a href="/'+(L||"id"+C)+'" onclick="return nav.go(this, event)">'+x[6]+"</a>")}else{var P=-C,k=(P-1)%8+1;g.push('<a href="/friends?section=list'+P+'" class="group'+k+'">'+a[P]+"</a>")}}f+=", "+Object(r.d)("global_privacy_except")+" "+g.join(", "),m>5&&(f+=" "+Object(r.d)("privacy_N_friends_more",m-5))}l.innerHTML=u,w.nextSibling.innerHTML=f,Object(o.ab)(w,"privacy_graphic")&&(e[1]&&e[2]&&"0"==e[2][0]?o.mb:o.c)(w,"privacy_locked"),window.cur.onPrivacyChanged&&window.cur.onPrivacyChanged(i)}},choose(i,e,t,r){var c=window.cur.privSel,n=window.cur.privacy._noselect||"chat_actions"===c,s=window.cur.privacy[c];if(!window.cur.privacyNeedConfirm||r){if(n)return window.cur.onPrivacyChanged&&window.cur.onPrivacyChanged(c,e,t),v.qhide(),Object(l.c)(i);if(e==v.customType){var w,a,u=[],p="";return s[0]==v.customType?(w=s[1],a=s[2],u=s[3]):s[0]==v.someType||s[0]==v.listsType?(w=0,a=s[2]):(w=1,a=s[2]),window.cur.onCprivSave=v.customSaved.pbind(c),window.cur.privacy.custom_box_type&&(p=window.cur.privacy.custom_box_type),Object(f.b)("al_friends.php",Object(d.i)(window.cur.privacy.chooseBoxOpts||{},{act:"custom_privacy_box",type:w,plus:a.join(","),minus:u.join(","),opt:p,key:c}),{stat:["ui_controls.js","ui_controls.css"]})}if(e==v.someType){var h=s[0]==v.someType||s[0]==v.complexType&&0==s[1]?s[2].join(","):"";return window.cur.onFlistSave=function(i,e){v.someSaved(c,i,e)},Object(f.f)("al_friends.php",Object(d.i)({},window.cur.privacy.chooseBoxOpts||{},{act:"select_friends_box",Checked:h,pagination:window.cur.privacy.pagination?1:""}),{stat:["ui_controls.js"]})}if(e==v.listsType){var b=Object(o.J)("privacy_l_item"+t);if("l_item_sel"==b.className){b.className="l_item";var _=Object(d.p)(s[2],-t);if(-1!=_&&s[2].splice(_,1),!s[2].length&&"updates"!=c){var y=window.cur.privacy[c+"_types"]||window.cur.privacy._types,S=Object.keys(y);window.cur.privacy[c]=[Object(d.r)(S[0]),1,[0],[]]}}else b.className="l_item_sel",s[0]!=e&&(s=window.cur.privacy[c]=[e,0,[],[]]),s[2].push(-t);return v.update(c,s),Object(l.c)(i)}window.cur.privacy[c]=[e,1,[e],[]],v.update(c,s),v.qhide()}else window.cur.privacyNeedConfirm(c,e,()=>{v.show(Object(o.J)("privacy_edit_"+c),i,c),v.choose(i,e,t,!0)})},select(i,e){if(e||i!==window.cur.privSelIndex){if(!1!==window.cur.privSelIndex){var t=Object(o.J)("privacy_item"+window.cur.privSelIndex);t&&(t.className="item"),window.cur.privSelIndex==v.listsType&&window.cur.privacy[window.cur.privSel][0]!=v.listsType&&(v.toup?Object(o.bb)(t.previousSibling):Object(o.bb)(t.nextSibling))}window.cur.privSelIndex=i;var r=Object(o.J)("privacy_item"+window.cur.privSelIndex),c=window.cur.privSelIndex==v.someType?"_plus":"";r.nextSibling&&r.nextSibling.id=="privacy_item"+v.listsType&&Object(o.fb)(r.nextSibling.nextSibling)?r.className="last item_sel"+c:i==v.listsType?v.toup?Object(o.xb)(r.previousSibling):Object(o.xb)(r.nextSibling):r.className="item_sel"+c}},unselect(i){i==window.cur.privSelIndex&&(Object(o.J)("privacy_item"+i).className="item",window.cur.privSelIndex=!1)},hide(i){if(i&&i>0)window.cur.hidePrivacyTimer=window.setTimeout(()=>v.hide(0),i);else{clearTimeout(window.cur.hidePrivacyTimer);var e=Object(o.J)("privacy_header");e&&(-1===i?(Object(o.bb)(window.cur.privEl),e&&e.tt&&Object(d.v)(e.tt.hide)&&e.tt.hide()):o.fb&&(Object(n.f)(window.cur.privEl,200),e&&e.tt&&Object(d.v)(e.tt.hide)&&e.tt.hide()),window.cur.privSel=window.cur.privSelIndex=!1,Object(l.i)(document,"click",v.qhide))}},show(i,e,t){if(Object(o.ab)(i,"privacy_link_disabled"))return Object(l.c)(e);var r=window.cur.privacy[t],c=Object(o.Y)("privacy_edit_wrap",i);if(r&&c){if(window.cur.onPrivacyShow&&window.cur.onPrivacyShow(t),window.cur.privEl||(window.cur.privEl=Object(o.J)("privacy_dropdown"),window.cur.privEl&&(window.cur.privRows=window.cur.privEl.firstChild)),window.cur.privEl){if(window.cur.privEl.parentNode!=c){Object(o.kb)(window.cur.privEl),window.cur.privEl=c.appendChild(window.cur.privEl);var n=Object(o.J)("privacy_header");n&&n.tt&&Object(d.v)(n.tt.hide)&&n.tt.hide()}}else window.cur.privEl=c.appendChild(Object(o.g)("div",{id:"privacy_dropdown",innerHTML:'<div class="rows"></div>'})),window.cur.privRows=window.cur.privEl.firstChild,Object(l.b)(window.cur.privEl,"mouseout",v.hide.pbind(500)),Object(l.b)(window.cur.privEl,"mouseover",()=>{clearTimeout(window.cur.hidePrivacyTimer)});window.cur.privEl.className="privacy_dropdown privacy_dropdown_"+t,setTimeout(l.b.pbind(document,"click",v.qhide),1);var s=window.cur.privacy[t+"_types"]||window.cur.privacy._types,w=window.cur.privacy[t+"_lists"]||window.cur.privacy._lists||{},a=window.cur.privacy[t+"_hidden"]||window.cur.privacy._hidden||{},f=Object(o.T)(i,"fontSize")||window.vk.fs;Object(o.vb)(window.cur.privRows,{fontSize:f}),window.cur.privSelIndex=r[0],a[window.cur.privSelIndex]&&(window.cur.privSelIndex=0);var p,h,b,_=[],y=Object.keys(w).length>0;for(var S in _.push('<div class="header" onclick="Privacy.hide(-1)"><div id="privacy_header" class="header_label">'+i.innerHTML+"</div></div>"),_.push('<div class="body">'),s)if(!a[S]){if(p=S==window.cur.privSelIndex&&S!=v.listsType?"_sel":"",h="onmouseover=\"Privacy.select('"+S+"')\" onclick=\"Privacy.choose(event, '"+S+"')\"",S==v.listsType){if(!y)continue}else h+=" onmouseout=\"Privacy.unselect('"+S+"')\"";p&&S==v.someType&&(p+="_plus"),_.push('<div class="item'+p+'" id="privacy_item'+S+'" '+h+">"+s[S]+"</div>")}if(s[v.listsType]&&y){for(var j in b=window.cur.privSelIndex!=v.listsType,_.push('<div id="privacy_lists" class="privacy_lists">'),_.push('<div class="l_header" onclick="return cancelEvent(event)"><div class="l_header_label">'+s[v.listsType]+"</div></div>"),w)if(w.hasOwnProperty(j)){var O=parseInt(j);p=b?"":Object(d.o)(-O,r[2])?"_sel":"",_.push('<div class="l_item'+p+'" id="privacy_l_item'+O+'" onclick="Privacy.choose(event, '+v.listsType+", "+O+')"><div class="privacy_item_icon"></div><span class="l_item_text">'+w[j]+"</span></div>")}_.push("</div>")}_.push("</div>"),window.cur.privRows.innerHTML=_.join(""),window.cur.privSel=t;var m=Object(o.l)(window.cur.privEl,"tween");if(m&&m.stop(!0),Object(o.xb)(window.cur.privEl),s[v.listsType]&&b&&Object(o.bb)("privacy_lists"),v.toup=!1,Object(o.P)(window.cur.privEl)>0&&Object(o.P)(window.cur.privEl,!1,Object(o.S)(window.cur.privEl)[1])>0){v.toup=!0;var g=window.cur.privRows;g.appendChild(g.firstChild);for(var T=g.firstChild,x=T.firstChild,C=!1;x.nextSibling&&x.nextSibling!=C;x=T.firstChild)C=C?T.insertBefore(x,C):T.appendChild(x);var L=T.firstChild;if("privacy_lists"==L.id)for(var P=L.firstChild,k=!1;P.nextSibling&&P.nextSibling!=k;P=L.firstChild)k=k?L.insertBefore(P,k):L.appendChild(P)}v.toup?Object(o.c)(window.cur.privEl,"pdd_to_up"):Object(o.mb)(window.cur.privEl,"pdd_to_up"),window.cur.privacy[t+"_ralign"]?Object(o.c)(window.cur.privEl,"pdd_ralign"):Object(o.mb)(window.cur.privEl,"pdd_ralign");var M=window.cur.privacy[t+"_help"],I=window.cur.privacy[t+"_help_w"];if(M){var E=Object(o.J)("privacy_header"),J=Object(o.S)(E);Object(u.c)(E,{text:M,width:I||300,dir:"left",slideX:15,shift:[-(J[0]+10),-J[1]/2,0],nohide:!0})}return Object(l.c)(e)}},getValue(i){if(!window.cur.privacy||!window.cur.privacy[i])return"";var e=window.cur.privacy[i],t=[];if(e[0]<v.customType||e[0]==v.contactsType||v.specialTypes.some(i=>e[0]==i))t=[e[0]];else if(e[0]==v.someType)t=[4,e[2].join(",")];else if(e[0]==v.listsType){var r=[];for(var c in e[2])e[2].hasOwnProperty(c)&&r.push(-e[2][c]);t=[5,r.join(",")]}else t=[-1,e[1],e[2].join(","),e[3].join(",")];return t.join("_")}};v.qhide=v.hide.pbind(-1),window.Privacy=v;try{window.stManager.done(window.jsc("web/privacy.js"))}catch(i){}},RdBX:function(i,e,t){"use strict";t.d(e,"a",(function(){return r}));t("Vd3H"),t("OG14"),t("a1Th"),t("Btvt"),t("KKXr"),t("Oyvg");function r(i,e,t){this.list=i,this.iterCur=0,this.iterEnd=i?i.length:0,this.index={},this.callback=t||function(){},this.prepareFunc=e||function(i){return i},setTimeout(this.indexIteration.bind(this),10)}r.prototype.delimiter=r.delimiter=new RegExp("[\\s\\-\\.,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\#\\+\\?\\\\]+","g"),r.prototype.trimmer=new RegExp("^[\\s\\-\\.,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\+\\?\\\\]+|[\\s\\-,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\\\]+$","g"),r.prototype.toTranslit={1072:"a",1073:"b",1074:"v",1075:"g",1076:"d",1077:"e",1078:"zh",1079:"z",1080:"i",1081:"y",1082:"k",1083:"l",1084:"m",1085:"n",1086:"o",1087:"p",1088:"r",1089:"s",1090:"t",1091:"u",1092:"f",1093:"h",1094:"ts",1095:"ch",1096:"sh",1097:"sh",1099:"y",1101:"e",1102:"yu",1103:"ya",1105:"e",1098:"",1100:""},r.prototype.toLocalCase={f:"a",",":"b","<":"b",d:"v",u:"g",l:"d",t:"e",";":"zh",":":"zh",p:"z",b:"i",q:"y",r:"k",k:"l",v:"m",y:"n",j:"o",g:"p",h:"r",c:"s",n:"t",e:"u",a:"f","[":"h","{":"kh",w:"ts",x:"ch",i:"sh",o:"sh",s:"y","'":"e",'"':"e",".":"yu",">":"yu",z:"ya","`":"e","~":"e",m:"","]":"","}":""},r.prototype.toLocalTranslit={1072:"f",1074:"d",1075:"u",1076:"l",1077:"t",1079:"p",1080:"b",1081:"q",1082:"r",1083:"k",1084:"v",1085:"y",1086:"j",1087:"g",1088:"h",1089:"c",1090:"n",1091:"e",1092:"a",1094:"w",1095:"x",1096:"i",1097:"o",1099:"s",1103:"z",1098:"m"},r.prototype.indexIteration=function(){for(var i=Math.min(this.iterEnd,this.iterCur+200),e=this.iterCur;e<i;e++){var t=this.list[e];try{t._order=e}catch(i){}this.add(t)}this.iterCur=e,e>=this.iterEnd?this.callback(this):setTimeout(this.indexIteration.bind(this),10)},r.prototype.strToPrefixes=function(i){for(var e={},t=winToUtf(i).toLowerCase().split(this.delimiter),r=t.length;r--;){var c=t[r],n="";if(c){for(var o=0;o<6;o++){var s=c.charCodeAt(o);if(s){var l=this.toTranslit[s],w=c.substr(o,1);n+=null!=l?l:w}}e[n]=1}}return e},r.prototype.strToSearchPrefixes=function(i){for(var e=[],t=i.toLowerCase().split(this.delimiter),r=t.length;r--;){var c={},n=t[r],o="",s="",l="",w=n.length>1;if(n){for(var d=0;d<6;d++){var a=n.charCodeAt(d);if(a){var u=this.toTranslit[a],f=n.substr(d,1);if(o+=null!=u?u:f,w){var p=this.toLocalCase[f],h=this.toLocalTranslit[a];s+=null!=p?p:f,l+=null!=h?h:f}}}c[o]=1,w&&(c[s]=2,c[l]=3),e.push(c)}}return e},r.prototype.toIndexTree=function(i,e){for(var t=this.index,r=0;r<6;r++){var c=i.substr(r,1)||-1;t=t[c]?t[c]:t[c]=5==r?[]:{}}t.push(e)},r.prototype.remove=function(i){var e=this.prepareFunc(i),t=this.strToPrefixes(e);for(var r in t)if(t.hasOwnProperty(r)){for(var c=this.index,n=0;n<6;n++){var o=r.substr(n,1)||-1;if(!c[o])break;c=c[o]}if(c.length)for(var s in c)if(this.equals(c[s],i)){c.splice(s,1);break}}},r.prototype.equals=function(i,e){for(var t in i)if(i.hasOwnProperty(t))switch(typeof i[t]){case"object":if(!this.equals(i[t],e[t]))return!1;break;case"function":if(void 0===i[t]||i[t].toString()!=e[t].toString())return!1;break;default:if(i[t]!=e[t])return!1}for(var r in e)if(void 0===e[r])return!1;return!0},r.prototype.intersect=function(i,e){var t=[];if(isNumeric(i[0])||isNumeric(e[0]))return i.filter((function(i){return-1!==e.indexOf(i)}));for(;i.length>0&&e.length>0;)i[0]._order<e[0]._order?i.shift():(i[0]._order>e[0]._order||this.equals(i[0],e[0])&&t.push(i.shift()),e.shift());return t},r.prototype.add=function(i){var e=this.prepareFunc(i),t=this.strToPrefixes(e);for(var r in t)t.hasOwnProperty(r)&&this.toIndexTree(r,i)},r.prototype.search=function(i){var e=this.index,t=this.strToSearchPrefixes(i),r=[],c=!1;for(var n in t)if(t.hasOwnProperty(n)){if(c&&!r)break;var o=this.localSearch(t[n],0,e);o.sort((function(i,e){return i._order-e._order})),r=c?this.intersect(r,o):o,c=!0}for(var s=r[0],l=r.length+1,w=[],d=1;d<l;d++){var a=r[d];a!=s&&(w.push(s),s=a)}return w},r.prototype.localSearch=function(i,e,t){if(!t)return[];var r={};for(var c in i)if(i.hasOwnProperty(c)){var n=c.substr(e,1)||-1;r[n]||(r[n]={}),r[n][c]=1}if(6==e++||!t)return t;var o=[];for(var s in r)if(-1==s)for(var l in t)t.hasOwnProperty(l)&&o.push.apply(o,this.localSearch(r[s],e,t[l]));else{var w=this.localSearch(r[s],e,t[s]);o.push.apply(o,w)}return o}}});